{
  "version": 3,
  "sources": ["../node_modules/ohm-js/src/common.js", "../node_modules/ohm-js/src/unicode.js", "../node_modules/ohm-js/src/pexprs-main.js", "../node_modules/ohm-js/src/errors.js", "../node_modules/ohm-js/src/util.js", "../node_modules/ohm-js/src/Interval.js", "../node_modules/ohm-js/src/InputStream.js", "../node_modules/ohm-js/src/MatchResult.js", "../node_modules/ohm-js/src/PosInfo.js", "../node_modules/ohm-js/src/Trace.js", "../node_modules/ohm-js/src/pexprs-allowsSkippingPrecedingSpace.js", "../node_modules/ohm-js/src/pexprs-assertAllApplicationsAreValid.js", "../node_modules/ohm-js/src/pexprs-assertChoicesHaveUniformArity.js", "../node_modules/ohm-js/src/pexprs-assertIteratedExprsAreNotNullable.js", "../node_modules/ohm-js/src/nodes.js", "../node_modules/ohm-js/src/pexprs-eval.js", "../node_modules/ohm-js/src/pexprs-getArity.js", "../node_modules/ohm-js/src/pexprs-outputRecipe.js", "../node_modules/ohm-js/src/pexprs-introduceParams.js", "../node_modules/ohm-js/src/pexprs-isNullable.js", "../node_modules/ohm-js/src/pexprs-substituteParams.js", "../node_modules/ohm-js/src/pexprs-toArgumentNameList.js", "../node_modules/ohm-js/src/pexprs-toDisplayString.js", "../node_modules/ohm-js/src/Failure.js", "../node_modules/ohm-js/src/pexprs-toFailure.js", "../node_modules/ohm-js/src/pexprs-toString.js", "../node_modules/ohm-js/src/CaseInsensitiveTerminal.js", "../node_modules/ohm-js/src/MatchState.js", "../node_modules/ohm-js/src/Matcher.js", "../node_modules/ohm-js/src/Semantics.js", "../node_modules/ohm-js/src/Grammar.js", "../node_modules/ohm-js/src/GrammarDecl.js", "../node_modules/ohm-js/src/Builder.js", "../node_modules/ohm-js/src/makeRecipe.js", "../node_modules/ohm-js/dist/built-in-rules.js", "../node_modules/ohm-js/src/main-kernel.js", "../node_modules/ohm-js/dist/ohm-grammar.js", "../node_modules/ohm-js/src/buildGrammar.js", "../node_modules/ohm-js/dist/operations-and-attributes.js", "../node_modules/ohm-js/src/semanticsDeferredInit.js", "../node_modules/ohm-js/src/findIndentation.js", "../node_modules/ohm-js/src/IndentationSensitive.js", "../node_modules/ohm-js/src/main.js", "../src/grammar/grammarSource.ts", "../src/grammar/index.ts", "../src/utils/errors.ts", "../src/parser/index.ts", "../src/semantic/index.ts", "../src/ast/validators.ts", "../src/utils/defaults.ts", "../src/ast/transforms.ts", "../src/generator/codeBuilder.ts", "../src/generator/assetResolver.ts", "../src/generator/templates/preloadTemplate.ts", "../src/generator/templates/playerTemplate.ts", "../src/generator/templates/enemyTemplate.ts", "../src/generator/templates/collectibleTemplate.ts", "../src/generator/templates/tilemapTemplate.ts", "../src/generator/templates/sceneTemplate.ts", "../src/generator/templates/hudTemplate.ts", "../src/generator/templates/gameTemplate.ts", "../src/generator/index.ts", "../src/compiler.ts"],
  "sourcesContent": ["// --------------------------------------------------------------------\n// Private Stuff\n// --------------------------------------------------------------------\n\n// Helpers\n\nconst escapeStringFor = {};\nfor (let c = 0; c < 128; c++) {\n  escapeStringFor[c] = String.fromCharCode(c);\n}\nescapeStringFor[\"'\".charCodeAt(0)] = \"\\\\'\";\nescapeStringFor['\"'.charCodeAt(0)] = '\\\\\"';\nescapeStringFor['\\\\'.charCodeAt(0)] = '\\\\\\\\';\nescapeStringFor['\\b'.charCodeAt(0)] = '\\\\b';\nescapeStringFor['\\f'.charCodeAt(0)] = '\\\\f';\nescapeStringFor['\\n'.charCodeAt(0)] = '\\\\n';\nescapeStringFor['\\r'.charCodeAt(0)] = '\\\\r';\nescapeStringFor['\\t'.charCodeAt(0)] = '\\\\t';\nescapeStringFor['\\u000b'.charCodeAt(0)] = '\\\\v';\n\n// --------------------------------------------------------------------\n// Exports\n// --------------------------------------------------------------------\n\nexport function abstract(optMethodName) {\n  const methodName = optMethodName || '';\n  return function () {\n    throw new Error(\n      'this method ' +\n        methodName +\n        ' is abstract! ' +\n        '(it has no implementation in class ' +\n        this.constructor.name +\n        ')'\n    );\n  };\n}\n\nexport function assert(cond, message) {\n  if (!cond) {\n    throw new Error(message || 'Assertion failed');\n  }\n}\n\n// Define a lazily-computed, non-enumerable property named `propName`\n// on the object `obj`. `getterFn` will be called to compute the value the\n// first time the property is accessed.\nexport function defineLazyProperty(obj, propName, getterFn) {\n  let memo;\n  Object.defineProperty(obj, propName, {\n    get() {\n      if (!memo) {\n        memo = getterFn.call(this);\n      }\n      return memo;\n    },\n  });\n}\n\nexport function clone(obj) {\n  if (obj) {\n    return Object.assign({}, obj);\n  }\n  return obj;\n}\n\nexport function repeatFn(fn, n) {\n  const arr = [];\n  while (n-- > 0) {\n    arr.push(fn());\n  }\n  return arr;\n}\n\nexport function repeatStr(str, n) {\n  return new Array(n + 1).join(str);\n}\n\nexport function repeat(x, n) {\n  return repeatFn(() => x, n);\n}\n\nexport function getDuplicates(array) {\n  const duplicates = [];\n  for (let idx = 0; idx < array.length; idx++) {\n    const x = array[idx];\n    if (array.lastIndexOf(x) !== idx && duplicates.indexOf(x) < 0) {\n      duplicates.push(x);\n    }\n  }\n  return duplicates;\n}\n\nexport function copyWithoutDuplicates(array) {\n  const noDuplicates = [];\n  array.forEach(entry => {\n    if (noDuplicates.indexOf(entry) < 0) {\n      noDuplicates.push(entry);\n    }\n  });\n  return noDuplicates;\n}\n\nexport function isSyntactic(ruleName) {\n  const firstChar = ruleName[0];\n  return firstChar === firstChar.toUpperCase();\n}\n\nexport function isLexical(ruleName) {\n  return !isSyntactic(ruleName);\n}\n\nexport function padLeft(str, len, optChar) {\n  const ch = optChar || ' ';\n  if (str.length < len) {\n    return repeatStr(ch, len - str.length) + str;\n  }\n  return str;\n}\n\n// StringBuffer\n\nexport function StringBuffer() {\n  this.strings = [];\n}\n\nStringBuffer.prototype.append = function (str) {\n  this.strings.push(str);\n};\n\nStringBuffer.prototype.contents = function () {\n  return this.strings.join('');\n};\n\nconst escapeUnicode = str => String.fromCodePoint(parseInt(str, 16));\n\nexport function unescapeCodePoint(s) {\n  if (s.charAt(0) === '\\\\') {\n    switch (s.charAt(1)) {\n      case 'b':\n        return '\\b';\n      case 'f':\n        return '\\f';\n      case 'n':\n        return '\\n';\n      case 'r':\n        return '\\r';\n      case 't':\n        return '\\t';\n      case 'v':\n        return '\\v';\n      case 'x':\n        return escapeUnicode(s.slice(2, 4));\n      case 'u':\n        return s.charAt(2) === '{'\n          ? escapeUnicode(s.slice(3, -1))\n          : escapeUnicode(s.slice(2, 6));\n      default:\n        return s.charAt(1);\n    }\n  } else {\n    return s;\n  }\n}\n\n// Helper for producing a description of an unknown object in a safe way.\n// Especially useful for error messages where an unexpected type of object was encountered.\nexport function unexpectedObjToString(obj) {\n  if (obj == null) {\n    return String(obj);\n  }\n  const baseToString = Object.prototype.toString.call(obj);\n  try {\n    let typeName;\n    if (obj.constructor && obj.constructor.name) {\n      typeName = obj.constructor.name;\n    } else if (baseToString.indexOf('[object ') === 0) {\n      typeName = baseToString.slice(8, -1); // Extract e.g. \"Array\" from \"[object Array]\".\n    } else {\n      typeName = typeof obj;\n    }\n    return typeName + ': ' + JSON.stringify(String(obj));\n  } catch {\n    return baseToString;\n  }\n}\n\nexport function checkNotNull(obj, message = 'unexpected null value') {\n  if (obj == null) {\n    throw new Error(message);\n  }\n  return obj;\n}\n", "// The full list of categories from:\n// https://www.unicode.org/Public/UCD/latest/ucd/extracted/DerivedGeneralCategory.txt.\n\nconst toRegExp = val => new RegExp(String.raw`\\p{${val}}`, 'u');\n\n/*\n  grep -v '^#' DerivedGeneralCategory.txt \\\n    | cut -d';' -f2 \\\n    | awk 'NF{print $1}' \\\n    | sort -u \\\n    | awk '{printf \"\\x27%s\\x27,\\n\",$1}'\n */\n\nexport const UnicodeCategories = Object.fromEntries(\n  [\n    'Cc',\n    'Cf',\n    'Cn',\n    'Co',\n    'Cs',\n    'Ll',\n    'Lm',\n    'Lo',\n    'Lt',\n    'Lu',\n    'Mc',\n    'Me',\n    'Mn',\n    'Nd',\n    'Nl',\n    'No',\n    'Pc',\n    'Pd',\n    'Pe',\n    'Pf',\n    'Pi',\n    'Po',\n    'Ps',\n    'Sc',\n    'Sk',\n    'Sm',\n    'So',\n    'Zl',\n    'Zp',\n    'Zs',\n  ].map(cat => [cat, toRegExp(cat)])\n);\nUnicodeCategories['Ltmo'] = /\\p{Lt}|\\p{Lm}|\\p{Lo}/u;\n\n// We only support a few of these for now, but could add more later.\n// See https://www.unicode.org/Public/UCD/latest/ucd/PropertyAliases.txt\nexport const UnicodeBinaryProperties = Object.fromEntries(\n  ['XID_Start', 'XID_Continue', 'White_Space'].map(prop => [prop, toRegExp(prop)])\n);\n", "import {UnicodeBinaryProperties, UnicodeCategories} from './unicode.js';\nimport * as common from './common.js';\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\n// General stuff\n\nexport class PExpr {\n  constructor() {\n    if (this.constructor === PExpr) {\n      throw new Error(\"PExpr cannot be instantiated -- it's abstract\");\n    }\n  }\n\n  // Set the `source` property to the interval containing the source for this expression.\n  withSource(interval) {\n    if (interval) {\n      this.source = interval.trimmed();\n    }\n    return this;\n  }\n}\n\n// Any\n\nexport const any = Object.create(PExpr.prototype);\n\n// End\n\nexport const end = Object.create(PExpr.prototype);\n\n// Terminals\n\nexport class Terminal extends PExpr {\n  constructor(obj) {\n    super();\n    this.obj = obj;\n  }\n}\n\n// Ranges\n\nexport class Range extends PExpr {\n  constructor(from, to) {\n    super();\n    this.from = from;\n    this.to = to;\n    // If either `from` or `to` is made up of multiple code units, then\n    // the range should consume a full code point, not a single code unit.\n    this.matchCodePoint = from.length > 1 || to.length > 1;\n  }\n}\n\n// Parameters\n\nexport class Param extends PExpr {\n  constructor(index) {\n    super();\n    this.index = index;\n  }\n}\n\n// Alternation\n\nexport class Alt extends PExpr {\n  constructor(terms) {\n    super();\n    this.terms = terms;\n  }\n}\n\n// Extend is an implementation detail of rule extension\n\nexport class Extend extends Alt {\n  constructor(superGrammar, name, body) {\n    const origBody = superGrammar.rules[name].body;\n    super([body, origBody]);\n\n    this.superGrammar = superGrammar;\n    this.name = name;\n    this.body = body;\n  }\n}\n\n// Splice is an implementation detail of rule overriding with the `...` operator.\nexport class Splice extends Alt {\n  constructor(superGrammar, ruleName, beforeTerms, afterTerms) {\n    const origBody = superGrammar.rules[ruleName].body;\n    super([...beforeTerms, origBody, ...afterTerms]);\n\n    this.superGrammar = superGrammar;\n    this.ruleName = ruleName;\n    this.expansionPos = beforeTerms.length;\n  }\n}\n\n// Sequences\n\nexport class Seq extends PExpr {\n  constructor(factors) {\n    super();\n    this.factors = factors;\n  }\n}\n\n// Iterators and optionals\n\nexport class Iter extends PExpr {\n  constructor(expr) {\n    super();\n    this.expr = expr;\n  }\n}\n\nexport class Star extends Iter {}\nexport class Plus extends Iter {}\nexport class Opt extends Iter {}\n\nStar.prototype.operator = '*';\nPlus.prototype.operator = '+';\nOpt.prototype.operator = '?';\n\nStar.prototype.minNumMatches = 0;\nPlus.prototype.minNumMatches = 1;\nOpt.prototype.minNumMatches = 0;\n\nStar.prototype.maxNumMatches = Number.POSITIVE_INFINITY;\nPlus.prototype.maxNumMatches = Number.POSITIVE_INFINITY;\nOpt.prototype.maxNumMatches = 1;\n\n// Predicates\n\nexport class Not extends PExpr {\n  constructor(expr) {\n    super();\n    this.expr = expr;\n  }\n}\n\nexport class Lookahead extends PExpr {\n  constructor(expr) {\n    super();\n    this.expr = expr;\n  }\n}\n\n// \"Lexification\"\n\nexport class Lex extends PExpr {\n  constructor(expr) {\n    super();\n    this.expr = expr;\n  }\n}\n\n// Rule application\n\nexport class Apply extends PExpr {\n  constructor(ruleName, args = []) {\n    super();\n    this.ruleName = ruleName;\n    this.args = args;\n  }\n\n  isSyntactic() {\n    return common.isSyntactic(this.ruleName);\n  }\n\n  // This method just caches the result of `this.toString()` in a non-enumerable property.\n  toMemoKey() {\n    if (!this._memoKey) {\n      Object.defineProperty(this, '_memoKey', {value: this.toString()});\n    }\n    return this._memoKey;\n  }\n}\n\n// Unicode character\n\nexport class UnicodeChar extends PExpr {\n  constructor(categoryOrProp) {\n    super();\n    this.categoryOrProp = categoryOrProp;\n    if (categoryOrProp in UnicodeCategories) {\n      this.pattern = UnicodeCategories[categoryOrProp];\n    } else if (categoryOrProp in UnicodeBinaryProperties) {\n      this.pattern = UnicodeBinaryProperties[categoryOrProp];\n    } else {\n      throw new Error(\n        `Invalid Unicode category or property name: ${JSON.stringify(categoryOrProp)}`\n      );\n    }\n  }\n}\n", "import {assert} from './common.js';\nimport * as pexprs from './pexprs-main.js';\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nexport function createError(message, optInterval) {\n  let e;\n  if (optInterval) {\n    e = new Error(optInterval.getLineAndColumnMessage() + message);\n    e.shortMessage = message;\n    e.interval = optInterval;\n  } else {\n    e = new Error(message);\n  }\n  return e;\n}\n\n// ----------------- errors about intervals -----------------\n\nexport function intervalSourcesDontMatch() {\n  return createError(\"Interval sources don't match\");\n}\n\n// ----------------- errors about grammars -----------------\n\n// Grammar syntax error\n\nexport function grammarSyntaxError(matchFailure) {\n  const e = new Error();\n  Object.defineProperty(e, 'message', {\n    enumerable: true,\n    get() {\n      return matchFailure.message;\n    },\n  });\n  Object.defineProperty(e, 'shortMessage', {\n    enumerable: true,\n    get() {\n      return 'Expected ' + matchFailure.getExpectedText();\n    },\n  });\n  e.interval = matchFailure.getInterval();\n  return e;\n}\n\n// Undeclared grammar\n\nexport function undeclaredGrammar(grammarName, namespace, interval) {\n  const message = namespace\n    ? `Grammar ${grammarName} is not declared in namespace '${namespace}'`\n    : 'Undeclared grammar ' + grammarName;\n  return createError(message, interval);\n}\n\n// Duplicate grammar declaration\n\nexport function duplicateGrammarDeclaration(grammar, namespace) {\n  return createError('Grammar ' + grammar.name + ' is already declared in this namespace');\n}\n\nexport function grammarDoesNotSupportIncrementalParsing(grammar) {\n  return createError(`Grammar '${grammar.name}' does not support incremental parsing`);\n}\n\n// ----------------- rules -----------------\n\n// Undeclared rule\n\nexport function undeclaredRule(ruleName, grammarName, optInterval) {\n  return createError(\n    'Rule ' + ruleName + ' is not declared in grammar ' + grammarName,\n    optInterval\n  );\n}\n\n// Cannot override undeclared rule\n\nexport function cannotOverrideUndeclaredRule(ruleName, grammarName, optSource) {\n  return createError(\n    'Cannot override rule ' + ruleName + ' because it is not declared in ' + grammarName,\n    optSource\n  );\n}\n\n// Cannot extend undeclared rule\n\nexport function cannotExtendUndeclaredRule(ruleName, grammarName, optSource) {\n  return createError(\n    'Cannot extend rule ' + ruleName + ' because it is not declared in ' + grammarName,\n    optSource\n  );\n}\n\n// Duplicate rule declaration\n\nexport function duplicateRuleDeclaration(ruleName, grammarName, declGrammarName, optSource) {\n  let message =\n    \"Duplicate declaration for rule '\" + ruleName + \"' in grammar '\" + grammarName + \"'\";\n  if (grammarName !== declGrammarName) {\n    message += \" (originally declared in '\" + declGrammarName + \"')\";\n  }\n  return createError(message, optSource);\n}\n\n// Wrong number of parameters\n\nexport function wrongNumberOfParameters(ruleName, expected, actual, source) {\n  return createError(\n    'Wrong number of parameters for rule ' +\n      ruleName +\n      ' (expected ' +\n      expected +\n      ', got ' +\n      actual +\n      ')',\n    source\n  );\n}\n\n// Wrong number of arguments\n\nexport function wrongNumberOfArguments(ruleName, expected, actual, expr) {\n  return createError(\n    'Wrong number of arguments for rule ' +\n      ruleName +\n      ' (expected ' +\n      expected +\n      ', got ' +\n      actual +\n      ')',\n    expr\n  );\n}\n\n// Duplicate parameter names\n\nexport function duplicateParameterNames(ruleName, duplicates, source) {\n  return createError(\n    'Duplicate parameter names in rule ' + ruleName + ': ' + duplicates.join(', '),\n    source\n  );\n}\n\n// Invalid parameter expression\n\nexport function invalidParameter(ruleName, expr) {\n  return createError(\n    'Invalid parameter to rule ' +\n      ruleName +\n      ': ' +\n      expr +\n      ' has arity ' +\n      expr.getArity() +\n      ', but parameter expressions must have arity 1',\n    expr.source\n  );\n}\n\n// Application of syntactic rule from lexical rule\n\nconst syntacticVsLexicalNote =\n  'NOTE: A _syntactic rule_ is a rule whose name begins with a capital letter. ' +\n  'See https://ohmjs.org/d/svl for more details.';\n\nexport function applicationOfSyntacticRuleFromLexicalContext(ruleName, applyExpr) {\n  return createError(\n    'Cannot apply syntactic rule ' + ruleName + ' from here (inside a lexical context)',\n    applyExpr.source\n  );\n}\n\n// Lexical rule application used with applySyntactic\n\nexport function applySyntacticWithLexicalRuleApplication(applyExpr) {\n  const {ruleName} = applyExpr;\n  return createError(\n    `applySyntactic is for syntactic rules, but '${ruleName}' is a lexical rule. ` +\n      syntacticVsLexicalNote,\n    applyExpr.source\n  );\n}\n\n// Application of applySyntactic in a syntactic context\n\nexport function unnecessaryExperimentalApplySyntactic(applyExpr) {\n  return createError(\n    'applySyntactic is not required here (in a syntactic context)',\n    applyExpr.source\n  );\n}\n\n// Incorrect argument type\n\nexport function incorrectArgumentType(expectedType, expr) {\n  return createError('Incorrect argument type: expected ' + expectedType, expr.source);\n}\n\n// Multiple instances of the super-splice operator (`...`) in the rule body.\n\nexport function multipleSuperSplices(expr) {\n  return createError(\"'...' can appear at most once in a rule body\", expr.source);\n}\n\n// Unicode code point escapes\n\nexport function invalidCodePoint(applyWrapper) {\n  const node = applyWrapper._node;\n  assert(node && node.isNonterminal() && node.ctorName === 'escapeChar_unicodeCodePoint');\n\n  // Get an interval that covers all of the hex digits.\n  const digitIntervals = applyWrapper.children.slice(1, -1).map(d => d.source);\n  const fullInterval = digitIntervals[0].coverageWith(...digitIntervals.slice(1));\n  return createError(\n    `U+${fullInterval.contents} is not a valid Unicode code point`,\n    fullInterval\n  );\n}\n\n// ----------------- Kleene operators -----------------\n\nexport function kleeneExprHasNullableOperand(kleeneExpr, applicationStack) {\n  const actuals =\n    applicationStack.length > 0 ? applicationStack[applicationStack.length - 1].args : [];\n  const expr = kleeneExpr.expr.substituteParams(actuals);\n  let message =\n    'Nullable expression ' +\n    expr +\n    \" is not allowed inside '\" +\n    kleeneExpr.operator +\n    \"' (possible infinite loop)\";\n  if (applicationStack.length > 0) {\n    const stackTrace = applicationStack\n      .map(app => new pexprs.Apply(app.ruleName, app.args))\n      .join('\\n');\n    message += '\\nApplication stack (most recent application last):\\n' + stackTrace;\n  }\n  return createError(message, kleeneExpr.expr.source);\n}\n\n// ----------------- arity -----------------\n\nexport function inconsistentArity(ruleName, expected, actual, expr) {\n  return createError(\n    'Rule ' +\n      ruleName +\n      ' involves an alternation which has inconsistent arity ' +\n      '(expected ' +\n      expected +\n      ', got ' +\n      actual +\n      ')',\n    expr.source\n  );\n}\n\n// ----------------- properties -----------------\n\nexport function duplicatePropertyNames(duplicates) {\n  return createError('Object pattern has duplicate property names: ' + duplicates.join(', '));\n}\n\n// ----------------- constructors -----------------\n\nexport function invalidConstructorCall(grammar, ctorName, children) {\n  return createError(\n    'Attempt to invoke constructor ' + ctorName + ' with invalid or unexpected arguments'\n  );\n}\n\n// ----------------- convenience -----------------\n\nexport function multipleErrors(errors) {\n  const messages = errors.map(e => e.message);\n  return createError(['Errors:'].concat(messages).join('\\n- '), errors[0].interval);\n}\n\n// ----------------- semantic -----------------\n\nexport function missingSemanticAction(ctorName, name, type, stack) {\n  let stackTrace = stack\n    .slice(0, -1)\n    .map(info => {\n      const ans = '  ' + info[0].name + ' > ' + info[1];\n      return info.length === 3 ? ans + \" for '\" + info[2] + \"'\" : ans;\n    })\n    .join('\\n');\n  stackTrace += '\\n  ' + name + ' > ' + ctorName;\n\n  let moreInfo = '';\n  if (ctorName === '_iter') {\n    moreInfo = [\n      '\\nNOTE: as of Ohm v16, there is no default action for iteration nodes \u2014 see ',\n      '  https://ohmjs.org/d/dsa for details.',\n    ].join('\\n');\n  }\n\n  const message = [\n    `Missing semantic action for '${ctorName}' in ${type} '${name}'.${moreInfo}`,\n    'Action stack (most recent call last):',\n    stackTrace,\n  ].join('\\n');\n\n  const e = createError(message);\n  e.name = 'missingSemanticAction';\n  return e;\n}\n\nexport function throwErrors(errors) {\n  if (errors.length === 1) {\n    throw errors[0];\n  }\n  if (errors.length > 1) {\n    throw multipleErrors(errors);\n  }\n}\n", "import * as common from './common.js';\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\n// Given an array of numbers `arr`, return an array of the numbers as strings,\n// right-justified and padded to the same length.\nfunction padNumbersToEqualLength(arr) {\n  let maxLen = 0;\n  const strings = arr.map(n => {\n    const str = n.toString();\n    maxLen = Math.max(maxLen, str.length);\n    return str;\n  });\n  return strings.map(s => common.padLeft(s, maxLen));\n}\n\n// Produce a new string that would be the result of copying the contents\n// of the string `src` onto `dest` at offset `offest`.\nfunction strcpy(dest, src, offset) {\n  const origDestLen = dest.length;\n  const start = dest.slice(0, offset);\n  const end = dest.slice(offset + src.length);\n  return (start + src + end).substr(0, origDestLen);\n}\n\n// Casts the underlying lineAndCol object to a formatted message string,\n// highlighting `ranges`.\nfunction lineAndColumnToMessage(...ranges) {\n  const lineAndCol = this;\n  const {offset} = lineAndCol;\n  const {repeatStr} = common;\n\n  const sb = new common.StringBuffer();\n  sb.append('Line ' + lineAndCol.lineNum + ', col ' + lineAndCol.colNum + ':\\n');\n\n  // An array of the previous, current, and next line numbers as strings of equal length.\n  const lineNumbers = padNumbersToEqualLength([\n    lineAndCol.prevLine == null ? 0 : lineAndCol.lineNum - 1,\n    lineAndCol.lineNum,\n    lineAndCol.nextLine == null ? 0 : lineAndCol.lineNum + 1,\n  ]);\n\n  // Helper for appending formatting input lines to the buffer.\n  const appendLine = (num, content, prefix) => {\n    sb.append(prefix + lineNumbers[num] + ' | ' + content + '\\n');\n  };\n\n  // Include the previous line for context if possible.\n  if (lineAndCol.prevLine != null) {\n    appendLine(0, lineAndCol.prevLine, '  ');\n  }\n  // Line that the error occurred on.\n  appendLine(1, lineAndCol.line, '> ');\n\n  // Build up the line that points to the offset and possible indicates one or more ranges.\n  // Start with a blank line, and indicate each range by overlaying a string of `~` chars.\n  const lineLen = lineAndCol.line.length;\n  let indicationLine = repeatStr(' ', lineLen + 1);\n  for (let i = 0; i < ranges.length; ++i) {\n    let startIdx = ranges[i][0];\n    let endIdx = ranges[i][1];\n    common.assert(startIdx >= 0 && startIdx <= endIdx, 'range start must be >= 0 and <= end');\n\n    const lineStartOffset = offset - lineAndCol.colNum + 1;\n    startIdx = Math.max(0, startIdx - lineStartOffset);\n    endIdx = Math.min(endIdx - lineStartOffset, lineLen);\n\n    indicationLine = strcpy(indicationLine, repeatStr('~', endIdx - startIdx), startIdx);\n  }\n  const gutterWidth = 2 + lineNumbers[1].length + 3;\n  sb.append(repeatStr(' ', gutterWidth));\n  indicationLine = strcpy(indicationLine, '^', lineAndCol.colNum - 1);\n  sb.append(indicationLine.replace(/ +$/, '') + '\\n');\n\n  // Include the next line for context if possible.\n  if (lineAndCol.nextLine != null) {\n    appendLine(2, lineAndCol.nextLine, '  ');\n  }\n  return sb.contents();\n}\n\n// --------------------------------------------------------------------\n// Exports\n// --------------------------------------------------------------------\n\nlet builtInRulesCallbacks = [];\n\n// Since Grammar.BuiltInRules is bootstrapped, most of Ohm can't directly depend it.\n// This function allows modules that do depend on the built-in rules to register a callback\n// that will be called later in the initialization process.\nexport function awaitBuiltInRules(cb) {\n  builtInRulesCallbacks.push(cb);\n}\n\nexport function announceBuiltInRules(grammar) {\n  builtInRulesCallbacks.forEach(cb => {\n    cb(grammar);\n  });\n  builtInRulesCallbacks = null;\n}\n\n// Return an object with the line and column information for the given\n// offset in `str`.\nexport function getLineAndColumn(str, offset) {\n  let lineNum = 1;\n  let colNum = 1;\n\n  let currOffset = 0;\n  let lineStartOffset = 0;\n\n  let nextLine = null;\n  let prevLine = null;\n  let prevLineStartOffset = -1;\n\n  while (currOffset < offset) {\n    const c = str.charAt(currOffset++);\n    if (c === '\\n') {\n      lineNum++;\n      colNum = 1;\n      prevLineStartOffset = lineStartOffset;\n      lineStartOffset = currOffset;\n    } else if (c !== '\\r') {\n      colNum++;\n    }\n  }\n\n  // Find the end of the target line.\n  let lineEndOffset = str.indexOf('\\n', lineStartOffset);\n  if (lineEndOffset === -1) {\n    lineEndOffset = str.length;\n  } else {\n    // Get the next line.\n    const nextLineEndOffset = str.indexOf('\\n', lineEndOffset + 1);\n    nextLine =\n      nextLineEndOffset === -1\n        ? str.slice(lineEndOffset)\n        : str.slice(lineEndOffset, nextLineEndOffset);\n    // Strip leading and trailing EOL char(s).\n    nextLine = nextLine.replace(/^\\r?\\n/, '').replace(/\\r$/, '');\n  }\n\n  // Get the previous line.\n  if (prevLineStartOffset >= 0) {\n    // Strip trailing EOL char(s).\n    prevLine = str.slice(prevLineStartOffset, lineStartOffset).replace(/\\r?\\n$/, '');\n  }\n\n  // Get the target line, stripping a trailing carriage return if necessary.\n  const line = str.slice(lineStartOffset, lineEndOffset).replace(/\\r$/, '');\n\n  return {\n    offset,\n    lineNum,\n    colNum,\n    line,\n    prevLine,\n    nextLine,\n    toString: lineAndColumnToMessage,\n  };\n}\n\n// Return a nicely-formatted string describing the line and column for the\n// given offset in `str` highlighting `ranges`.\nexport function getLineAndColumnMessage(str, offset, ...ranges) {\n  return getLineAndColumn(str, offset).toString(...ranges);\n}\n\nexport const uniqueId = (() => {\n  let idCounter = 0;\n  return prefix => '' + prefix + idCounter++;\n})();\n", "import {assert} from './common.js';\nimport * as errors from './errors.js';\nimport * as util from './util.js';\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nexport class Interval {\n  constructor(sourceString, startIdx, endIdx) {\n    // Store the full source in a non-enumerable property, so that when\n    // grammars and other objects are printed in the REPL, it's not\n    // cluttered with multiple copies of the same long string.\n    Object.defineProperty(this, '_sourceString', {\n      value: sourceString,\n      configurable: false,\n      enumerable: false,\n      writable: false,\n    });\n    this.startIdx = startIdx;\n    this.endIdx = endIdx;\n  }\n\n  get sourceString() {\n    return this._sourceString;\n  }\n\n  get contents() {\n    if (this._contents === undefined) {\n      this._contents = this.sourceString.slice(this.startIdx, this.endIdx);\n    }\n    return this._contents;\n  }\n\n  get length() {\n    return this.endIdx - this.startIdx;\n  }\n\n  coverageWith(...intervals) {\n    return Interval.coverage(...intervals, this);\n  }\n\n  collapsedLeft() {\n    return new Interval(this.sourceString, this.startIdx, this.startIdx);\n  }\n\n  collapsedRight() {\n    return new Interval(this.sourceString, this.endIdx, this.endIdx);\n  }\n\n  getLineAndColumn() {\n    return util.getLineAndColumn(this.sourceString, this.startIdx);\n  }\n\n  getLineAndColumnMessage() {\n    const range = [this.startIdx, this.endIdx];\n    return util.getLineAndColumnMessage(this.sourceString, this.startIdx, range);\n  }\n\n  // Returns an array of 0, 1, or 2 intervals that represents the result of the\n  // interval difference operation.\n  minus(that) {\n    if (this.sourceString !== that.sourceString) {\n      throw errors.intervalSourcesDontMatch();\n    } else if (this.startIdx === that.startIdx && this.endIdx === that.endIdx) {\n      // `this` and `that` are the same interval!\n      return [];\n    } else if (this.startIdx < that.startIdx && that.endIdx < this.endIdx) {\n      // `that` splits `this` into two intervals\n      return [\n        new Interval(this.sourceString, this.startIdx, that.startIdx),\n        new Interval(this.sourceString, that.endIdx, this.endIdx),\n      ];\n    } else if (this.startIdx < that.endIdx && that.endIdx < this.endIdx) {\n      // `that` contains a prefix of `this`\n      return [new Interval(this.sourceString, that.endIdx, this.endIdx)];\n    } else if (this.startIdx < that.startIdx && that.startIdx < this.endIdx) {\n      // `that` contains a suffix of `this`\n      return [new Interval(this.sourceString, this.startIdx, that.startIdx)];\n    } else {\n      // `that` and `this` do not overlap\n      return [this];\n    }\n  }\n\n  // Returns a new Interval that has the same extent as this one, but which is relative\n  // to `that`, an Interval that fully covers this one.\n  relativeTo(that) {\n    if (this.sourceString !== that.sourceString) {\n      throw errors.intervalSourcesDontMatch();\n    }\n    assert(\n      this.startIdx >= that.startIdx && this.endIdx <= that.endIdx,\n      'other interval does not cover this one'\n    );\n    return new Interval(\n      this.sourceString,\n      this.startIdx - that.startIdx,\n      this.endIdx - that.startIdx\n    );\n  }\n\n  // Returns a new Interval which contains the same contents as this one,\n  // but with whitespace trimmed from both ends.\n  trimmed() {\n    const {contents} = this;\n    const startIdx = this.startIdx + contents.match(/^\\s*/)[0].length;\n    const endIdx = this.endIdx - contents.match(/\\s*$/)[0].length;\n    return new Interval(this.sourceString, startIdx, endIdx);\n  }\n\n  subInterval(offset, len) {\n    const newStartIdx = this.startIdx + offset;\n    return new Interval(this.sourceString, newStartIdx, newStartIdx + len);\n  }\n}\n\nInterval.coverage = function (firstInterval, ...intervals) {\n  let {startIdx, endIdx} = firstInterval;\n  for (const interval of intervals) {\n    if (interval.sourceString !== firstInterval.sourceString) {\n      throw errors.intervalSourcesDontMatch();\n    } else {\n      startIdx = Math.min(startIdx, interval.startIdx);\n      endIdx = Math.max(endIdx, interval.endIdx);\n    }\n  }\n  return new Interval(firstInterval.sourceString, startIdx, endIdx);\n};\n", "import {Interval} from './Interval.js';\n\nconst MAX_CHAR_CODE = 0xffff;\nexport const MAX_CODE_POINT = 0x10ffff;\n\nexport class InputStream {\n  constructor(source) {\n    this.source = source;\n    this.pos = 0;\n    this.examinedLength = 0;\n  }\n\n  atEnd() {\n    const ans = this.pos >= this.source.length;\n    this.examinedLength = Math.max(this.examinedLength, this.pos + 1);\n    return ans;\n  }\n\n  next() {\n    const ans = this.source[this.pos++];\n    this.examinedLength = Math.max(this.examinedLength, this.pos);\n    return ans;\n  }\n\n  nextCharCode() {\n    const nextChar = this.next();\n    return nextChar && nextChar.charCodeAt(0);\n  }\n\n  nextCodePoint() {\n    const cp = this.source.slice(this.pos++).codePointAt(0);\n    // If the code point is beyond plane 0, it takes up two characters.\n    if (cp > MAX_CHAR_CODE) {\n      this.pos += 1;\n    }\n    this.examinedLength = Math.max(this.examinedLength, this.pos);\n    return cp;\n  }\n\n  matchString(s, optIgnoreCase) {\n    let idx;\n    if (optIgnoreCase) {\n      /*\n        Case-insensitive comparison is a tricky business. Some notable gotchas include the\n        \"Turkish I\" problem (http://www.i18nguy.com/unicode/turkish-i18n.html) and the fact\n        that the German Esszet (\u00DF) turns into \"SS\" in upper case.\n\n        This is intended to be a locale-invariant comparison, which means it may not obey\n        locale-specific expectations (e.g. \"i\" => \"\u0130\").\n\n        See also https://unicode.org/faq/casemap_charprop.html#casemap\n       */\n      for (idx = 0; idx < s.length; idx++) {\n        const actual = this.next();\n        const expected = s[idx];\n        if (actual == null || actual.toUpperCase() !== expected.toUpperCase()) {\n          return false;\n        }\n      }\n      return true;\n    }\n    // Default is case-sensitive comparison.\n    for (idx = 0; idx < s.length; idx++) {\n      if (this.next() !== s[idx]) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  sourceSlice(startIdx, endIdx) {\n    return this.source.slice(startIdx, endIdx);\n  }\n\n  interval(startIdx, optEndIdx) {\n    return new Interval(this.source, startIdx, optEndIdx ? optEndIdx : this.pos);\n  }\n}\n", "import * as common from './common.js';\nimport * as util from './util.js';\nimport {Interval} from './Interval.js';\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nexport class MatchResult {\n  constructor(\n    matcher,\n    input,\n    startExpr,\n    cst,\n    cstOffset,\n    rightmostFailurePosition,\n    optRecordedFailures\n  ) {\n    this.matcher = matcher;\n    this.input = input;\n    this.startExpr = startExpr;\n    this._cst = cst;\n    this._cstOffset = cstOffset;\n    this._rightmostFailurePosition = rightmostFailurePosition;\n    this._rightmostFailures = optRecordedFailures;\n\n    if (this.failed()) {\n      common.defineLazyProperty(this, 'message', function () {\n        const detail = 'Expected ' + this.getExpectedText();\n        return (\n          util.getLineAndColumnMessage(this.input, this.getRightmostFailurePosition()) + detail\n        );\n      });\n      common.defineLazyProperty(this, 'shortMessage', function () {\n        const detail = 'expected ' + this.getExpectedText();\n        const errorInfo = util.getLineAndColumn(\n          this.input,\n          this.getRightmostFailurePosition()\n        );\n        return 'Line ' + errorInfo.lineNum + ', col ' + errorInfo.colNum + ': ' + detail;\n      });\n    }\n  }\n\n  succeeded() {\n    return !!this._cst;\n  }\n\n  failed() {\n    return !this.succeeded();\n  }\n\n  getRightmostFailurePosition() {\n    return this._rightmostFailurePosition;\n  }\n\n  getRightmostFailures() {\n    if (!this._rightmostFailures) {\n      this.matcher.setInput(this.input);\n      const matchResultWithFailures = this.matcher._match(this.startExpr, {\n        tracing: false,\n        positionToRecordFailures: this.getRightmostFailurePosition(),\n      });\n      this._rightmostFailures = matchResultWithFailures.getRightmostFailures();\n    }\n    return this._rightmostFailures;\n  }\n\n  toString() {\n    return this.succeeded()\n      ? '[match succeeded]'\n      : '[match failed at position ' + this.getRightmostFailurePosition() + ']';\n  }\n\n  // Return a string summarizing the expected contents of the input stream when\n  // the match failure occurred.\n  getExpectedText() {\n    if (this.succeeded()) {\n      throw new Error('cannot get expected text of a successful MatchResult');\n    }\n\n    const sb = new common.StringBuffer();\n    let failures = this.getRightmostFailures();\n\n    // Filter out the fluffy failures to make the default error messages more useful\n    failures = failures.filter(failure => !failure.isFluffy());\n\n    for (let idx = 0; idx < failures.length; idx++) {\n      if (idx > 0) {\n        if (idx === failures.length - 1) {\n          sb.append(failures.length > 2 ? ', or ' : ' or ');\n        } else {\n          sb.append(', ');\n        }\n      }\n      sb.append(failures[idx].toString());\n    }\n    return sb.contents();\n  }\n\n  getInterval() {\n    const pos = this.getRightmostFailurePosition();\n    return new Interval(this.input, pos, pos);\n  }\n}\n", "export class PosInfo {\n  constructor() {\n    this.applicationMemoKeyStack = []; // active applications at this position\n    this.memo = {};\n    this.maxExaminedLength = 0;\n    this.maxRightmostFailureOffset = -1;\n    this.currentLeftRecursion = undefined;\n  }\n\n  isActive(application) {\n    return this.applicationMemoKeyStack.indexOf(application.toMemoKey()) >= 0;\n  }\n\n  enter(application) {\n    this.applicationMemoKeyStack.push(application.toMemoKey());\n  }\n\n  exit() {\n    this.applicationMemoKeyStack.pop();\n  }\n\n  startLeftRecursion(headApplication, memoRec) {\n    memoRec.isLeftRecursion = true;\n    memoRec.headApplication = headApplication;\n    memoRec.nextLeftRecursion = this.currentLeftRecursion;\n    this.currentLeftRecursion = memoRec;\n\n    const {applicationMemoKeyStack} = this;\n    const indexOfFirstInvolvedRule =\n      applicationMemoKeyStack.indexOf(headApplication.toMemoKey()) + 1;\n    const involvedApplicationMemoKeys = applicationMemoKeyStack.slice(\n      indexOfFirstInvolvedRule\n    );\n\n    memoRec.isInvolved = function (applicationMemoKey) {\n      return involvedApplicationMemoKeys.indexOf(applicationMemoKey) >= 0;\n    };\n\n    memoRec.updateInvolvedApplicationMemoKeys = function () {\n      for (let idx = indexOfFirstInvolvedRule; idx < applicationMemoKeyStack.length; idx++) {\n        const applicationMemoKey = applicationMemoKeyStack[idx];\n        if (!this.isInvolved(applicationMemoKey)) {\n          involvedApplicationMemoKeys.push(applicationMemoKey);\n        }\n      }\n    };\n  }\n\n  endLeftRecursion() {\n    this.currentLeftRecursion = this.currentLeftRecursion.nextLeftRecursion;\n  }\n\n  // Note: this method doesn't get called for the \"head\" of a left recursion -- for LR heads,\n  // the memoized result (which starts out being a failure) is always used.\n  shouldUseMemoizedResult(memoRec) {\n    if (!memoRec.isLeftRecursion) {\n      return true;\n    }\n    const {applicationMemoKeyStack} = this;\n    for (let idx = 0; idx < applicationMemoKeyStack.length; idx++) {\n      const applicationMemoKey = applicationMemoKeyStack[idx];\n      if (memoRec.isInvolved(applicationMemoKey)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  memoize(memoKey, memoRec) {\n    this.memo[memoKey] = memoRec;\n    this.maxExaminedLength = Math.max(this.maxExaminedLength, memoRec.examinedLength);\n    this.maxRightmostFailureOffset = Math.max(\n      this.maxRightmostFailureOffset,\n      memoRec.rightmostFailureOffset\n    );\n    return memoRec;\n  }\n\n  clearObsoleteEntries(pos, invalidatedIdx) {\n    if (pos + this.maxExaminedLength <= invalidatedIdx) {\n      // Optimization: none of the rule applications that were memoized here examined the\n      // interval of the input that changed, so nothing has to be invalidated.\n      return;\n    }\n\n    const {memo} = this;\n    this.maxExaminedLength = 0;\n    this.maxRightmostFailureOffset = -1;\n    Object.keys(memo).forEach(k => {\n      const memoRec = memo[k];\n      if (pos + memoRec.examinedLength > invalidatedIdx) {\n        delete memo[k];\n      } else {\n        this.maxExaminedLength = Math.max(this.maxExaminedLength, memoRec.examinedLength);\n        this.maxRightmostFailureOffset = Math.max(\n          this.maxRightmostFailureOffset,\n          memoRec.rightmostFailureOffset\n        );\n      }\n    });\n  }\n}\n", "import {Interval} from './Interval.js';\nimport * as common from './common.js';\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\n// Unicode characters that are used in the `toString` output.\nconst BALLOT_X = '\\u2717';\nconst CHECK_MARK = '\\u2713';\nconst DOT_OPERATOR = '\\u22C5';\nconst RIGHTWARDS_DOUBLE_ARROW = '\\u21D2';\nconst SYMBOL_FOR_HORIZONTAL_TABULATION = '\\u2409';\nconst SYMBOL_FOR_LINE_FEED = '\\u240A';\nconst SYMBOL_FOR_CARRIAGE_RETURN = '\\u240D';\n\nconst Flags = {\n  succeeded: 1 << 0,\n  isRootNode: 1 << 1,\n  isImplicitSpaces: 1 << 2,\n  isMemoized: 1 << 3,\n  isHeadOfLeftRecursion: 1 << 4,\n  terminatesLR: 1 << 5,\n};\n\nfunction spaces(n) {\n  return common.repeat(' ', n).join('');\n}\n\n// Return a string representation of a portion of `input` at offset `pos`.\n// The result will contain exactly `len` characters.\nfunction getInputExcerpt(input, pos, len) {\n  const excerpt = asEscapedString(input.slice(pos, pos + len));\n\n  // Pad the output if necessary.\n  if (excerpt.length < len) {\n    return excerpt + common.repeat(' ', len - excerpt.length).join('');\n  }\n  return excerpt;\n}\n\nfunction asEscapedString(obj) {\n  if (typeof obj === 'string') {\n    // Replace non-printable characters with visible symbols.\n    return obj\n      .replace(/ /g, DOT_OPERATOR)\n      .replace(/\\t/g, SYMBOL_FOR_HORIZONTAL_TABULATION)\n      .replace(/\\n/g, SYMBOL_FOR_LINE_FEED)\n      .replace(/\\r/g, SYMBOL_FOR_CARRIAGE_RETURN);\n  }\n  return String(obj);\n}\n\n// ----------------- Trace -----------------\n\nexport class Trace {\n  constructor(input, pos1, pos2, expr, succeeded, bindings, optChildren) {\n    this.input = input;\n    this.pos = this.pos1 = pos1;\n    this.pos2 = pos2;\n    this.source = new Interval(input, pos1, pos2);\n    this.expr = expr;\n    this.bindings = bindings;\n    this.children = optChildren || [];\n    this.terminatingLREntry = null;\n\n    this._flags = succeeded ? Flags.succeeded : 0;\n  }\n\n  get displayString() {\n    return this.expr.toDisplayString();\n  }\n\n  clone() {\n    return this.cloneWithExpr(this.expr);\n  }\n\n  cloneWithExpr(expr) {\n    const ans = new Trace(\n      this.input,\n      this.pos,\n      this.pos2,\n      expr,\n      this.succeeded,\n      this.bindings,\n      this.children\n    );\n\n    ans.isHeadOfLeftRecursion = this.isHeadOfLeftRecursion;\n    ans.isImplicitSpaces = this.isImplicitSpaces;\n    ans.isMemoized = this.isMemoized;\n    ans.isRootNode = this.isRootNode;\n    ans.terminatesLR = this.terminatesLR;\n    ans.terminatingLREntry = this.terminatingLREntry;\n    return ans;\n  }\n\n  // Record the trace information for the terminating condition of the LR loop.\n  recordLRTermination(ruleBodyTrace, value) {\n    this.terminatingLREntry = new Trace(\n      this.input,\n      this.pos,\n      this.pos2,\n      this.expr,\n      false,\n      [value],\n      [ruleBodyTrace]\n    );\n    this.terminatingLREntry.terminatesLR = true;\n  }\n\n  // Recursively traverse this trace node and all its descendents, calling a visitor function\n  // for each node that is visited. If `vistorObjOrFn` is an object, then its 'enter' property\n  // is a function to call before visiting the children of a node, and its 'exit' property is\n  // a function to call afterwards. If `visitorObjOrFn` is a function, it represents the 'enter'\n  // function.\n  //\n  // The functions are called with three arguments: the Trace node, its parent Trace, and a number\n  // representing the depth of the node in the tree. (The root node has depth 0.) `optThisArg`, if\n  // specified, is the value to use for `this` when executing the visitor functions.\n  walk(visitorObjOrFn, optThisArg) {\n    let visitor = visitorObjOrFn;\n    if (typeof visitor === 'function') {\n      visitor = {enter: visitor};\n    }\n\n    function _walk(node, parent, depth) {\n      let recurse = true;\n      if (visitor.enter) {\n        if (visitor.enter.call(optThisArg, node, parent, depth) === Trace.prototype.SKIP) {\n          recurse = false;\n        }\n      }\n      if (recurse) {\n        node.children.forEach(child => {\n          _walk(child, node, depth + 1);\n        });\n        if (visitor.exit) {\n          visitor.exit.call(optThisArg, node, parent, depth);\n        }\n      }\n    }\n    if (this.isRootNode) {\n      // Don't visit the root node itself, only its children.\n      this.children.forEach(c => {\n        _walk(c, null, 0);\n      });\n    } else {\n      _walk(this, null, 0);\n    }\n  }\n\n  // Return a string representation of the trace.\n  // Sample:\n  //     12\u22C5+\u22C52\u22C5*\u22C53 \u2713 exp \u21D2  \"12\"\n  //     12\u22C5+\u22C52\u22C5*\u22C53   \u2713 addExp (LR) \u21D2  \"12\"\n  //     12\u22C5+\u22C52\u22C5*\u22C53       \u2717 addExp_plus\n  toString() {\n    const sb = new common.StringBuffer();\n    this.walk((node, parent, depth) => {\n      if (!node) {\n        return this.SKIP;\n      }\n      const ctorName = node.expr.constructor.name;\n      // Don't print anything for Alt nodes.\n      if (ctorName === 'Alt') {\n        return;\n      }\n      sb.append(getInputExcerpt(node.input, node.pos, 10) + spaces(depth * 2 + 1));\n      sb.append((node.succeeded ? CHECK_MARK : BALLOT_X) + ' ' + node.displayString);\n      if (node.isHeadOfLeftRecursion) {\n        sb.append(' (LR)');\n      }\n      if (node.succeeded) {\n        const contents = asEscapedString(node.source.contents);\n        sb.append(' ' + RIGHTWARDS_DOUBLE_ARROW + '  ');\n        sb.append(typeof contents === 'string' ? '\"' + contents + '\"' : contents);\n      }\n      sb.append('\\n');\n    });\n    return sb.contents();\n  }\n}\n\n// A value that can be returned from visitor functions to indicate that a\n// node should not be recursed into.\nTrace.prototype.SKIP = {};\n\n// For convenience, create a getter and setter for the boolean flags in `Flags`.\nObject.keys(Flags).forEach(name => {\n  const mask = Flags[name];\n  Object.defineProperty(Trace.prototype, name, {\n    get() {\n      return (this._flags & mask) !== 0;\n    },\n    set(val) {\n      if (val) {\n        this._flags |= mask;\n      } else {\n        this._flags &= ~mask;\n      }\n    },\n  });\n});\n", "import {abstract} from './common.js';\nimport * as pexprs from './pexprs-main.js';\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n/*\n  Return true if we should skip spaces preceding this expression in a syntactic context.\n*/\npexprs.PExpr.prototype.allowsSkippingPrecedingSpace = abstract('allowsSkippingPrecedingSpace');\n\n/*\n  Generally, these are all first-order expressions and (with the exception of Apply)\n  directly read from the input stream.\n*/\npexprs.any.allowsSkippingPrecedingSpace =\n  pexprs.end.allowsSkippingPrecedingSpace =\n  pexprs.Apply.prototype.allowsSkippingPrecedingSpace =\n  pexprs.Terminal.prototype.allowsSkippingPrecedingSpace =\n  pexprs.Range.prototype.allowsSkippingPrecedingSpace =\n  pexprs.UnicodeChar.prototype.allowsSkippingPrecedingSpace =\n    function () {\n      return true;\n    };\n\n/*\n  Higher-order expressions that don't directly consume input.\n*/\npexprs.Alt.prototype.allowsSkippingPrecedingSpace =\n  pexprs.Iter.prototype.allowsSkippingPrecedingSpace =\n  pexprs.Lex.prototype.allowsSkippingPrecedingSpace =\n  pexprs.Lookahead.prototype.allowsSkippingPrecedingSpace =\n  pexprs.Not.prototype.allowsSkippingPrecedingSpace =\n  pexprs.Param.prototype.allowsSkippingPrecedingSpace =\n  pexprs.Seq.prototype.allowsSkippingPrecedingSpace =\n    function () {\n      return false;\n    };\n", "import {abstract, isSyntactic} from './common.js';\nimport * as errors from './errors.js';\nimport * as pexprs from './pexprs-main.js';\nimport * as util from './util.js';\n\nlet BuiltInRules;\n\nutil.awaitBuiltInRules(g => {\n  BuiltInRules = g;\n});\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\nlet lexifyCount;\n\npexprs.PExpr.prototype.assertAllApplicationsAreValid = function (ruleName, grammar) {\n  lexifyCount = 0;\n  this._assertAllApplicationsAreValid(ruleName, grammar);\n};\n\npexprs.PExpr.prototype._assertAllApplicationsAreValid = abstract(\n  '_assertAllApplicationsAreValid'\n);\n\npexprs.any._assertAllApplicationsAreValid =\n  pexprs.end._assertAllApplicationsAreValid =\n  pexprs.Terminal.prototype._assertAllApplicationsAreValid =\n  pexprs.Range.prototype._assertAllApplicationsAreValid =\n  pexprs.Param.prototype._assertAllApplicationsAreValid =\n  pexprs.UnicodeChar.prototype._assertAllApplicationsAreValid =\n    function (ruleName, grammar) {\n      // no-op\n    };\n\npexprs.Lex.prototype._assertAllApplicationsAreValid = function (ruleName, grammar) {\n  lexifyCount++;\n  this.expr._assertAllApplicationsAreValid(ruleName, grammar);\n  lexifyCount--;\n};\n\npexprs.Alt.prototype._assertAllApplicationsAreValid = function (ruleName, grammar) {\n  for (let idx = 0; idx < this.terms.length; idx++) {\n    this.terms[idx]._assertAllApplicationsAreValid(ruleName, grammar);\n  }\n};\n\npexprs.Seq.prototype._assertAllApplicationsAreValid = function (ruleName, grammar) {\n  for (let idx = 0; idx < this.factors.length; idx++) {\n    this.factors[idx]._assertAllApplicationsAreValid(ruleName, grammar);\n  }\n};\n\npexprs.Iter.prototype._assertAllApplicationsAreValid =\n  pexprs.Not.prototype._assertAllApplicationsAreValid =\n  pexprs.Lookahead.prototype._assertAllApplicationsAreValid =\n    function (ruleName, grammar) {\n      this.expr._assertAllApplicationsAreValid(ruleName, grammar);\n    };\n\npexprs.Apply.prototype._assertAllApplicationsAreValid = function (\n  ruleName,\n  grammar,\n  skipSyntacticCheck = false\n) {\n  const ruleInfo = grammar.rules[this.ruleName];\n  const isContextSyntactic = isSyntactic(ruleName) && lexifyCount === 0;\n\n  // Make sure that the rule exists...\n  if (!ruleInfo) {\n    throw errors.undeclaredRule(this.ruleName, grammar.name, this.source);\n  }\n\n  // ...and that this application is allowed\n  if (!skipSyntacticCheck && isSyntactic(this.ruleName) && !isContextSyntactic) {\n    throw errors.applicationOfSyntacticRuleFromLexicalContext(this.ruleName, this);\n  }\n\n  // ...and that this application has the correct number of arguments.\n  const actual = this.args.length;\n  const expected = ruleInfo.formals.length;\n  if (actual !== expected) {\n    throw errors.wrongNumberOfArguments(this.ruleName, expected, actual, this.source);\n  }\n\n  const isBuiltInApplySyntactic =\n    BuiltInRules && ruleInfo === BuiltInRules.rules.applySyntactic;\n  const isBuiltInCaseInsensitive =\n    BuiltInRules && ruleInfo === BuiltInRules.rules.caseInsensitive;\n\n  // If it's an application of 'caseInsensitive', ensure that the argument is a Terminal.\n  if (isBuiltInCaseInsensitive) {\n    if (!(this.args[0] instanceof pexprs.Terminal)) {\n      throw errors.incorrectArgumentType('a Terminal (e.g. \"abc\")', this.args[0]);\n    }\n  }\n\n  if (isBuiltInApplySyntactic) {\n    const arg = this.args[0];\n    if (!(arg instanceof pexprs.Apply)) {\n      throw errors.incorrectArgumentType('a syntactic rule application', arg);\n    }\n    if (!isSyntactic(arg.ruleName)) {\n      throw errors.applySyntacticWithLexicalRuleApplication(arg);\n    }\n    if (isContextSyntactic) {\n      throw errors.unnecessaryExperimentalApplySyntactic(this);\n    }\n  }\n\n  // ...and that all of the argument expressions only have valid applications and have arity 1.\n  // If `this` is an application of the built-in applySyntactic rule, then its arg is\n  // allowed (and expected) to be a syntactic rule, even if we're in a lexical context.\n  this.args.forEach(arg => {\n    arg._assertAllApplicationsAreValid(ruleName, grammar, isBuiltInApplySyntactic);\n    if (arg.getArity() !== 1) {\n      throw errors.invalidParameter(this.ruleName, arg);\n    }\n  });\n};\n", "import {abstract} from './common.js';\nimport * as errors from './errors.js';\nimport * as pexprs from './pexprs-main.js';\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\npexprs.PExpr.prototype.assertChoicesHaveUniformArity = abstract(\n  'assertChoicesHaveUniformArity'\n);\n\npexprs.any.assertChoicesHaveUniformArity =\n  pexprs.end.assertChoicesHaveUniformArity =\n  pexprs.Terminal.prototype.assertChoicesHaveUniformArity =\n  pexprs.Range.prototype.assertChoicesHaveUniformArity =\n  pexprs.Param.prototype.assertChoicesHaveUniformArity =\n  pexprs.Lex.prototype.assertChoicesHaveUniformArity =\n  pexprs.UnicodeChar.prototype.assertChoicesHaveUniformArity =\n    function (ruleName) {\n      // no-op\n    };\n\npexprs.Alt.prototype.assertChoicesHaveUniformArity = function (ruleName) {\n  if (this.terms.length === 0) {\n    return;\n  }\n  const arity = this.terms[0].getArity();\n  for (let idx = 0; idx < this.terms.length; idx++) {\n    const term = this.terms[idx];\n    term.assertChoicesHaveUniformArity();\n    const otherArity = term.getArity();\n    if (arity !== otherArity) {\n      throw errors.inconsistentArity(ruleName, arity, otherArity, term);\n    }\n  }\n};\n\npexprs.Extend.prototype.assertChoicesHaveUniformArity = function (ruleName) {\n  // Extend is a special case of Alt that's guaranteed to have exactly two\n  // cases: [extensions, origBody].\n  const actualArity = this.terms[0].getArity();\n  const expectedArity = this.terms[1].getArity();\n  if (actualArity !== expectedArity) {\n    throw errors.inconsistentArity(ruleName, expectedArity, actualArity, this.terms[0]);\n  }\n};\n\npexprs.Seq.prototype.assertChoicesHaveUniformArity = function (ruleName) {\n  for (let idx = 0; idx < this.factors.length; idx++) {\n    this.factors[idx].assertChoicesHaveUniformArity(ruleName);\n  }\n};\n\npexprs.Iter.prototype.assertChoicesHaveUniformArity = function (ruleName) {\n  this.expr.assertChoicesHaveUniformArity(ruleName);\n};\n\npexprs.Not.prototype.assertChoicesHaveUniformArity = function (ruleName) {\n  // no-op (not required b/c the nested expr doesn't show up in the CST)\n};\n\npexprs.Lookahead.prototype.assertChoicesHaveUniformArity = function (ruleName) {\n  this.expr.assertChoicesHaveUniformArity(ruleName);\n};\n\npexprs.Apply.prototype.assertChoicesHaveUniformArity = function (ruleName) {\n  // The arities of the parameter expressions is required to be 1 by\n  // `assertAllApplicationsAreValid()`.\n};\n", "import {abstract} from './common.js';\nimport * as errors from './errors.js';\nimport * as pexprs from './pexprs-main.js';\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\npexprs.PExpr.prototype.assertIteratedExprsAreNotNullable = abstract(\n  'assertIteratedExprsAreNotNullable'\n);\n\npexprs.any.assertIteratedExprsAreNotNullable =\n  pexprs.end.assertIteratedExprsAreNotNullable =\n  pexprs.Terminal.prototype.assertIteratedExprsAreNotNullable =\n  pexprs.Range.prototype.assertIteratedExprsAreNotNullable =\n  pexprs.Param.prototype.assertIteratedExprsAreNotNullable =\n  pexprs.UnicodeChar.prototype.assertIteratedExprsAreNotNullable =\n    function (grammar) {\n      // no-op\n    };\n\npexprs.Alt.prototype.assertIteratedExprsAreNotNullable = function (grammar) {\n  for (let idx = 0; idx < this.terms.length; idx++) {\n    this.terms[idx].assertIteratedExprsAreNotNullable(grammar);\n  }\n};\n\npexprs.Seq.prototype.assertIteratedExprsAreNotNullable = function (grammar) {\n  for (let idx = 0; idx < this.factors.length; idx++) {\n    this.factors[idx].assertIteratedExprsAreNotNullable(grammar);\n  }\n};\n\npexprs.Iter.prototype.assertIteratedExprsAreNotNullable = function (grammar) {\n  // Note: this is the implementation of this method for `Star` and `Plus` expressions.\n  // It is overridden for `Opt` below.\n  this.expr.assertIteratedExprsAreNotNullable(grammar);\n  if (this.expr.isNullable(grammar)) {\n    throw errors.kleeneExprHasNullableOperand(this, []);\n  }\n};\n\npexprs.Opt.prototype.assertIteratedExprsAreNotNullable =\n  pexprs.Not.prototype.assertIteratedExprsAreNotNullable =\n  pexprs.Lookahead.prototype.assertIteratedExprsAreNotNullable =\n  pexprs.Lex.prototype.assertIteratedExprsAreNotNullable =\n    function (grammar) {\n      this.expr.assertIteratedExprsAreNotNullable(grammar);\n    };\n\npexprs.Apply.prototype.assertIteratedExprsAreNotNullable = function (grammar) {\n  this.args.forEach(arg => {\n    arg.assertIteratedExprsAreNotNullable(grammar);\n  });\n};\n", "import * as common from './common.js';\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nexport class Node {\n  constructor(matchLength) {\n    this.matchLength = matchLength;\n  }\n\n  get ctorName() {\n    throw new Error('subclass responsibility');\n  }\n\n  numChildren() {\n    return this.children ? this.children.length : 0;\n  }\n\n  childAt(idx) {\n    if (this.children) {\n      return this.children[idx];\n    }\n  }\n\n  indexOfChild(arg) {\n    return this.children.indexOf(arg);\n  }\n\n  hasChildren() {\n    return this.numChildren() > 0;\n  }\n\n  hasNoChildren() {\n    return !this.hasChildren();\n  }\n\n  onlyChild() {\n    if (this.numChildren() !== 1) {\n      throw new Error(\n        'cannot get only child of a node of type ' +\n          this.ctorName +\n          ' (it has ' +\n          this.numChildren() +\n          ' children)'\n      );\n    } else {\n      return this.firstChild();\n    }\n  }\n\n  firstChild() {\n    if (this.hasNoChildren()) {\n      throw new Error(\n        'cannot get first child of a ' + this.ctorName + ' node, which has no children'\n      );\n    } else {\n      return this.childAt(0);\n    }\n  }\n\n  lastChild() {\n    if (this.hasNoChildren()) {\n      throw new Error(\n        'cannot get last child of a ' + this.ctorName + ' node, which has no children'\n      );\n    } else {\n      return this.childAt(this.numChildren() - 1);\n    }\n  }\n\n  childBefore(child) {\n    const childIdx = this.indexOfChild(child);\n    if (childIdx < 0) {\n      throw new Error('Node.childBefore() called w/ an argument that is not a child');\n    } else if (childIdx === 0) {\n      throw new Error('cannot get child before first child');\n    } else {\n      return this.childAt(childIdx - 1);\n    }\n  }\n\n  childAfter(child) {\n    const childIdx = this.indexOfChild(child);\n    if (childIdx < 0) {\n      throw new Error('Node.childAfter() called w/ an argument that is not a child');\n    } else if (childIdx === this.numChildren() - 1) {\n      throw new Error('cannot get child after last child');\n    } else {\n      return this.childAt(childIdx + 1);\n    }\n  }\n\n  isTerminal() {\n    return false;\n  }\n\n  isNonterminal() {\n    return false;\n  }\n\n  isIteration() {\n    return false;\n  }\n\n  isOptional() {\n    return false;\n  }\n}\n\n// Terminals\n\nexport class TerminalNode extends Node {\n  get ctorName() {\n    return '_terminal';\n  }\n\n  isTerminal() {\n    return true;\n  }\n\n  get primitiveValue() {\n    throw new Error('The `primitiveValue` property was removed in Ohm v17.');\n  }\n}\n\n// Nonterminals\n\nexport class NonterminalNode extends Node {\n  constructor(ruleName, children, childOffsets, matchLength) {\n    super(matchLength);\n    this.ruleName = ruleName;\n    this.children = children;\n    this.childOffsets = childOffsets;\n  }\n\n  get ctorName() {\n    return this.ruleName;\n  }\n\n  isNonterminal() {\n    return true;\n  }\n\n  isLexical() {\n    return common.isLexical(this.ctorName);\n  }\n\n  isSyntactic() {\n    return common.isSyntactic(this.ctorName);\n  }\n}\n\n// Iterations\n\nexport class IterationNode extends Node {\n  constructor(children, childOffsets, matchLength, isOptional) {\n    super(matchLength);\n    this.children = children;\n    this.childOffsets = childOffsets;\n    this.optional = isOptional;\n  }\n\n  get ctorName() {\n    return '_iter';\n  }\n\n  isIteration() {\n    return true;\n  }\n\n  isOptional() {\n    return this.optional;\n  }\n}\n", "import {Trace} from './Trace.js';\nimport * as common from './common.js';\nimport * as errors from './errors.js';\nimport {IterationNode, NonterminalNode, TerminalNode} from './nodes.js';\nimport * as pexprs from './pexprs-main.js';\nimport {MAX_CODE_POINT} from './InputStream.js';\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n/*\n  Evaluate the expression and return `true` if it succeeds, `false` otherwise. This method should\n  only be called directly by `State.prototype.eval(expr)`, which also updates the data structures\n  that are used for tracing. (Making those updates in a method of `State` enables the trace-specific\n  data structures to be \"secrets\" of that class, which is good for modularity.)\n\n  The contract of this method is as follows:\n  * When the return value is `true`,\n    - the state object will have `expr.getArity()` more bindings than it did before the call.\n  * When the return value is `false`,\n    - the state object may have more bindings than it did before the call, and\n    - its input stream's position may be anywhere.\n\n  Note that `State.prototype.eval(expr)`, unlike this method, guarantees that neither the state\n  object's bindings nor its input stream's position will change if the expression fails to match.\n*/\npexprs.PExpr.prototype.eval = common.abstract('eval'); // function(state) { ... }\n\npexprs.any.eval = function (state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  const cp = inputStream.nextCodePoint();\n  if (cp !== undefined) {\n    state.pushBinding(new TerminalNode(String.fromCodePoint(cp).length), origPos);\n    return true;\n  } else {\n    state.processFailure(origPos, this);\n    return false;\n  }\n};\n\npexprs.end.eval = function (state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  if (inputStream.atEnd()) {\n    state.pushBinding(new TerminalNode(0), origPos);\n    return true;\n  } else {\n    state.processFailure(origPos, this);\n    return false;\n  }\n};\n\npexprs.Terminal.prototype.eval = function (state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  if (!inputStream.matchString(this.obj)) {\n    state.processFailure(origPos, this);\n    return false;\n  } else {\n    state.pushBinding(new TerminalNode(this.obj.length), origPos);\n    return true;\n  }\n};\n\npexprs.Range.prototype.eval = function (state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n\n  // A range can operate in one of two modes: matching a single, 16-bit _code unit_,\n  // or matching a _code point_. (Code points over 0xFFFF take up two 16-bit code units.)\n  const cp = this.matchCodePoint ? inputStream.nextCodePoint() : inputStream.nextCharCode();\n\n  // Always compare by code point value to get the correct result in all scenarios.\n  // Note that for strings of length 1, codePointAt(0) and charPointAt(0) are equivalent.\n  if (cp !== undefined && this.from.codePointAt(0) <= cp && cp <= this.to.codePointAt(0)) {\n    state.pushBinding(new TerminalNode(String.fromCodePoint(cp).length), origPos);\n    return true;\n  } else {\n    state.processFailure(origPos, this);\n    return false;\n  }\n};\n\npexprs.Param.prototype.eval = function (state) {\n  return state.eval(state.currentApplication().args[this.index]);\n};\n\npexprs.Lex.prototype.eval = function (state) {\n  state.enterLexifiedContext();\n  const ans = state.eval(this.expr);\n  state.exitLexifiedContext();\n  return ans;\n};\n\npexprs.Alt.prototype.eval = function (state) {\n  for (let idx = 0; idx < this.terms.length; idx++) {\n    if (state.eval(this.terms[idx])) {\n      return true;\n    }\n  }\n  return false;\n};\n\npexprs.Seq.prototype.eval = function (state) {\n  for (let idx = 0; idx < this.factors.length; idx++) {\n    const factor = this.factors[idx];\n    if (!state.eval(factor)) {\n      return false;\n    }\n  }\n  return true;\n};\n\npexprs.Iter.prototype.eval = function (state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  const arity = this.getArity();\n  const cols = [];\n  const colOffsets = [];\n  while (cols.length < arity) {\n    cols.push([]);\n    colOffsets.push([]);\n  }\n\n  let numMatches = 0;\n  let prevPos = origPos;\n  let idx;\n  while (numMatches < this.maxNumMatches && state.eval(this.expr)) {\n    if (inputStream.pos === prevPos) {\n      throw errors.kleeneExprHasNullableOperand(this, state._applicationStack);\n    }\n    prevPos = inputStream.pos;\n    numMatches++;\n    const row = state._bindings.splice(state._bindings.length - arity, arity);\n    const rowOffsets = state._bindingOffsets.splice(\n      state._bindingOffsets.length - arity,\n      arity\n    );\n    for (idx = 0; idx < row.length; idx++) {\n      cols[idx].push(row[idx]);\n      colOffsets[idx].push(rowOffsets[idx]);\n    }\n  }\n  if (numMatches < this.minNumMatches) {\n    return false;\n  }\n  let offset = state.posToOffset(origPos);\n  let matchLength = 0;\n  if (numMatches > 0) {\n    const lastCol = cols[arity - 1];\n    const lastColOffsets = colOffsets[arity - 1];\n\n    const endOffset =\n      lastColOffsets[lastColOffsets.length - 1] + lastCol[lastCol.length - 1].matchLength;\n    offset = colOffsets[0][0];\n    matchLength = endOffset - offset;\n  }\n  const isOptional = this instanceof pexprs.Opt;\n  for (idx = 0; idx < cols.length; idx++) {\n    state._bindings.push(\n      new IterationNode(cols[idx], colOffsets[idx], matchLength, isOptional)\n    );\n    state._bindingOffsets.push(offset);\n  }\n  return true;\n};\n\npexprs.Not.prototype.eval = function (state) {\n  /*\n    TODO:\n    - Right now we're just throwing away all of the failures that happen inside a `not`, and\n      recording `this` as a failed expression.\n    - Double negation should be equivalent to lookahead, but that's not the case right now wrt\n      failures. E.g., ~~'foo' produces a failure for ~~'foo', but maybe it should produce\n      a failure for 'foo' instead.\n  */\n\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  state.pushFailuresInfo();\n\n  const ans = state.eval(this.expr);\n\n  state.popFailuresInfo();\n  if (ans) {\n    state.processFailure(origPos, this);\n    return false;\n  }\n\n  inputStream.pos = origPos;\n  return true;\n};\n\npexprs.Lookahead.prototype.eval = function (state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  if (state.eval(this.expr)) {\n    inputStream.pos = origPos;\n    return true;\n  } else {\n    return false;\n  }\n};\n\npexprs.Apply.prototype.eval = function (state) {\n  const caller = state.currentApplication();\n  const actuals = caller ? caller.args : [];\n  const app = this.substituteParams(actuals);\n\n  const posInfo = state.getCurrentPosInfo();\n  if (posInfo.isActive(app)) {\n    // This rule is already active at this position, i.e., it is left-recursive.\n    return app.handleCycle(state);\n  }\n\n  const memoKey = app.toMemoKey();\n  const memoRec = posInfo.memo[memoKey];\n\n  if (memoRec && posInfo.shouldUseMemoizedResult(memoRec)) {\n    if (state.hasNecessaryInfo(memoRec)) {\n      return state.useMemoizedResult(state.inputStream.pos, memoRec);\n    }\n    delete posInfo.memo[memoKey];\n  }\n  return app.reallyEval(state);\n};\n\npexprs.Apply.prototype.handleCycle = function (state) {\n  const posInfo = state.getCurrentPosInfo();\n  const {currentLeftRecursion} = posInfo;\n  const memoKey = this.toMemoKey();\n  let memoRec = posInfo.memo[memoKey];\n\n  if (currentLeftRecursion && currentLeftRecursion.headApplication.toMemoKey() === memoKey) {\n    // We already know about this left recursion, but it's possible there are \"involved\n    // applications\" that we don't already know about, so...\n    memoRec.updateInvolvedApplicationMemoKeys();\n  } else if (!memoRec) {\n    // New left recursion detected! Memoize a failure to try to get a seed parse.\n    memoRec = posInfo.memoize(memoKey, {\n      matchLength: 0,\n      examinedLength: 0,\n      value: false,\n      rightmostFailureOffset: -1,\n    });\n    posInfo.startLeftRecursion(this, memoRec);\n  }\n  return state.useMemoizedResult(state.inputStream.pos, memoRec);\n};\n\npexprs.Apply.prototype.reallyEval = function (state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  const origPosInfo = state.getCurrentPosInfo();\n  const ruleInfo = state.grammar.rules[this.ruleName];\n  const {body} = ruleInfo;\n  const {description} = ruleInfo;\n\n  state.enterApplication(origPosInfo, this);\n\n  if (description) {\n    state.pushFailuresInfo();\n  }\n\n  // Reset the input stream's examinedLength property so that we can track\n  // the examined length of this particular application.\n  const origInputStreamExaminedLength = inputStream.examinedLength;\n  inputStream.examinedLength = 0;\n\n  let value = this.evalOnce(body, state);\n  const currentLR = origPosInfo.currentLeftRecursion;\n  const memoKey = this.toMemoKey();\n  const isHeadOfLeftRecursion = currentLR && currentLR.headApplication.toMemoKey() === memoKey;\n  let memoRec;\n\n  if (state.doNotMemoize) {\n    state.doNotMemoize = false;\n  } else if (isHeadOfLeftRecursion) {\n    value = this.growSeedResult(body, state, origPos, currentLR, value);\n    origPosInfo.endLeftRecursion();\n    memoRec = currentLR;\n    memoRec.examinedLength = inputStream.examinedLength - origPos;\n    memoRec.rightmostFailureOffset = state._getRightmostFailureOffset();\n    origPosInfo.memoize(memoKey, memoRec); // updates origPosInfo's maxExaminedLength\n  } else if (!currentLR || !currentLR.isInvolved(memoKey)) {\n    // This application is not involved in left recursion, so it's ok to memoize it.\n    memoRec = origPosInfo.memoize(memoKey, {\n      matchLength: inputStream.pos - origPos,\n      examinedLength: inputStream.examinedLength - origPos,\n      value,\n      failuresAtRightmostPosition: state.cloneRecordedFailures(),\n      rightmostFailureOffset: state._getRightmostFailureOffset(),\n    });\n  }\n  const succeeded = !!value;\n\n  if (description) {\n    state.popFailuresInfo();\n    if (!succeeded) {\n      state.processFailure(origPos, this);\n    }\n    if (memoRec) {\n      memoRec.failuresAtRightmostPosition = state.cloneRecordedFailures();\n    }\n  }\n\n  // Record trace information in the memo table, so that it is available if the memoized result\n  // is used later.\n  if (state.isTracing() && memoRec) {\n    const entry = state.getTraceEntry(origPos, this, succeeded, succeeded ? [value] : []);\n    if (isHeadOfLeftRecursion) {\n      common.assert(entry.terminatingLREntry != null || !succeeded);\n      entry.isHeadOfLeftRecursion = true;\n    }\n    memoRec.traceEntry = entry;\n  }\n\n  // Fix the input stream's examinedLength -- it should be the maximum examined length\n  // across all applications, not just this one.\n  inputStream.examinedLength = Math.max(\n    inputStream.examinedLength,\n    origInputStreamExaminedLength\n  );\n\n  state.exitApplication(origPosInfo, value);\n\n  return succeeded;\n};\n\npexprs.Apply.prototype.evalOnce = function (expr, state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n\n  if (state.eval(expr)) {\n    const arity = expr.getArity();\n    const bindings = state._bindings.splice(state._bindings.length - arity, arity);\n    const offsets = state._bindingOffsets.splice(state._bindingOffsets.length - arity, arity);\n    const matchLength = inputStream.pos - origPos;\n    return new NonterminalNode(this.ruleName, bindings, offsets, matchLength);\n  } else {\n    return false;\n  }\n};\n\npexprs.Apply.prototype.growSeedResult = function (body, state, origPos, lrMemoRec, newValue) {\n  if (!newValue) {\n    return false;\n  }\n\n  const {inputStream} = state;\n\n  while (true) {\n    lrMemoRec.matchLength = inputStream.pos - origPos;\n    lrMemoRec.value = newValue;\n    lrMemoRec.failuresAtRightmostPosition = state.cloneRecordedFailures();\n\n    if (state.isTracing()) {\n      // Before evaluating the body again, add a trace node for this application to the memo entry.\n      // Its only child is a copy of the trace node from `newValue`, which will always be the last\n      // element in `state.trace`.\n      const seedTrace = state.trace[state.trace.length - 1];\n      lrMemoRec.traceEntry = new Trace(\n        state.input,\n        origPos,\n        inputStream.pos,\n        this,\n        true,\n        [newValue],\n        [seedTrace.clone()]\n      );\n    }\n    inputStream.pos = origPos;\n    newValue = this.evalOnce(body, state);\n    if (inputStream.pos - origPos <= lrMemoRec.matchLength) {\n      break;\n    }\n    if (state.isTracing()) {\n      state.trace.splice(-2, 1); // Drop the trace for the old seed.\n    }\n  }\n  if (state.isTracing()) {\n    // The last entry is for an unused result -- pop it and save it in the \"real\" entry.\n    lrMemoRec.traceEntry.recordLRTermination(state.trace.pop(), newValue);\n  }\n  inputStream.pos = origPos + lrMemoRec.matchLength;\n  return lrMemoRec.value;\n};\n\npexprs.UnicodeChar.prototype.eval = function (state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  const cp = inputStream.nextCodePoint();\n  if (cp !== undefined && cp <= MAX_CODE_POINT) {\n    const ch = String.fromCodePoint(cp);\n    if (this.pattern.test(ch)) {\n      state.pushBinding(new TerminalNode(ch.length), origPos);\n      return true;\n    }\n  }\n  state.processFailure(origPos, this);\n  return false;\n};\n", "import {abstract} from './common.js';\nimport * as pexprs from './pexprs-main.js';\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\npexprs.PExpr.prototype.getArity = abstract('getArity');\n\npexprs.any.getArity =\n  pexprs.end.getArity =\n  pexprs.Terminal.prototype.getArity =\n  pexprs.Range.prototype.getArity =\n  pexprs.Param.prototype.getArity =\n  pexprs.Apply.prototype.getArity =\n  pexprs.UnicodeChar.prototype.getArity =\n    function () {\n      return 1;\n    };\n\npexprs.Alt.prototype.getArity = function () {\n  // This is ok b/c all terms must have the same arity -- this property is\n  // checked by the Grammar constructor.\n  return this.terms.length === 0 ? 0 : this.terms[0].getArity();\n};\n\npexprs.Seq.prototype.getArity = function () {\n  let arity = 0;\n  for (let idx = 0; idx < this.factors.length; idx++) {\n    arity += this.factors[idx].getArity();\n  }\n  return arity;\n};\n\npexprs.Iter.prototype.getArity = function () {\n  return this.expr.getArity();\n};\n\npexprs.Not.prototype.getArity = function () {\n  return 0;\n};\n\npexprs.Lookahead.prototype.getArity = pexprs.Lex.prototype.getArity = function () {\n  return this.expr.getArity();\n};\n", "import {abstract} from './common.js';\nimport * as pexprs from './pexprs-main.js';\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nfunction getMetaInfo(expr, grammarInterval) {\n  const metaInfo = {};\n  if (expr.source && grammarInterval) {\n    const adjusted = expr.source.relativeTo(grammarInterval);\n    metaInfo.sourceInterval = [adjusted.startIdx, adjusted.endIdx];\n  }\n  return metaInfo;\n}\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\npexprs.PExpr.prototype.outputRecipe = abstract('outputRecipe');\n\npexprs.any.outputRecipe = function (formals, grammarInterval) {\n  return ['any', getMetaInfo(this, grammarInterval)];\n};\n\npexprs.end.outputRecipe = function (formals, grammarInterval) {\n  return ['end', getMetaInfo(this, grammarInterval)];\n};\n\npexprs.Terminal.prototype.outputRecipe = function (formals, grammarInterval) {\n  return ['terminal', getMetaInfo(this, grammarInterval), this.obj];\n};\n\npexprs.Range.prototype.outputRecipe = function (formals, grammarInterval) {\n  return ['range', getMetaInfo(this, grammarInterval), this.from, this.to];\n};\n\npexprs.Param.prototype.outputRecipe = function (formals, grammarInterval) {\n  return ['param', getMetaInfo(this, grammarInterval), this.index];\n};\n\npexprs.Alt.prototype.outputRecipe = function (formals, grammarInterval) {\n  return ['alt', getMetaInfo(this, grammarInterval)].concat(\n    this.terms.map(term => term.outputRecipe(formals, grammarInterval))\n  );\n};\n\npexprs.Extend.prototype.outputRecipe = function (formals, grammarInterval) {\n  const extension = this.terms[0]; // [extension, original]\n  return extension.outputRecipe(formals, grammarInterval);\n};\n\npexprs.Splice.prototype.outputRecipe = function (formals, grammarInterval) {\n  const beforeTerms = this.terms.slice(0, this.expansionPos);\n  const afterTerms = this.terms.slice(this.expansionPos + 1);\n  return [\n    'splice',\n    getMetaInfo(this, grammarInterval),\n    beforeTerms.map(term => term.outputRecipe(formals, grammarInterval)),\n    afterTerms.map(term => term.outputRecipe(formals, grammarInterval)),\n  ];\n};\n\npexprs.Seq.prototype.outputRecipe = function (formals, grammarInterval) {\n  return ['seq', getMetaInfo(this, grammarInterval)].concat(\n    this.factors.map(factor => factor.outputRecipe(formals, grammarInterval))\n  );\n};\n\npexprs.Star.prototype.outputRecipe =\n  pexprs.Plus.prototype.outputRecipe =\n  pexprs.Opt.prototype.outputRecipe =\n  pexprs.Not.prototype.outputRecipe =\n  pexprs.Lookahead.prototype.outputRecipe =\n  pexprs.Lex.prototype.outputRecipe =\n    function (formals, grammarInterval) {\n      return [\n        this.constructor.name.toLowerCase(),\n        getMetaInfo(this, grammarInterval),\n        this.expr.outputRecipe(formals, grammarInterval),\n      ];\n    };\n\npexprs.Apply.prototype.outputRecipe = function (formals, grammarInterval) {\n  return [\n    'app',\n    getMetaInfo(this, grammarInterval),\n    this.ruleName,\n    this.args.map(arg => arg.outputRecipe(formals, grammarInterval)),\n  ];\n};\n\npexprs.UnicodeChar.prototype.outputRecipe = function (formals, grammarInterval) {\n  return ['unicodeChar', getMetaInfo(this, grammarInterval), this.categoryOrProp];\n};\n", "import {abstract} from './common.js';\nimport * as pexprs from './pexprs-main.js';\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n/*\n  Called at grammar creation time to rewrite a rule body, replacing each reference to a formal\n  parameter with a `Param` node. Returns a PExpr -- either a new one, or the original one if\n  it was modified in place.\n*/\npexprs.PExpr.prototype.introduceParams = abstract('introduceParams');\n\npexprs.any.introduceParams =\n  pexprs.end.introduceParams =\n  pexprs.Terminal.prototype.introduceParams =\n  pexprs.Range.prototype.introduceParams =\n  pexprs.Param.prototype.introduceParams =\n  pexprs.UnicodeChar.prototype.introduceParams =\n    function (formals) {\n      return this;\n    };\n\npexprs.Alt.prototype.introduceParams = function (formals) {\n  this.terms.forEach((term, idx, terms) => {\n    terms[idx] = term.introduceParams(formals);\n  });\n  return this;\n};\n\npexprs.Seq.prototype.introduceParams = function (formals) {\n  this.factors.forEach((factor, idx, factors) => {\n    factors[idx] = factor.introduceParams(formals);\n  });\n  return this;\n};\n\npexprs.Iter.prototype.introduceParams =\n  pexprs.Not.prototype.introduceParams =\n  pexprs.Lookahead.prototype.introduceParams =\n  pexprs.Lex.prototype.introduceParams =\n    function (formals) {\n      this.expr = this.expr.introduceParams(formals);\n      return this;\n    };\n\npexprs.Apply.prototype.introduceParams = function (formals) {\n  const index = formals.indexOf(this.ruleName);\n  if (index >= 0) {\n    if (this.args.length > 0) {\n      // TODO: Should this be supported? See issue #64.\n      throw new Error('Parameterized rules cannot be passed as arguments to another rule.');\n    }\n    return new pexprs.Param(index).withSource(this.source);\n  } else {\n    this.args.forEach((arg, idx, args) => {\n      args[idx] = arg.introduceParams(formals);\n    });\n    return this;\n  }\n};\n", "import {abstract} from './common.js';\nimport * as pexprs from './pexprs-main.js';\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n// Returns `true` if this parsing expression may accept without consuming any input.\npexprs.PExpr.prototype.isNullable = function (grammar) {\n  return this._isNullable(grammar, Object.create(null));\n};\n\npexprs.PExpr.prototype._isNullable = abstract('_isNullable');\n\npexprs.any._isNullable =\n  pexprs.Range.prototype._isNullable =\n  pexprs.Param.prototype._isNullable =\n  pexprs.Plus.prototype._isNullable =\n  pexprs.UnicodeChar.prototype._isNullable =\n    function (grammar, memo) {\n      return false;\n    };\n\npexprs.end._isNullable = function (grammar, memo) {\n  return true;\n};\n\npexprs.Terminal.prototype._isNullable = function (grammar, memo) {\n  if (typeof this.obj === 'string') {\n    // This is an over-simplification: it's only correct if the input is a string. If it's an array\n    // or an object, then the empty string parsing expression is not nullable.\n    return this.obj === '';\n  } else {\n    return false;\n  }\n};\n\npexprs.Alt.prototype._isNullable = function (grammar, memo) {\n  return this.terms.length === 0 || this.terms.some(term => term._isNullable(grammar, memo));\n};\n\npexprs.Seq.prototype._isNullable = function (grammar, memo) {\n  return this.factors.every(factor => factor._isNullable(grammar, memo));\n};\n\npexprs.Star.prototype._isNullable =\n  pexprs.Opt.prototype._isNullable =\n  pexprs.Not.prototype._isNullable =\n  pexprs.Lookahead.prototype._isNullable =\n    function (grammar, memo) {\n      return true;\n    };\n\npexprs.Lex.prototype._isNullable = function (grammar, memo) {\n  return this.expr._isNullable(grammar, memo);\n};\n\npexprs.Apply.prototype._isNullable = function (grammar, memo) {\n  const key = this.toMemoKey();\n  if (!Object.prototype.hasOwnProperty.call(memo, key)) {\n    const {body} = grammar.rules[this.ruleName];\n    const inlined = body.substituteParams(this.args);\n    memo[key] = false; // Prevent infinite recursion for recursive rules.\n    memo[key] = inlined._isNullable(grammar, memo);\n  }\n  return memo[key];\n};\n", "import {abstract, checkNotNull} from './common.js';\nimport * as pexprs from './pexprs-main.js';\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n/*\n  Returns a PExpr that results from recursively replacing every formal parameter (i.e., instance\n  of `Param`) inside this PExpr with its actual value from `actuals` (an Array).\n\n  The receiver must not be modified; a new PExpr must be returned if any replacement is necessary.\n*/\n// function(actuals) { ... }\npexprs.PExpr.prototype.substituteParams = abstract('substituteParams');\n\npexprs.any.substituteParams =\n  pexprs.end.substituteParams =\n  pexprs.Terminal.prototype.substituteParams =\n  pexprs.Range.prototype.substituteParams =\n  pexprs.UnicodeChar.prototype.substituteParams =\n    function (actuals) {\n      return this;\n    };\n\npexprs.Param.prototype.substituteParams = function (actuals) {\n  return checkNotNull(actuals[this.index]);\n};\n\npexprs.Alt.prototype.substituteParams = function (actuals) {\n  return new pexprs.Alt(this.terms.map(term => term.substituteParams(actuals)));\n};\n\npexprs.Seq.prototype.substituteParams = function (actuals) {\n  return new pexprs.Seq(this.factors.map(factor => factor.substituteParams(actuals)));\n};\n\npexprs.Iter.prototype.substituteParams =\n  pexprs.Not.prototype.substituteParams =\n  pexprs.Lookahead.prototype.substituteParams =\n  pexprs.Lex.prototype.substituteParams =\n    function (actuals) {\n      return new this.constructor(this.expr.substituteParams(actuals));\n    };\n\npexprs.Apply.prototype.substituteParams = function (actuals) {\n  if (this.args.length === 0) {\n    // Avoid making a copy of this application, as an optimization\n    return this;\n  } else {\n    const args = this.args.map(arg => arg.substituteParams(actuals));\n    return new pexprs.Apply(this.ruleName, args);\n  }\n};\n", "import {abstract, copyWithoutDuplicates} from './common.js';\nimport * as pexprs from './pexprs-main.js';\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nfunction isRestrictedJSIdentifier(str) {\n  return /^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(str);\n}\n\nfunction resolveDuplicatedNames(argumentNameList) {\n  // `count` is used to record the number of times each argument name occurs in the list,\n  // this is useful for checking duplicated argument name. It maps argument names to ints.\n  const count = Object.create(null);\n  argumentNameList.forEach(argName => {\n    count[argName] = (count[argName] || 0) + 1;\n  });\n\n  // Append subscripts ('_1', '_2', ...) to duplicate argument names.\n  Object.keys(count).forEach(dupArgName => {\n    if (count[dupArgName] <= 1) {\n      return;\n    }\n\n    // This name shows up more than once, so add subscripts.\n    let subscript = 1;\n    argumentNameList.forEach((argName, idx) => {\n      if (argName === dupArgName) {\n        argumentNameList[idx] = argName + '_' + subscript++;\n      }\n    });\n  });\n}\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n/*\n  Returns a list of strings that will be used as the default argument names for its receiver\n  (a pexpr) in a semantic action. This is used exclusively by the Semantics Editor.\n\n  `firstArgIndex` is the 1-based index of the first argument name that will be generated for this\n  pexpr. It enables us to name arguments positionally, e.g., if the second argument is a\n  non-alphanumeric terminal like \"+\", it will be named '$2'.\n\n  `noDupCheck` is true if the caller of `toArgumentNameList` is not a top level caller. It enables\n  us to avoid nested duplication subscripts appending, e.g., '_1_1', '_1_2', by only checking\n  duplicates at the top level.\n\n  Here is a more elaborate example that illustrates how this method works:\n  `(a \"+\" b).toArgumentNameList(1)` evaluates to `['a', '$2', 'b']` with the following recursive\n  calls:\n\n    (a).toArgumentNameList(1) -> ['a'],\n    (\"+\").toArgumentNameList(2) -> ['$2'],\n    (b).toArgumentNameList(3) -> ['b']\n\n  Notes:\n  * This method must only be called on well-formed expressions, e.g., the receiver must\n    not have any Alt sub-expressions with inconsistent arities.\n  * e.getArity() === e.toArgumentNameList(1).length\n*/\n// function(firstArgIndex, noDupCheck) { ... }\npexprs.PExpr.prototype.toArgumentNameList = abstract('toArgumentNameList');\n\npexprs.any.toArgumentNameList = function (firstArgIndex, noDupCheck) {\n  return ['any'];\n};\n\npexprs.end.toArgumentNameList = function (firstArgIndex, noDupCheck) {\n  return ['end'];\n};\n\npexprs.Terminal.prototype.toArgumentNameList = function (firstArgIndex, noDupCheck) {\n  if (typeof this.obj === 'string' && /^[_a-zA-Z0-9]+$/.test(this.obj)) {\n    // If this terminal is a valid suffix for a JS identifier, just prepend it with '_'\n    return ['_' + this.obj];\n  } else {\n    // Otherwise, name it positionally.\n    return ['$' + firstArgIndex];\n  }\n};\n\npexprs.Range.prototype.toArgumentNameList = function (firstArgIndex, noDupCheck) {\n  let argName = this.from + '_to_' + this.to;\n  // If the `argName` is not valid then try to prepend a `_`.\n  if (!isRestrictedJSIdentifier(argName)) {\n    argName = '_' + argName;\n  }\n  // If the `argName` still not valid after prepending a `_`, then name it positionally.\n  if (!isRestrictedJSIdentifier(argName)) {\n    argName = '$' + firstArgIndex;\n  }\n  return [argName];\n};\n\npexprs.Alt.prototype.toArgumentNameList = function (firstArgIndex, noDupCheck) {\n  // `termArgNameLists` is an array of arrays where each row is the\n  // argument name list that corresponds to a term in this alternation.\n  const termArgNameLists = this.terms.map(term =>\n    term.toArgumentNameList(firstArgIndex, true)\n  );\n\n  const argumentNameList = [];\n  const numArgs = termArgNameLists[0].length;\n  for (let colIdx = 0; colIdx < numArgs; colIdx++) {\n    const col = [];\n    for (let rowIdx = 0; rowIdx < this.terms.length; rowIdx++) {\n      col.push(termArgNameLists[rowIdx][colIdx]);\n    }\n    const uniqueNames = copyWithoutDuplicates(col);\n    argumentNameList.push(uniqueNames.join('_or_'));\n  }\n\n  if (!noDupCheck) {\n    resolveDuplicatedNames(argumentNameList);\n  }\n  return argumentNameList;\n};\n\npexprs.Seq.prototype.toArgumentNameList = function (firstArgIndex, noDupCheck) {\n  // Generate the argument name list, without worrying about duplicates.\n  let argumentNameList = [];\n  this.factors.forEach(factor => {\n    const factorArgumentNameList = factor.toArgumentNameList(firstArgIndex, true);\n    argumentNameList = argumentNameList.concat(factorArgumentNameList);\n\n    // Shift the firstArgIndex to take this factor's argument names into account.\n    firstArgIndex += factorArgumentNameList.length;\n  });\n  if (!noDupCheck) {\n    resolveDuplicatedNames(argumentNameList);\n  }\n  return argumentNameList;\n};\n\npexprs.Iter.prototype.toArgumentNameList = function (firstArgIndex, noDupCheck) {\n  const argumentNameList = this.expr\n    .toArgumentNameList(firstArgIndex, noDupCheck)\n    .map(exprArgumentString =>\n      exprArgumentString[exprArgumentString.length - 1] === 's'\n        ? exprArgumentString + 'es'\n        : exprArgumentString + 's'\n    );\n  if (!noDupCheck) {\n    resolveDuplicatedNames(argumentNameList);\n  }\n  return argumentNameList;\n};\n\npexprs.Opt.prototype.toArgumentNameList = function (firstArgIndex, noDupCheck) {\n  return this.expr.toArgumentNameList(firstArgIndex, noDupCheck).map(argName => {\n    return 'opt' + argName[0].toUpperCase() + argName.slice(1);\n  });\n};\n\npexprs.Not.prototype.toArgumentNameList = function (firstArgIndex, noDupCheck) {\n  return [];\n};\n\npexprs.Lookahead.prototype.toArgumentNameList = pexprs.Lex.prototype.toArgumentNameList =\n  function (firstArgIndex, noDupCheck) {\n    return this.expr.toArgumentNameList(firstArgIndex, noDupCheck);\n  };\n\npexprs.Apply.prototype.toArgumentNameList = function (firstArgIndex, noDupCheck) {\n  return [this.ruleName];\n};\n\npexprs.UnicodeChar.prototype.toArgumentNameList = function (firstArgIndex, noDupCheck) {\n  return ['$' + firstArgIndex];\n};\n\npexprs.Param.prototype.toArgumentNameList = function (firstArgIndex, noDupCheck) {\n  return ['param' + this.index];\n};\n\n// \"Value pexprs\" (Value, Str, Arr, Obj) are going away soon, so we don't worry about them here.\n", "import {abstract} from './common.js';\nimport * as pexprs from './pexprs-main.js';\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n// Returns a string representing the PExpr, for use as a UI label, etc.\npexprs.PExpr.prototype.toDisplayString = abstract('toDisplayString');\n\npexprs.Alt.prototype.toDisplayString = pexprs.Seq.prototype.toDisplayString = function () {\n  if (this.source) {\n    return this.source.trimmed().contents;\n  }\n  return '[' + this.constructor.name + ']';\n};\n\npexprs.any.toDisplayString =\n  pexprs.end.toDisplayString =\n  pexprs.Iter.prototype.toDisplayString =\n  pexprs.Not.prototype.toDisplayString =\n  pexprs.Lookahead.prototype.toDisplayString =\n  pexprs.Lex.prototype.toDisplayString =\n  pexprs.Terminal.prototype.toDisplayString =\n  pexprs.Range.prototype.toDisplayString =\n  pexprs.Param.prototype.toDisplayString =\n    function () {\n      return this.toString();\n    };\n\npexprs.Apply.prototype.toDisplayString = function () {\n  if (this.args.length > 0) {\n    const ps = this.args.map(arg => arg.toDisplayString());\n    return this.ruleName + '<' + ps.join(',') + '>';\n  } else {\n    return this.ruleName;\n  }\n};\n\npexprs.UnicodeChar.prototype.toDisplayString = function () {\n  return 'Unicode [' + this.categoryOrProp + '] character';\n};\n", "// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\n/*\n  `Failure`s represent expressions that weren't matched while parsing. They are used to generate\n  error messages automatically. The interface of `Failure`s includes the collowing methods:\n\n  - getText() : String\n  - getType() : String  (one of {\"description\", \"string\", \"code\"})\n  - isDescription() : bool\n  - isStringTerminal() : bool\n  - isCode() : bool\n  - isFluffy() : bool\n  - makeFluffy() : void\n  - subsumes(Failure) : bool\n*/\n\nfunction isValidType(type) {\n  return type === 'description' || type === 'string' || type === 'code';\n}\n\nexport class Failure {\n  constructor(pexpr, text, type) {\n    if (!isValidType(type)) {\n      throw new Error('invalid Failure type: ' + type);\n    }\n    this.pexpr = pexpr;\n    this.text = text;\n    this.type = type;\n    this.fluffy = false;\n  }\n\n  getPExpr() {\n    return this.pexpr;\n  }\n\n  getText() {\n    return this.text;\n  }\n\n  getType() {\n    return this.type;\n  }\n\n  isDescription() {\n    return this.type === 'description';\n  }\n\n  isStringTerminal() {\n    return this.type === 'string';\n  }\n\n  isCode() {\n    return this.type === 'code';\n  }\n\n  isFluffy() {\n    return this.fluffy;\n  }\n\n  makeFluffy() {\n    this.fluffy = true;\n  }\n\n  clearFluffy() {\n    this.fluffy = false;\n  }\n\n  subsumes(that) {\n    return (\n      this.getText() === that.getText() &&\n      this.type === that.type &&\n      (!this.isFluffy() || (this.isFluffy() && that.isFluffy()))\n    );\n  }\n\n  toString() {\n    return this.type === 'string' ? JSON.stringify(this.getText()) : this.getText();\n  }\n\n  clone() {\n    const failure = new Failure(this.pexpr, this.text, this.type);\n    if (this.isFluffy()) {\n      failure.makeFluffy();\n    }\n    return failure;\n  }\n\n  toKey() {\n    return this.toString() + '#' + this.type;\n  }\n}\n", "import {abstract} from './common.js';\nimport * as pexprs from './pexprs-main.js';\nimport {Failure} from './Failure.js';\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\npexprs.PExpr.prototype.toFailure = abstract('toFailure');\n\npexprs.any.toFailure = function (grammar) {\n  return new Failure(this, 'any object', 'description');\n};\n\npexprs.end.toFailure = function (grammar) {\n  return new Failure(this, 'end of input', 'description');\n};\n\npexprs.Terminal.prototype.toFailure = function (grammar) {\n  return new Failure(this, this.obj, 'string');\n};\n\npexprs.Range.prototype.toFailure = function (grammar) {\n  // TODO: come up with something better\n  return new Failure(this, JSON.stringify(this.from) + '..' + JSON.stringify(this.to), 'code');\n};\n\npexprs.Not.prototype.toFailure = function (grammar) {\n  const description =\n    this.expr === pexprs.any ? 'nothing' : 'not ' + this.expr.toFailure(grammar);\n  return new Failure(this, description, 'description');\n};\n\npexprs.Lookahead.prototype.toFailure = function (grammar) {\n  return this.expr.toFailure(grammar);\n};\n\npexprs.Apply.prototype.toFailure = function (grammar) {\n  let {description} = grammar.rules[this.ruleName];\n  if (!description) {\n    const article = /^[aeiouAEIOU]/.test(this.ruleName) ? 'an' : 'a';\n    description = article + ' ' + this.ruleName;\n  }\n  return new Failure(this, description, 'description');\n};\n\npexprs.UnicodeChar.prototype.toFailure = function (grammar) {\n  return new Failure(this, 'a Unicode [' + this.categoryOrProp + '] character', 'description');\n};\n\npexprs.Alt.prototype.toFailure = function (grammar) {\n  const fs = this.terms.map(t => t.toFailure(grammar));\n  const description = '(' + fs.join(' or ') + ')';\n  return new Failure(this, description, 'description');\n};\n\npexprs.Seq.prototype.toFailure = function (grammar) {\n  const fs = this.factors.map(f => f.toFailure(grammar));\n  const description = '(' + fs.join(' ') + ')';\n  return new Failure(this, description, 'description');\n};\n\npexprs.Iter.prototype.toFailure = function (grammar) {\n  const description = '(' + this.expr.toFailure(grammar) + this.operator + ')';\n  return new Failure(this, description, 'description');\n};\n", "import {abstract} from './common.js';\nimport * as pexprs from './pexprs-main.js';\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n/*\n  e1.toString() === e2.toString() ==> e1 and e2 are semantically equivalent.\n  Note that this is not an iff (<==>): e.g.,\n  (~\"b\" \"a\").toString() !== (\"a\").toString(), even though\n  ~\"b\" \"a\" and \"a\" are interchangeable in any grammar,\n  both in terms of the languages they accept and their arities.\n*/\npexprs.PExpr.prototype.toString = abstract('toString');\n\npexprs.any.toString = function () {\n  return 'any';\n};\n\npexprs.end.toString = function () {\n  return 'end';\n};\n\npexprs.Terminal.prototype.toString = function () {\n  return JSON.stringify(this.obj);\n};\n\npexprs.Range.prototype.toString = function () {\n  return JSON.stringify(this.from) + '..' + JSON.stringify(this.to);\n};\n\npexprs.Param.prototype.toString = function () {\n  return '$' + this.index;\n};\n\npexprs.Lex.prototype.toString = function () {\n  return '#(' + this.expr.toString() + ')';\n};\n\npexprs.Alt.prototype.toString = function () {\n  return this.terms.length === 1\n    ? this.terms[0].toString()\n    : '(' + this.terms.map(term => term.toString()).join(' | ') + ')';\n};\n\npexprs.Seq.prototype.toString = function () {\n  return this.factors.length === 1\n    ? this.factors[0].toString()\n    : '(' + this.factors.map(factor => factor.toString()).join(' ') + ')';\n};\n\npexprs.Iter.prototype.toString = function () {\n  return this.expr + this.operator;\n};\n\npexprs.Not.prototype.toString = function () {\n  return '~' + this.expr;\n};\n\npexprs.Lookahead.prototype.toString = function () {\n  return '&' + this.expr;\n};\n\npexprs.Apply.prototype.toString = function () {\n  if (this.args.length > 0) {\n    const ps = this.args.map(arg => arg.toString());\n    return this.ruleName + '<' + ps.join(',') + '>';\n  } else {\n    return this.ruleName;\n  }\n};\n\npexprs.UnicodeChar.prototype.toString = function () {\n  return '\\\\p{' + this.categoryOrProp + '}';\n};\n", "import {Failure} from './Failure.js';\nimport {TerminalNode} from './nodes.js';\nimport {assert} from './common.js';\nimport {PExpr, Terminal} from './pexprs-main.js';\n\nexport class CaseInsensitiveTerminal extends PExpr {\n  constructor(param) {\n    super();\n    this.obj = param;\n  }\n\n  _getString(state) {\n    const terminal = state.currentApplication().args[this.obj.index];\n    assert(terminal instanceof Terminal, 'expected a Terminal expression');\n    return terminal.obj;\n  }\n\n  // Implementation of the PExpr API\n\n  allowsSkippingPrecedingSpace() {\n    return true;\n  }\n\n  eval(state) {\n    const {inputStream} = state;\n    const origPos = inputStream.pos;\n    const matchStr = this._getString(state);\n    if (!inputStream.matchString(matchStr, true)) {\n      state.processFailure(origPos, this);\n      return false;\n    } else {\n      state.pushBinding(new TerminalNode(matchStr.length), origPos);\n      return true;\n    }\n  }\n\n  getArity() {\n    return 1;\n  }\n\n  substituteParams(actuals) {\n    return new CaseInsensitiveTerminal(this.obj.substituteParams(actuals));\n  }\n\n  toDisplayString() {\n    return this.obj.toDisplayString() + ' (case-insensitive)';\n  }\n\n  toFailure(grammar) {\n    return new Failure(\n      this,\n      this.obj.toFailure(grammar) + ' (case-insensitive)',\n      'description'\n    );\n  }\n\n  _isNullable(grammar, memo) {\n    return this.obj._isNullable(grammar, memo);\n  }\n}\n", "import {InputStream} from './InputStream.js';\nimport {MatchResult} from './MatchResult.js';\nimport {PosInfo} from './PosInfo.js';\nimport {Trace} from './Trace.js';\nimport * as pexprs from './pexprs.js';\nimport * as util from './util.js';\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nlet builtInApplySyntacticBody;\n\nutil.awaitBuiltInRules(builtInRules => {\n  builtInApplySyntacticBody = builtInRules.rules.applySyntactic.body;\n});\n\nconst applySpaces = new pexprs.Apply('spaces');\n\nexport class MatchState {\n  constructor(matcher, startExpr, optPositionToRecordFailures) {\n    this.matcher = matcher;\n    this.startExpr = startExpr;\n\n    this.grammar = matcher.grammar;\n    this.input = matcher.getInput();\n    this.inputStream = new InputStream(this.input);\n    this.memoTable = matcher._memoTable;\n\n    this.userData = undefined;\n    this.doNotMemoize = false;\n\n    this._bindings = [];\n    this._bindingOffsets = [];\n    this._applicationStack = [];\n    this._posStack = [0];\n    this.inLexifiedContextStack = [false];\n\n    this.rightmostFailurePosition = -1;\n    this._rightmostFailurePositionStack = [];\n    this._recordedFailuresStack = [];\n\n    if (optPositionToRecordFailures !== undefined) {\n      this.positionToRecordFailures = optPositionToRecordFailures;\n      this.recordedFailures = Object.create(null);\n    }\n  }\n\n  posToOffset(pos) {\n    return pos - this._posStack[this._posStack.length - 1];\n  }\n\n  enterApplication(posInfo, app) {\n    this._posStack.push(this.inputStream.pos);\n    this._applicationStack.push(app);\n    this.inLexifiedContextStack.push(false);\n    posInfo.enter(app);\n    this._rightmostFailurePositionStack.push(this.rightmostFailurePosition);\n    this.rightmostFailurePosition = -1;\n  }\n\n  exitApplication(posInfo, optNode) {\n    const origPos = this._posStack.pop();\n    this._applicationStack.pop();\n    this.inLexifiedContextStack.pop();\n    posInfo.exit();\n\n    this.rightmostFailurePosition = Math.max(\n      this.rightmostFailurePosition,\n      this._rightmostFailurePositionStack.pop()\n    );\n\n    if (optNode) {\n      this.pushBinding(optNode, origPos);\n    }\n  }\n\n  enterLexifiedContext() {\n    this.inLexifiedContextStack.push(true);\n  }\n\n  exitLexifiedContext() {\n    this.inLexifiedContextStack.pop();\n  }\n\n  currentApplication() {\n    return this._applicationStack[this._applicationStack.length - 1];\n  }\n\n  inSyntacticContext() {\n    const currentApplication = this.currentApplication();\n    if (currentApplication) {\n      return currentApplication.isSyntactic() && !this.inLexifiedContext();\n    } else {\n      // The top-level context is syntactic if the start application is.\n      return this.startExpr.factors[0].isSyntactic();\n    }\n  }\n\n  inLexifiedContext() {\n    return this.inLexifiedContextStack[this.inLexifiedContextStack.length - 1];\n  }\n\n  skipSpaces() {\n    this.pushFailuresInfo();\n    this.eval(applySpaces);\n    this.popBinding();\n    this.popFailuresInfo();\n    return this.inputStream.pos;\n  }\n\n  skipSpacesIfInSyntacticContext() {\n    return this.inSyntacticContext() ? this.skipSpaces() : this.inputStream.pos;\n  }\n\n  maybeSkipSpacesBefore(expr) {\n    if (expr.allowsSkippingPrecedingSpace() && expr !== applySpaces) {\n      return this.skipSpacesIfInSyntacticContext();\n    } else {\n      return this.inputStream.pos;\n    }\n  }\n\n  pushBinding(node, origPos) {\n    this._bindings.push(node);\n    this._bindingOffsets.push(this.posToOffset(origPos));\n  }\n\n  popBinding() {\n    this._bindings.pop();\n    this._bindingOffsets.pop();\n  }\n\n  numBindings() {\n    return this._bindings.length;\n  }\n\n  truncateBindings(newLength) {\n    // Yes, this is this really faster than setting the `length` property (tested with\n    // bin/es5bench on Node v6.1.0).\n    // Update 2021-10-25: still true on v14.15.5 \u2014 it's ~20% speedup on es5bench.\n    while (this._bindings.length > newLength) {\n      this.popBinding();\n    }\n  }\n\n  getCurrentPosInfo() {\n    return this.getPosInfo(this.inputStream.pos);\n  }\n\n  getPosInfo(pos) {\n    let posInfo = this.memoTable[pos];\n    if (!posInfo) {\n      posInfo = this.memoTable[pos] = new PosInfo();\n    }\n    return posInfo;\n  }\n\n  processFailure(pos, expr) {\n    this.rightmostFailurePosition = Math.max(this.rightmostFailurePosition, pos);\n\n    if (this.recordedFailures && pos === this.positionToRecordFailures) {\n      const app = this.currentApplication();\n      if (app) {\n        // Substitute parameters with the actual pexprs that were passed to\n        // the current rule.\n        expr = expr.substituteParams(app.args);\n      } else {\n        // This branch is only reached for the \"end-check\" that is\n        // performed after the top-level application. In that case,\n        // expr === pexprs.end so there is no need to substitute\n        // parameters.\n      }\n\n      this.recordFailure(expr.toFailure(this.grammar), false);\n    }\n  }\n\n  recordFailure(failure, shouldCloneIfNew) {\n    const key = failure.toKey();\n    if (!this.recordedFailures[key]) {\n      this.recordedFailures[key] = shouldCloneIfNew ? failure.clone() : failure;\n    } else if (this.recordedFailures[key].isFluffy() && !failure.isFluffy()) {\n      this.recordedFailures[key].clearFluffy();\n    }\n  }\n\n  recordFailures(failures, shouldCloneIfNew) {\n    Object.keys(failures).forEach(key => {\n      this.recordFailure(failures[key], shouldCloneIfNew);\n    });\n  }\n\n  cloneRecordedFailures() {\n    if (!this.recordedFailures) {\n      return undefined;\n    }\n\n    const ans = Object.create(null);\n    Object.keys(this.recordedFailures).forEach(key => {\n      ans[key] = this.recordedFailures[key].clone();\n    });\n    return ans;\n  }\n\n  getRightmostFailurePosition() {\n    return this.rightmostFailurePosition;\n  }\n\n  _getRightmostFailureOffset() {\n    return this.rightmostFailurePosition >= 0\n      ? this.posToOffset(this.rightmostFailurePosition)\n      : -1;\n  }\n\n  // Returns the memoized trace entry for `expr` at `pos`, if one exists, `null` otherwise.\n  getMemoizedTraceEntry(pos, expr) {\n    const posInfo = this.memoTable[pos];\n    if (posInfo && expr instanceof pexprs.Apply) {\n      const memoRec = posInfo.memo[expr.toMemoKey()];\n      if (memoRec && memoRec.traceEntry) {\n        const entry = memoRec.traceEntry.cloneWithExpr(expr);\n        entry.isMemoized = true;\n        return entry;\n      }\n    }\n    return null;\n  }\n\n  // Returns a new trace entry, with the currently active trace array as its children.\n  getTraceEntry(pos, expr, succeeded, bindings) {\n    if (expr instanceof pexprs.Apply) {\n      const app = this.currentApplication();\n      const actuals = app ? app.args : [];\n      expr = expr.substituteParams(actuals);\n    }\n    return (\n      this.getMemoizedTraceEntry(pos, expr) ||\n      new Trace(this.input, pos, this.inputStream.pos, expr, succeeded, bindings, this.trace)\n    );\n  }\n\n  isTracing() {\n    return !!this.trace;\n  }\n\n  hasNecessaryInfo(memoRec) {\n    if (this.trace && !memoRec.traceEntry) {\n      return false;\n    }\n\n    if (\n      this.recordedFailures &&\n      this.inputStream.pos + memoRec.rightmostFailureOffset === this.positionToRecordFailures\n    ) {\n      return !!memoRec.failuresAtRightmostPosition;\n    }\n\n    return true;\n  }\n\n  useMemoizedResult(origPos, memoRec) {\n    if (this.trace) {\n      this.trace.push(memoRec.traceEntry);\n    }\n\n    const memoRecRightmostFailurePosition =\n      this.inputStream.pos + memoRec.rightmostFailureOffset;\n    this.rightmostFailurePosition = Math.max(\n      this.rightmostFailurePosition,\n      memoRecRightmostFailurePosition\n    );\n    if (\n      this.recordedFailures &&\n      this.positionToRecordFailures === memoRecRightmostFailurePosition &&\n      memoRec.failuresAtRightmostPosition\n    ) {\n      this.recordFailures(memoRec.failuresAtRightmostPosition, true);\n    }\n\n    this.inputStream.examinedLength = Math.max(\n      this.inputStream.examinedLength,\n      memoRec.examinedLength + origPos\n    );\n\n    if (memoRec.value) {\n      this.inputStream.pos += memoRec.matchLength;\n      this.pushBinding(memoRec.value, origPos);\n      return true;\n    }\n    return false;\n  }\n\n  // Evaluate `expr` and return `true` if it succeeded, `false` otherwise. On success, `bindings`\n  // will have `expr.getArity()` more elements than before, and the input stream's position may\n  // have increased. On failure, `bindings` and position will be unchanged.\n  eval(expr) {\n    const {inputStream} = this;\n    const origNumBindings = this._bindings.length;\n    const origUserData = this.userData;\n\n    let origRecordedFailures;\n    if (this.recordedFailures) {\n      origRecordedFailures = this.recordedFailures;\n      this.recordedFailures = Object.create(null);\n    }\n\n    const origPos = inputStream.pos;\n    const memoPos = this.maybeSkipSpacesBefore(expr);\n\n    let origTrace;\n    if (this.trace) {\n      origTrace = this.trace;\n      this.trace = [];\n    }\n\n    // Do the actual evaluation.\n    const ans = expr.eval(this);\n\n    if (this.trace) {\n      const bindings = this._bindings.slice(origNumBindings);\n      const traceEntry = this.getTraceEntry(memoPos, expr, ans, bindings);\n      traceEntry.isImplicitSpaces = expr === applySpaces;\n      traceEntry.isRootNode = expr === this.startExpr;\n      origTrace.push(traceEntry);\n      this.trace = origTrace;\n    }\n\n    if (ans) {\n      if (this.recordedFailures && inputStream.pos === this.positionToRecordFailures) {\n        Object.keys(this.recordedFailures).forEach(key => {\n          this.recordedFailures[key].makeFluffy();\n        });\n      }\n    } else {\n      // Reset the position, bindings, and userData.\n      inputStream.pos = origPos;\n      this.truncateBindings(origNumBindings);\n      this.userData = origUserData;\n    }\n\n    if (this.recordedFailures) {\n      this.recordFailures(origRecordedFailures, false);\n    }\n\n    // The built-in applySyntactic rule needs special handling: we want to skip\n    // trailing spaces, just as with the top-level application of a syntactic rule.\n    if (expr === builtInApplySyntacticBody) {\n      this.skipSpaces();\n    }\n\n    return ans;\n  }\n\n  getMatchResult() {\n    this.grammar._setUpMatchState(this);\n    this.eval(this.startExpr);\n    let rightmostFailures;\n    if (this.recordedFailures) {\n      rightmostFailures = Object.keys(this.recordedFailures).map(\n        key => this.recordedFailures[key]\n      );\n    }\n    const cst = this._bindings[0];\n    if (cst) {\n      cst.grammar = this.grammar;\n    }\n    return new MatchResult(\n      this.matcher,\n      this.input,\n      this.startExpr,\n      cst,\n      this._bindingOffsets[0],\n      this.rightmostFailurePosition,\n      rightmostFailures\n    );\n  }\n\n  getTrace() {\n    this.trace = [];\n    const matchResult = this.getMatchResult();\n\n    // The trace node for the start rule is always the last entry. If it is a syntactic rule,\n    // the first entry is for an application of 'spaces'.\n    // TODO(pdubroy): Clean this up by introducing a special `Match<startAppl>` rule, which will\n    // ensure that there is always a single root trace node.\n    const rootTrace = this.trace[this.trace.length - 1];\n    rootTrace.result = matchResult;\n    return rootTrace;\n  }\n\n  pushFailuresInfo() {\n    this._rightmostFailurePositionStack.push(this.rightmostFailurePosition);\n    this._recordedFailuresStack.push(this.recordedFailures);\n  }\n\n  popFailuresInfo() {\n    this.rightmostFailurePosition = this._rightmostFailurePositionStack.pop();\n    this.recordedFailures = this._recordedFailuresStack.pop();\n  }\n}\n", "import {grammarDoesNotSupportIncrementalParsing} from './errors.js';\nimport {MatchState} from './MatchState.js';\nimport * as pexprs from './pexprs.js';\n\nexport class Matcher {\n  constructor(grammar) {\n    this.grammar = grammar;\n    this._memoTable = [];\n    this._input = '';\n    this._isMemoTableStale = false;\n  }\n\n  _resetMemoTable() {\n    this._memoTable = [];\n    this._isMemoTableStale = false;\n  }\n\n  getInput() {\n    return this._input;\n  }\n\n  setInput(str) {\n    if (this._input !== str) {\n      this.replaceInputRange(0, this._input.length, str);\n    }\n    return this;\n  }\n\n  replaceInputRange(startIdx, endIdx, str) {\n    const prevInput = this._input;\n    const memoTable = this._memoTable;\n    if (\n      startIdx < 0 ||\n      startIdx > prevInput.length ||\n      endIdx < 0 ||\n      endIdx > prevInput.length ||\n      startIdx > endIdx\n    ) {\n      throw new Error('Invalid indices: ' + startIdx + ' and ' + endIdx);\n    }\n\n    // update input\n    this._input = prevInput.slice(0, startIdx) + str + prevInput.slice(endIdx);\n    if (this._input !== prevInput && memoTable.length > 0) {\n      this._isMemoTableStale = true;\n    }\n\n    // update memo table (similar to the above)\n    const restOfMemoTable = memoTable.slice(endIdx);\n    memoTable.length = startIdx;\n    for (let idx = 0; idx < str.length; idx++) {\n      memoTable.push(undefined);\n    }\n    for (const posInfo of restOfMemoTable) {\n      memoTable.push(posInfo);\n    }\n\n    // Invalidate memoRecs\n    for (let pos = 0; pos < startIdx; pos++) {\n      const posInfo = memoTable[pos];\n      if (posInfo) {\n        posInfo.clearObsoleteEntries(pos, startIdx);\n      }\n    }\n\n    return this;\n  }\n\n  match(optStartApplicationStr, options = {incremental: true}) {\n    return this._match(this._getStartExpr(optStartApplicationStr), {\n      incremental: options.incremental,\n      tracing: false,\n    });\n  }\n\n  trace(optStartApplicationStr, options = {incremental: true}) {\n    return this._match(this._getStartExpr(optStartApplicationStr), {\n      incremental: options.incremental,\n      tracing: true,\n    });\n  }\n\n  _match(startExpr, options = {}) {\n    const opts = {\n      tracing: false,\n      incremental: true,\n      positionToRecordFailures: undefined,\n      ...options,\n    };\n    if (!opts.incremental) {\n      this._resetMemoTable();\n    } else if (this._isMemoTableStale && !this.grammar.supportsIncrementalParsing) {\n      throw grammarDoesNotSupportIncrementalParsing(this.grammar);\n    }\n\n    const state = new MatchState(this, startExpr, opts.positionToRecordFailures);\n    return opts.tracing ? state.getTrace() : state.getMatchResult();\n  }\n\n  /*\n    Returns the starting expression for this Matcher's associated grammar. If\n    `optStartApplicationStr` is specified, it is a string expressing a rule application in the\n    grammar. If not specified, the grammar's default start rule will be used.\n  */\n  _getStartExpr(optStartApplicationStr) {\n    const applicationStr = optStartApplicationStr || this.grammar.defaultStartRule;\n    if (!applicationStr) {\n      throw new Error('Missing start rule argument -- the grammar has no default start rule.');\n    }\n\n    const startApp = this.grammar.parseApplication(applicationStr);\n    return new pexprs.Seq([startApp, pexprs.end]);\n  }\n}\n", "import {InputStream} from './InputStream.js';\nimport {IterationNode} from './nodes.js';\nimport {MatchResult} from './MatchResult.js';\nimport * as common from './common.js';\nimport * as errors from './errors.js';\nimport * as util from './util.js';\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nconst globalActionStack = [];\n\nconst hasOwnProperty = (x, prop) => Object.prototype.hasOwnProperty.call(x, prop);\n\n// ----------------- Wrappers -----------------\n\n// Wrappers decorate CST nodes with all of the functionality (i.e., operations and attributes)\n// provided by a Semantics (see below). `Wrapper` is the abstract superclass of all wrappers. A\n// `Wrapper` must have `_node` and `_semantics` instance variables, which refer to the CST node and\n// Semantics (resp.) for which it was created, and a `_childWrappers` instance variable which is\n// used to cache the wrapper instances that are created for its child nodes. Setting these instance\n// variables is the responsibility of the constructor of each Semantics-specific subclass of\n// `Wrapper`.\nclass Wrapper {\n  constructor(node, sourceInterval, baseInterval) {\n    this._node = node;\n    this.source = sourceInterval;\n\n    // The interval that the childOffsets of `node` are relative to. It should be the source\n    // of the closest Nonterminal node.\n    this._baseInterval = baseInterval;\n\n    if (node.isNonterminal()) {\n      common.assert(sourceInterval === baseInterval);\n    }\n    this._childWrappers = [];\n  }\n\n  _forgetMemoizedResultFor(attributeName) {\n    // Remove the memoized attribute from the cstNode and all its children.\n    delete this._node[this._semantics.attributeKeys[attributeName]];\n    this.children.forEach(child => {\n      child._forgetMemoizedResultFor(attributeName);\n    });\n  }\n\n  // Returns the wrapper of the specified child node. Child wrappers are created lazily and\n  // cached in the parent wrapper's `_childWrappers` instance variable.\n  child(idx) {\n    if (!(0 <= idx && idx < this._node.numChildren())) {\n      // TODO: Consider throwing an exception here.\n      return undefined;\n    }\n    let childWrapper = this._childWrappers[idx];\n    if (!childWrapper) {\n      const childNode = this._node.childAt(idx);\n      const offset = this._node.childOffsets[idx];\n\n      const source = this._baseInterval.subInterval(offset, childNode.matchLength);\n      const base = childNode.isNonterminal() ? source : this._baseInterval;\n      childWrapper = this._childWrappers[idx] = this._semantics.wrap(childNode, source, base);\n    }\n    return childWrapper;\n  }\n\n  // Returns an array containing the wrappers of all of the children of the node associated\n  // with this wrapper.\n  _children() {\n    // Force the creation of all child wrappers\n    for (let idx = 0; idx < this._node.numChildren(); idx++) {\n      this.child(idx);\n    }\n    return this._childWrappers;\n  }\n\n  // Returns `true` if the CST node associated with this wrapper corresponds to an iteration\n  // expression, i.e., a Kleene-*, Kleene-+, or an optional. Returns `false` otherwise.\n  isIteration() {\n    return this._node.isIteration();\n  }\n\n  // Returns `true` if the CST node associated with this wrapper is a terminal node, `false`\n  // otherwise.\n  isTerminal() {\n    return this._node.isTerminal();\n  }\n\n  // Returns `true` if the CST node associated with this wrapper is a nonterminal node, `false`\n  // otherwise.\n  isNonterminal() {\n    return this._node.isNonterminal();\n  }\n\n  // Returns `true` if the CST node associated with this wrapper is a nonterminal node\n  // corresponding to a syntactic rule, `false` otherwise.\n  isSyntactic() {\n    return this.isNonterminal() && this._node.isSyntactic();\n  }\n\n  // Returns `true` if the CST node associated with this wrapper is a nonterminal node\n  // corresponding to a lexical rule, `false` otherwise.\n  isLexical() {\n    return this.isNonterminal() && this._node.isLexical();\n  }\n\n  // Returns `true` if the CST node associated with this wrapper is an iterator node\n  // having either one or no child (? operator), `false` otherwise.\n  // Otherwise, throws an exception.\n  isOptional() {\n    return this._node.isOptional();\n  }\n\n  // Create a new _iter wrapper in the same semantics as this wrapper.\n  iteration(optChildWrappers) {\n    const childWrappers = optChildWrappers || [];\n\n    const childNodes = childWrappers.map(c => c._node);\n    const iter = new IterationNode(childNodes, [], -1, false);\n\n    const wrapper = this._semantics.wrap(iter, null, null);\n    wrapper._childWrappers = childWrappers;\n    return wrapper;\n  }\n\n  // Returns an array containing the children of this CST node.\n  get children() {\n    return this._children();\n  }\n\n  // Returns the name of grammar rule that created this CST node.\n  get ctorName() {\n    return this._node.ctorName;\n  }\n\n  // Returns the number of children of this CST node.\n  get numChildren() {\n    return this._node.numChildren();\n  }\n\n  // Returns the contents of the input stream consumed by this CST node.\n  get sourceString() {\n    return this.source.contents;\n  }\n}\n\n// ----------------- Semantics -----------------\n\n// A Semantics is a container for a family of Operations and Attributes for a given grammar.\n// Semantics enable modularity (different clients of a grammar can create their set of operations\n// and attributes in isolation) and extensibility even when operations and attributes are mutually-\n// recursive. This constructor should not be called directly except from\n// `Semantics.createSemantics`. The normal ways to create a Semantics, given a grammar 'g', are\n// `g.createSemantics()` and `g.extendSemantics(parentSemantics)`.\nexport class Semantics {\n  constructor(grammar, superSemantics) {\n    const self = this;\n    this.grammar = grammar;\n    this.checkedActionDicts = false;\n\n    // Constructor for wrapper instances, which are passed as the arguments to the semantic actions\n    // of an operation or attribute. Operations and attributes require double dispatch: the semantic\n    // action is chosen based on both the node's type and the semantics. Wrappers ensure that\n    // the `execute` method is called with the correct (most specific) semantics object as an\n    // argument.\n    this.Wrapper = class extends (superSemantics ? superSemantics.Wrapper : Wrapper) {\n      constructor(node, sourceInterval, baseInterval) {\n        super(node, sourceInterval, baseInterval);\n        self.checkActionDictsIfHaventAlready();\n        this._semantics = self;\n      }\n\n      toString() {\n        return '[semantics wrapper for ' + self.grammar.name + ']';\n      }\n    };\n\n    this.super = superSemantics;\n    if (superSemantics) {\n      if (!(grammar.equals(this.super.grammar) || grammar._inheritsFrom(this.super.grammar))) {\n        throw new Error(\n          \"Cannot extend a semantics for grammar '\" +\n            this.super.grammar.name +\n            \"' for use with grammar '\" +\n            grammar.name +\n            \"' (not a sub-grammar)\"\n        );\n      }\n      this.operations = Object.create(this.super.operations);\n      this.attributes = Object.create(this.super.attributes);\n      this.attributeKeys = Object.create(null);\n\n      // Assign unique symbols for each of the attributes inherited from the super-semantics so that\n      // they are memoized independently.\n\n      for (const attributeName in this.attributes) {\n        Object.defineProperty(this.attributeKeys, attributeName, {\n          value: util.uniqueId(attributeName),\n        });\n      }\n    } else {\n      this.operations = Object.create(null);\n      this.attributes = Object.create(null);\n      this.attributeKeys = Object.create(null);\n    }\n  }\n\n  toString() {\n    return '[semantics for ' + this.grammar.name + ']';\n  }\n\n  checkActionDictsIfHaventAlready() {\n    if (!this.checkedActionDicts) {\n      this.checkActionDicts();\n      this.checkedActionDicts = true;\n    }\n  }\n\n  // Checks that the action dictionaries for all operations and attributes in this semantics,\n  // including the ones that were inherited from the super-semantics, agree with the grammar.\n  // Throws an exception if one or more of them doesn't.\n  checkActionDicts() {\n    let name;\n\n    for (name in this.operations) {\n      this.operations[name].checkActionDict(this.grammar);\n    }\n\n    for (name in this.attributes) {\n      this.attributes[name].checkActionDict(this.grammar);\n    }\n  }\n\n  toRecipe(semanticsOnly) {\n    function hasSuperSemantics(s) {\n      return s.super !== Semantics.BuiltInSemantics._getSemantics();\n    }\n\n    let str = '(function(g) {\\n';\n    if (hasSuperSemantics(this)) {\n      str += '  var semantics = ' + this.super.toRecipe(true) + '(g';\n\n      const superSemanticsGrammar = this.super.grammar;\n      let relatedGrammar = this.grammar;\n      while (relatedGrammar !== superSemanticsGrammar) {\n        str += '.superGrammar';\n        relatedGrammar = relatedGrammar.superGrammar;\n      }\n\n      str += ');\\n';\n      str += '  return g.extendSemantics(semantics)';\n    } else {\n      str += '  return g.createSemantics()';\n    }\n    ['Operation', 'Attribute'].forEach(type => {\n      const semanticOperations = this[type.toLowerCase() + 's'];\n      Object.keys(semanticOperations).forEach(name => {\n        const {actionDict, formals, builtInDefault} = semanticOperations[name];\n\n        let signature = name;\n        if (formals.length > 0) {\n          signature += '(' + formals.join(', ') + ')';\n        }\n\n        let method;\n        if (hasSuperSemantics(this) && this.super[type.toLowerCase() + 's'][name]) {\n          method = 'extend' + type;\n        } else {\n          method = 'add' + type;\n        }\n        str += '\\n    .' + method + '(' + JSON.stringify(signature) + ', {';\n\n        const srcArray = [];\n        Object.keys(actionDict).forEach(actionName => {\n          if (actionDict[actionName] !== builtInDefault) {\n            let source = actionDict[actionName].toString().trim();\n\n            // Convert method shorthand to plain old function syntax.\n            // https://github.com/ohmjs/ohm/issues/263\n            source = source.replace(/^.*\\(/, 'function(');\n\n            srcArray.push('\\n      ' + JSON.stringify(actionName) + ': ' + source);\n          }\n        });\n        str += srcArray.join(',') + '\\n    })';\n      });\n    });\n    str += ';\\n  })';\n\n    if (!semanticsOnly) {\n      str =\n        '(function() {\\n' +\n        '  var grammar = this.fromRecipe(' +\n        this.grammar.toRecipe() +\n        ');\\n' +\n        '  var semantics = ' +\n        str +\n        '(grammar);\\n' +\n        '  return semantics;\\n' +\n        '});\\n';\n    }\n\n    return str;\n  }\n\n  addOperationOrAttribute(type, signature, actionDict) {\n    const typePlural = type + 's';\n\n    const parsedNameAndFormalArgs = parseSignature(signature, type);\n    const {name} = parsedNameAndFormalArgs;\n    const {formals} = parsedNameAndFormalArgs;\n\n    // TODO: check that there are no duplicate formal arguments\n\n    this.assertNewName(name, type);\n\n    // Create the action dictionary for this operation / attribute that contains a `_default` action\n    // which defines the default behavior of iteration, terminal, and non-terminal nodes...\n    const builtInDefault = newDefaultAction(type, name, doIt);\n    const realActionDict = {_default: builtInDefault};\n    // ... and add in the actions supplied by the programmer, which may override some or all of the\n    // default ones.\n    Object.keys(actionDict).forEach(name => {\n      realActionDict[name] = actionDict[name];\n    });\n\n    const entry =\n      type === 'operation'\n        ? new Operation(name, formals, realActionDict, builtInDefault)\n        : new Attribute(name, realActionDict, builtInDefault);\n\n    // The following check is not strictly necessary (it will happen later anyway) but it's better\n    // to catch errors early.\n    entry.checkActionDict(this.grammar);\n\n    this[typePlural][name] = entry;\n\n    function doIt(...args) {\n      // Dispatch to most specific version of this operation / attribute -- it may have been\n      // overridden by a sub-semantics.\n      const thisThing = this._semantics[typePlural][name];\n\n      // Check that the caller passed the correct number of arguments.\n      if (arguments.length !== thisThing.formals.length) {\n        throw new Error(\n          'Invalid number of arguments passed to ' +\n            name +\n            ' ' +\n            type +\n            ' (expected ' +\n            thisThing.formals.length +\n            ', got ' +\n            arguments.length +\n            ')'\n        );\n      }\n\n      // Create an \"arguments object\" from the arguments that were passed to this\n      // operation / attribute.\n      const argsObj = Object.create(null);\n      for (const [idx, val] of Object.entries(args)) {\n        const formal = thisThing.formals[idx];\n        argsObj[formal] = val;\n      }\n\n      const oldArgs = this.args;\n      this.args = argsObj;\n      const ans = thisThing.execute(this._semantics, this);\n      this.args = oldArgs;\n      return ans;\n    }\n\n    if (type === 'operation') {\n      this.Wrapper.prototype[name] = doIt;\n      this.Wrapper.prototype[name].toString = function () {\n        return '[' + name + ' operation]';\n      };\n    } else {\n      Object.defineProperty(this.Wrapper.prototype, name, {\n        get: doIt,\n        configurable: true, // So the property can be deleted.\n      });\n      Object.defineProperty(this.attributeKeys, name, {\n        value: util.uniqueId(name),\n      });\n    }\n  }\n\n  extendOperationOrAttribute(type, name, actionDict) {\n    const typePlural = type + 's';\n\n    // Make sure that `name` really is just a name, i.e., that it doesn't also contain formals.\n    parseSignature(name, 'attribute');\n\n    if (!(this.super && name in this.super[typePlural])) {\n      throw new Error(\n        'Cannot extend ' +\n          type +\n          \" '\" +\n          name +\n          \"': did not inherit an \" +\n          type +\n          ' with that name'\n      );\n    }\n    if (hasOwnProperty(this[typePlural], name)) {\n      throw new Error('Cannot extend ' + type + \" '\" + name + \"' again\");\n    }\n\n    // Create a new operation / attribute whose actionDict delegates to the super operation /\n    // attribute's actionDict, and which has all the keys from `inheritedActionDict`.\n    const inheritedFormals = this[typePlural][name].formals;\n    const inheritedActionDict = this[typePlural][name].actionDict;\n    const newActionDict = Object.create(inheritedActionDict);\n    Object.keys(actionDict).forEach(name => {\n      newActionDict[name] = actionDict[name];\n    });\n\n    this[typePlural][name] =\n      type === 'operation'\n        ? new Operation(name, inheritedFormals, newActionDict)\n        : new Attribute(name, newActionDict);\n\n    // The following check is not strictly necessary (it will happen later anyway) but it's better\n    // to catch errors early.\n    this[typePlural][name].checkActionDict(this.grammar);\n  }\n\n  assertNewName(name, type) {\n    if (hasOwnProperty(Wrapper.prototype, name)) {\n      throw new Error('Cannot add ' + type + \" '\" + name + \"': that's a reserved name\");\n    }\n    if (name in this.operations) {\n      throw new Error(\n        'Cannot add ' + type + \" '\" + name + \"': an operation with that name already exists\"\n      );\n    }\n    if (name in this.attributes) {\n      throw new Error(\n        'Cannot add ' + type + \" '\" + name + \"': an attribute with that name already exists\"\n      );\n    }\n  }\n\n  // Returns a wrapper for the given CST `node` in this semantics.\n  // If `node` is already a wrapper, returns `node` itself.  // TODO: why is this needed?\n  wrap(node, source, optBaseInterval) {\n    const baseInterval = optBaseInterval || source;\n    return node instanceof this.Wrapper ? node : new this.Wrapper(node, source, baseInterval);\n  }\n}\n\nfunction parseSignature(signature, type) {\n  if (!Semantics.prototypeGrammar) {\n    // The Operations and Attributes grammar won't be available while Ohm is loading,\n    // but we can get away the following simplification b/c none of the operations\n    // that are used while loading take arguments.\n    common.assert(signature.indexOf('(') === -1);\n    return {\n      name: signature,\n      formals: [],\n    };\n  }\n\n  const r = Semantics.prototypeGrammar.match(\n    signature,\n    type === 'operation' ? 'OperationSignature' : 'AttributeSignature'\n  );\n  if (r.failed()) {\n    throw new Error(r.message);\n  }\n\n  return Semantics.prototypeGrammarSemantics(r).parse();\n}\n\nfunction newDefaultAction(type, name, doIt) {\n  return function (...children) {\n    const thisThing = this._semantics.operations[name] || this._semantics.attributes[name];\n    const args = thisThing.formals.map(formal => this.args[formal]);\n\n    if (!this.isIteration() && children.length === 1) {\n      // This CST node corresponds to a non-terminal in the grammar (e.g., AddExpr). The fact that\n      // we got here means that this action dictionary doesn't have an action for this particular\n      // non-terminal or a generic `_nonterminal` action.\n      // As a convenience, if this node only has one child, we just return the result of applying\n      // this operation / attribute to the child node.\n      return doIt.apply(children[0], args);\n    } else {\n      // Otherwise, we throw an exception to let the programmer know that we don't know what\n      // to do with this node.\n      throw errors.missingSemanticAction(this.ctorName, name, type, globalActionStack);\n    }\n  };\n}\n\n// Creates a new Semantics instance for `grammar`, inheriting operations and attributes from\n// `optSuperSemantics`, if it is specified. Returns a function that acts as a proxy for the new\n// Semantics instance. When that function is invoked with a CST node as an argument, it returns\n// a wrapper for that node which gives access to the operations and attributes provided by this\n// semantics.\nSemantics.createSemantics = function (grammar, optSuperSemantics) {\n  const s = new Semantics(\n    grammar,\n    optSuperSemantics !== undefined\n      ? optSuperSemantics\n      : Semantics.BuiltInSemantics._getSemantics()\n  );\n\n  // To enable clients to invoke a semantics like a function, return a function that acts as a proxy\n  // for `s`, which is the real `Semantics` instance.\n  const proxy = function ASemantics(matchResult) {\n    if (!(matchResult instanceof MatchResult)) {\n      throw new TypeError(\n        'Semantics expected a MatchResult, but got ' +\n          common.unexpectedObjToString(matchResult)\n      );\n    }\n    if (matchResult.failed()) {\n      throw new TypeError('cannot apply Semantics to ' + matchResult.toString());\n    }\n\n    const cst = matchResult._cst;\n    if (cst.grammar !== grammar) {\n      throw new Error(\n        \"Cannot use a MatchResult from grammar '\" +\n          cst.grammar.name +\n          \"' with a semantics for '\" +\n          grammar.name +\n          \"'\"\n      );\n    }\n    const inputStream = new InputStream(matchResult.input);\n    return s.wrap(cst, inputStream.interval(matchResult._cstOffset, matchResult.input.length));\n  };\n\n  // Forward public methods from the proxy to the semantics instance.\n  proxy.addOperation = function (signature, actionDict) {\n    s.addOperationOrAttribute('operation', signature, actionDict);\n    return proxy;\n  };\n  proxy.extendOperation = function (name, actionDict) {\n    s.extendOperationOrAttribute('operation', name, actionDict);\n    return proxy;\n  };\n  proxy.addAttribute = function (name, actionDict) {\n    s.addOperationOrAttribute('attribute', name, actionDict);\n    return proxy;\n  };\n  proxy.extendAttribute = function (name, actionDict) {\n    s.extendOperationOrAttribute('attribute', name, actionDict);\n    return proxy;\n  };\n  proxy._getActionDict = function (operationOrAttributeName) {\n    const action =\n      s.operations[operationOrAttributeName] || s.attributes[operationOrAttributeName];\n    if (!action) {\n      throw new Error(\n        '\"' +\n          operationOrAttributeName +\n          '\" is not a valid operation or attribute ' +\n          'name in this semantics for \"' +\n          grammar.name +\n          '\"'\n      );\n    }\n    return action.actionDict;\n  };\n  proxy._remove = function (operationOrAttributeName) {\n    let semantic;\n    if (operationOrAttributeName in s.operations) {\n      semantic = s.operations[operationOrAttributeName];\n      delete s.operations[operationOrAttributeName];\n    } else if (operationOrAttributeName in s.attributes) {\n      semantic = s.attributes[operationOrAttributeName];\n      delete s.attributes[operationOrAttributeName];\n    }\n    delete s.Wrapper.prototype[operationOrAttributeName];\n    return semantic;\n  };\n  proxy.getOperationNames = function () {\n    return Object.keys(s.operations);\n  };\n  proxy.getAttributeNames = function () {\n    return Object.keys(s.attributes);\n  };\n  proxy.getGrammar = function () {\n    return s.grammar;\n  };\n  proxy.toRecipe = function (semanticsOnly) {\n    return s.toRecipe(semanticsOnly);\n  };\n\n  // Make the proxy's toString() work.\n  proxy.toString = s.toString.bind(s);\n\n  // Returns the semantics for the proxy.\n  proxy._getSemantics = function () {\n    return s;\n  };\n\n  return proxy;\n};\n\n// ----------------- Operation -----------------\n\n// An Operation represents a function to be applied to a concrete syntax tree (CST) -- it's very\n// similar to a Visitor (http://en.wikipedia.org/wiki/Visitor_pattern). An operation is executed by\n// recursively walking the CST, and at each node, invoking the matching semantic action from\n// `actionDict`. See `Operation.prototype.execute` for details of how a CST node's matching semantic\n// action is found.\nclass Operation {\n  constructor(name, formals, actionDict, builtInDefault) {\n    this.name = name;\n    this.formals = formals;\n    this.actionDict = actionDict;\n    this.builtInDefault = builtInDefault;\n  }\n\n  checkActionDict(grammar) {\n    grammar._checkTopDownActionDict(this.typeName, this.name, this.actionDict);\n  }\n\n  // Execute this operation on the CST node associated with `nodeWrapper` in the context of the\n  // given Semantics instance.\n  execute(semantics, nodeWrapper) {\n    try {\n      // Look for a semantic action whose name matches the node's constructor name, which is either\n      // the name of a rule in the grammar, or '_terminal' (for a terminal node), or '_iter' (for an\n      // iteration node).\n      const {ctorName} = nodeWrapper._node;\n      let actionFn = this.actionDict[ctorName];\n      if (actionFn) {\n        globalActionStack.push([this, ctorName]);\n        return actionFn.apply(nodeWrapper, nodeWrapper._children());\n      }\n\n      // The action dictionary does not contain a semantic action for this specific type of node.\n      // If this is a nonterminal node and the programmer has provided a `_nonterminal` semantic\n      // action, we invoke it:\n      if (nodeWrapper.isNonterminal()) {\n        actionFn = this.actionDict._nonterminal;\n        if (actionFn) {\n          globalActionStack.push([this, '_nonterminal', ctorName]);\n          return actionFn.apply(nodeWrapper, nodeWrapper._children());\n        }\n      }\n\n      // Otherwise, we invoke the '_default' semantic action.\n      globalActionStack.push([this, 'default action', ctorName]);\n      return this.actionDict._default.apply(nodeWrapper, nodeWrapper._children());\n    } finally {\n      globalActionStack.pop();\n    }\n  }\n}\n\nOperation.prototype.typeName = 'operation';\n\n// ----------------- Attribute -----------------\n\n// Attributes are Operations whose results are memoized. This means that, for any given semantics,\n// the semantic action for a CST node will be invoked no more than once.\nclass Attribute extends Operation {\n  constructor(name, actionDict, builtInDefault) {\n    super(name, [], actionDict, builtInDefault);\n  }\n\n  execute(semantics, nodeWrapper) {\n    const node = nodeWrapper._node;\n    const key = semantics.attributeKeys[this.name];\n    if (!hasOwnProperty(node, key)) {\n      // The following is a super-send -- isn't JS beautiful? :/\n      node[key] = Operation.prototype.execute.call(this, semantics, nodeWrapper);\n    }\n    return node[key];\n  }\n}\n\nAttribute.prototype.typeName = 'attribute';\n", "import {Matcher} from './Matcher.js';\nimport {Semantics} from './Semantics.js';\nimport * as common from './common.js';\nimport * as errors from './errors.js';\nimport * as pexprs from './pexprs.js';\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nconst SPECIAL_ACTION_NAMES = ['_iter', '_terminal', '_nonterminal', '_default'];\n\nfunction getSortedRuleValues(grammar) {\n  return Object.keys(grammar.rules)\n    .sort()\n    .map(name => grammar.rules[name]);\n}\n\n// Until ES2019, JSON was not a valid subset of JavaScript because U+2028 (line separator)\n// and U+2029 (paragraph separator) are allowed in JSON string literals, but not in JS.\n// This function properly encodes those two characters so that the resulting string is\n// represents both valid JSON, and valid JavaScript (for ES2018 and below).\n// See https://v8.dev/features/subsume-json for more details.\nconst jsonToJS = str => str.replace(/\\u2028/g, '\\\\u2028').replace(/\\u2029/g, '\\\\u2029');\n\nlet ohmGrammar;\nlet buildGrammar;\n\nexport class Grammar {\n  constructor(name, superGrammar, rules, optDefaultStartRule) {\n    this.name = name;\n    this.superGrammar = superGrammar;\n    this.rules = rules;\n    if (optDefaultStartRule) {\n      if (!(optDefaultStartRule in rules)) {\n        throw new Error(\n          \"Invalid start rule: '\" +\n            optDefaultStartRule +\n            \"' is not a rule in grammar '\" +\n            name +\n            \"'\"\n        );\n      }\n      this.defaultStartRule = optDefaultStartRule;\n    }\n    this._matchStateInitializer = undefined;\n    this.supportsIncrementalParsing = true;\n  }\n\n  matcher() {\n    return new Matcher(this);\n  }\n\n  // Return true if the grammar is a built-in grammar, otherwise false.\n  // NOTE: This might give an unexpected result if called before BuiltInRules is defined!\n  isBuiltIn() {\n    return this === Grammar.ProtoBuiltInRules || this === Grammar.BuiltInRules;\n  }\n\n  equals(g) {\n    if (this === g) {\n      return true;\n    }\n    // Do the cheapest comparisons first.\n    if (\n      g == null ||\n      this.name !== g.name ||\n      this.defaultStartRule !== g.defaultStartRule ||\n      !(this.superGrammar === g.superGrammar || this.superGrammar.equals(g.superGrammar))\n    ) {\n      return false;\n    }\n    const myRules = getSortedRuleValues(this);\n    const otherRules = getSortedRuleValues(g);\n    return (\n      myRules.length === otherRules.length &&\n      myRules.every((rule, i) => {\n        return (\n          rule.description === otherRules[i].description &&\n          rule.formals.join(',') === otherRules[i].formals.join(',') &&\n          rule.body.toString() === otherRules[i].body.toString()\n        );\n      })\n    );\n  }\n\n  match(input, optStartApplication) {\n    const m = this.matcher();\n    m.replaceInputRange(0, 0, input);\n    return m.match(optStartApplication);\n  }\n\n  trace(input, optStartApplication) {\n    const m = this.matcher();\n    m.replaceInputRange(0, 0, input);\n    return m.trace(optStartApplication);\n  }\n\n  createSemantics() {\n    return Semantics.createSemantics(this);\n  }\n\n  extendSemantics(superSemantics) {\n    return Semantics.createSemantics(this, superSemantics._getSemantics());\n  }\n\n  // Check that every key in `actionDict` corresponds to a semantic action, and that it maps to\n  // a function of the correct arity. If not, throw an exception.\n  _checkTopDownActionDict(what, name, actionDict) {\n    const problems = [];\n\n    for (const k in actionDict) {\n      const v = actionDict[k];\n      const isSpecialAction = SPECIAL_ACTION_NAMES.includes(k);\n\n      if (!isSpecialAction && !(k in this.rules)) {\n        problems.push(`'${k}' is not a valid semantic action for '${this.name}'`);\n        continue;\n      }\n      if (typeof v !== 'function') {\n        problems.push(`'${k}' must be a function in an action dictionary for '${this.name}'`);\n        continue;\n      }\n      const actual = v.length;\n      const expected = this._topDownActionArity(k);\n      if (actual !== expected) {\n        let details;\n        if (k === '_iter' || k === '_nonterminal') {\n          details =\n            `it should use a rest parameter, e.g. \\`${k}(...children) {}\\`. ` +\n            'NOTE: this is new in Ohm v16 \u2014 see https://ohmjs.org/d/ati for details.';\n        } else {\n          details = `expected ${expected}, got ${actual}`;\n        }\n        problems.push(`Semantic action '${k}' has the wrong arity: ${details}`);\n      }\n    }\n    if (problems.length > 0) {\n      const prettyProblems = problems.map(problem => '- ' + problem);\n      const error = new Error(\n        [\n          `Found errors in the action dictionary of the '${name}' ${what}:`,\n          ...prettyProblems,\n        ].join('\\n')\n      );\n      error.problems = problems;\n      throw error;\n    }\n  }\n\n  // Return the expected arity for a semantic action named `actionName`, which\n  // is either a rule name or a special action name like '_nonterminal'.\n  _topDownActionArity(actionName) {\n    // All special actions have an expected arity of 0, though all but _terminal\n    // are expected to use the rest parameter syntax (e.g. `_iter(...children)`).\n    // This is considered to have arity 0, i.e. `((...args) => {}).length` is 0.\n    return SPECIAL_ACTION_NAMES.includes(actionName)\n      ? 0\n      : this.rules[actionName].body.getArity();\n  }\n\n  _inheritsFrom(grammar) {\n    let g = this.superGrammar;\n    while (g) {\n      if (g.equals(grammar, true)) {\n        return true;\n      }\n      g = g.superGrammar;\n    }\n    return false;\n  }\n\n  toRecipe(superGrammarExpr = undefined) {\n    const metaInfo = {};\n    // Include the grammar source if it is available.\n    if (this.source) {\n      metaInfo.source = this.source.contents;\n    }\n\n    let startRule = null;\n    if (this.defaultStartRule) {\n      startRule = this.defaultStartRule;\n    }\n\n    const rules = {};\n    Object.keys(this.rules).forEach(ruleName => {\n      const ruleInfo = this.rules[ruleName];\n      const {body} = ruleInfo;\n      const isDefinition = !this.superGrammar || !this.superGrammar.rules[ruleName];\n\n      let operation;\n      if (isDefinition) {\n        operation = 'define';\n      } else {\n        operation = body instanceof pexprs.Extend ? 'extend' : 'override';\n      }\n\n      const metaInfo = {};\n      if (ruleInfo.source && this.source) {\n        const adjusted = ruleInfo.source.relativeTo(this.source);\n        metaInfo.sourceInterval = [adjusted.startIdx, adjusted.endIdx];\n      }\n\n      const description = isDefinition ? ruleInfo.description : null;\n      const bodyRecipe = body.outputRecipe(ruleInfo.formals, this.source);\n\n      rules[ruleName] = [\n        operation, // \"define\"/\"extend\"/\"override\"\n        metaInfo,\n        description,\n        ruleInfo.formals,\n        bodyRecipe,\n      ];\n    });\n\n    // If the caller provided an expression to use for the supergrammar, use that.\n    // Otherwise, if the supergrammar is a user grammar, use its recipe inline.\n    let superGrammarOutput = 'null';\n    if (superGrammarExpr) {\n      superGrammarOutput = superGrammarExpr;\n    } else if (this.superGrammar && !this.superGrammar.isBuiltIn()) {\n      superGrammarOutput = this.superGrammar.toRecipe();\n    }\n\n    const recipeElements = [\n      ...['grammar', metaInfo, this.name].map(JSON.stringify),\n      superGrammarOutput,\n      ...[startRule, rules].map(JSON.stringify),\n    ];\n    return jsonToJS(`[${recipeElements.join(',')}]`);\n  }\n\n  // TODO: Come up with better names for these methods.\n  // TODO: Write the analog of these methods for inherited attributes.\n  toOperationActionDictionaryTemplate() {\n    return this._toOperationOrAttributeActionDictionaryTemplate();\n  }\n  toAttributeActionDictionaryTemplate() {\n    return this._toOperationOrAttributeActionDictionaryTemplate();\n  }\n\n  _toOperationOrAttributeActionDictionaryTemplate() {\n    // TODO: add the super-grammar's templates at the right place, e.g., a case for AddExpr_plus\n    // should appear next to other cases of AddExpr.\n\n    const sb = new common.StringBuffer();\n    sb.append('{');\n\n    let first = true;\n\n    for (const ruleName in this.rules) {\n      const {body} = this.rules[ruleName];\n      if (first) {\n        first = false;\n      } else {\n        sb.append(',');\n      }\n      sb.append('\\n');\n      sb.append('  ');\n      this.addSemanticActionTemplate(ruleName, body, sb);\n    }\n\n    sb.append('\\n}');\n    return sb.contents();\n  }\n\n  addSemanticActionTemplate(ruleName, body, sb) {\n    sb.append(ruleName);\n    sb.append(': function(');\n    const arity = this._topDownActionArity(ruleName);\n    sb.append(common.repeat('_', arity).join(', '));\n    sb.append(') {\\n');\n    sb.append('  }');\n  }\n\n  // Parse a string which expresses a rule application in this grammar, and return the\n  // resulting Apply node.\n  parseApplication(str) {\n    let app;\n    if (str.indexOf('<') === -1) {\n      // simple application\n      app = new pexprs.Apply(str);\n    } else {\n      // parameterized application\n      const cst = ohmGrammar.match(str, 'Base_application');\n      app = buildGrammar(cst, {});\n    }\n\n    // Ensure that the application is valid.\n    if (!(app.ruleName in this.rules)) {\n      throw errors.undeclaredRule(app.ruleName, this.name);\n    }\n    const {formals} = this.rules[app.ruleName];\n    if (formals.length !== app.args.length) {\n      const {source} = this.rules[app.ruleName];\n      throw errors.wrongNumberOfParameters(\n        app.ruleName,\n        formals.length,\n        app.args.length,\n        source\n      );\n    }\n    return app;\n  }\n\n  _setUpMatchState(state) {\n    if (this._matchStateInitializer) {\n      this._matchStateInitializer(state);\n    }\n  }\n}\n\n// The following grammar contains a few rules that couldn't be written  in \"userland\".\n// At the bottom of src/main.js, we create a sub-grammar of this grammar that's called\n// `BuiltInRules`. That grammar contains several convenience rules, e.g., `letter` and\n// `digit`, and is implicitly the super-grammar of any grammar whose super-grammar\n// isn't specified.\nGrammar.ProtoBuiltInRules = new Grammar(\n  'ProtoBuiltInRules', // name\n  undefined, // supergrammar\n  {\n    any: {\n      body: pexprs.any,\n      formals: [],\n      description: 'any character',\n      primitive: true,\n    },\n    end: {\n      body: pexprs.end,\n      formals: [],\n      description: 'end of input',\n      primitive: true,\n    },\n\n    caseInsensitive: {\n      body: new pexprs.CaseInsensitiveTerminal(new pexprs.Param(0)),\n      formals: ['str'],\n      primitive: true,\n    },\n    lower: {\n      body: new pexprs.UnicodeChar('Ll'),\n      formals: [],\n      description: 'a lowercase letter',\n      primitive: true,\n    },\n    upper: {\n      body: new pexprs.UnicodeChar('Lu'),\n      formals: [],\n      description: 'an uppercase letter',\n      primitive: true,\n    },\n    // Union of Lt (titlecase), Lm (modifier), and Lo (other), i.e. any letter not in Ll or Lu.\n    unicodeLtmo: {\n      body: new pexprs.UnicodeChar('Ltmo'),\n      formals: [],\n      description: 'a Unicode character in Lt, Lm, or Lo',\n      primitive: true,\n    },\n\n    // These rules are not truly primitive (they could be written in userland) but are defined\n    // here for bootstrapping purposes.\n    spaces: {\n      body: new pexprs.Star(new pexprs.Apply('space')),\n      formals: [],\n    },\n    space: {\n      body: new pexprs.Range('\\x00', ' '),\n      formals: [],\n      description: 'a space',\n    },\n  }\n);\n\n// This method is called from main.js once Ohm has loaded.\nGrammar.initApplicationParser = function (grammar, builderFn) {\n  ohmGrammar = grammar;\n  buildGrammar = builderFn;\n};\n", "import {Grammar} from './Grammar.js';\nimport {InputStream} from './InputStream.js';\nimport {getDuplicates} from './common.js';\nimport * as errors from './errors.js';\nimport * as pexprs from './pexprs.js';\n\n// --------------------------------------------------------------------\n// Private Stuff\n// --------------------------------------------------------------------\n\n// Constructors\n\nexport class GrammarDecl {\n  constructor(name) {\n    this.name = name;\n  }\n\n  // Helpers\n\n  sourceInterval(startIdx, endIdx) {\n    return this.source.subInterval(startIdx, endIdx - startIdx);\n  }\n\n  ensureSuperGrammar() {\n    if (!this.superGrammar) {\n      this.withSuperGrammar(\n        // TODO: The conditional expression below is an ugly hack. It's kind of ok because\n        // I doubt anyone will ever try to declare a grammar called `BuiltInRules`. Still,\n        // we should try to find a better way to do this.\n        this.name === 'BuiltInRules' ? Grammar.ProtoBuiltInRules : Grammar.BuiltInRules\n      );\n    }\n    return this.superGrammar;\n  }\n\n  ensureSuperGrammarRuleForOverriding(name, source) {\n    const ruleInfo = this.ensureSuperGrammar().rules[name];\n    if (!ruleInfo) {\n      throw errors.cannotOverrideUndeclaredRule(name, this.superGrammar.name, source);\n    }\n    return ruleInfo;\n  }\n\n  installOverriddenOrExtendedRule(name, formals, body, source) {\n    const duplicateParameterNames = getDuplicates(formals);\n    if (duplicateParameterNames.length > 0) {\n      throw errors.duplicateParameterNames(name, duplicateParameterNames, source);\n    }\n    const ruleInfo = this.ensureSuperGrammar().rules[name];\n    const expectedFormals = ruleInfo.formals;\n    const expectedNumFormals = expectedFormals ? expectedFormals.length : 0;\n    if (formals.length !== expectedNumFormals) {\n      throw errors.wrongNumberOfParameters(name, expectedNumFormals, formals.length, source);\n    }\n    return this.install(name, formals, body, ruleInfo.description, source);\n  }\n\n  install(name, formals, body, description, source, primitive = false) {\n    this.rules[name] = {\n      body: body.introduceParams(formals),\n      formals,\n      description,\n      source,\n      primitive,\n    };\n    return this;\n  }\n\n  // Stuff that you should only do once\n\n  withSuperGrammar(superGrammar) {\n    if (this.superGrammar) {\n      throw new Error('the super grammar of a GrammarDecl cannot be set more than once');\n    }\n    this.superGrammar = superGrammar;\n    this.rules = Object.create(superGrammar.rules);\n\n    // Grammars with an explicit supergrammar inherit a default start rule.\n    if (!superGrammar.isBuiltIn()) {\n      this.defaultStartRule = superGrammar.defaultStartRule;\n    }\n    return this;\n  }\n\n  withDefaultStartRule(ruleName) {\n    this.defaultStartRule = ruleName;\n    return this;\n  }\n\n  withSource(source) {\n    this.source = new InputStream(source).interval(0, source.length);\n    return this;\n  }\n\n  // Creates a Grammar instance, and if it passes the sanity checks, returns it.\n  build() {\n    const grammar = new Grammar(\n      this.name,\n      this.ensureSuperGrammar(),\n      this.rules,\n      this.defaultStartRule\n    );\n    // Initialize internal props that are inherited from the super grammar.\n    grammar._matchStateInitializer = grammar.superGrammar._matchStateInitializer;\n    grammar.supportsIncrementalParsing = grammar.superGrammar.supportsIncrementalParsing;\n\n    // TODO: change the pexpr.prototype.assert... methods to make them add\n    // exceptions to an array that's provided as an arg. Then we'll be able to\n    // show more than one error of the same type at a time.\n    // TODO: include the offending pexpr in the errors, that way we can show\n    // the part of the source that caused it.\n    const grammarErrors = [];\n    let grammarHasInvalidApplications = false;\n    Object.keys(grammar.rules).forEach(ruleName => {\n      const {body} = grammar.rules[ruleName];\n      try {\n        body.assertChoicesHaveUniformArity(ruleName);\n      } catch (e) {\n        grammarErrors.push(e);\n      }\n      try {\n        body.assertAllApplicationsAreValid(ruleName, grammar);\n      } catch (e) {\n        grammarErrors.push(e);\n        grammarHasInvalidApplications = true;\n      }\n    });\n    if (!grammarHasInvalidApplications) {\n      // The following check can only be done if the grammar has no invalid applications.\n      Object.keys(grammar.rules).forEach(ruleName => {\n        const {body} = grammar.rules[ruleName];\n        try {\n          body.assertIteratedExprsAreNotNullable(grammar, []);\n        } catch (e) {\n          grammarErrors.push(e);\n        }\n      });\n    }\n    if (grammarErrors.length > 0) {\n      errors.throwErrors(grammarErrors);\n    }\n    if (this.source) {\n      grammar.source = this.source;\n    }\n\n    return grammar;\n  }\n\n  // Rule declarations\n\n  define(name, formals, body, description, source, primitive) {\n    this.ensureSuperGrammar();\n    if (this.superGrammar.rules[name]) {\n      throw errors.duplicateRuleDeclaration(name, this.name, this.superGrammar.name, source);\n    } else if (this.rules[name]) {\n      throw errors.duplicateRuleDeclaration(name, this.name, this.name, source);\n    }\n    const duplicateParameterNames = getDuplicates(formals);\n    if (duplicateParameterNames.length > 0) {\n      throw errors.duplicateParameterNames(name, duplicateParameterNames, source);\n    }\n    return this.install(name, formals, body, description, source, primitive);\n  }\n\n  override(name, formals, body, descIgnored, source) {\n    this.ensureSuperGrammarRuleForOverriding(name, source);\n    this.installOverriddenOrExtendedRule(name, formals, body, source);\n    return this;\n  }\n\n  extend(name, formals, fragment, descIgnored, source) {\n    const ruleInfo = this.ensureSuperGrammar().rules[name];\n    if (!ruleInfo) {\n      throw errors.cannotExtendUndeclaredRule(name, this.superGrammar.name, source);\n    }\n    const body = new pexprs.Extend(this.superGrammar, name, fragment);\n    body.source = fragment.source;\n    this.installOverriddenOrExtendedRule(name, formals, body, source);\n    return this;\n  }\n}\n", "import {Grammar} from './Grammar.js';\nimport {GrammarDecl} from './GrammarDecl.js';\nimport * as pexprs from './pexprs.js';\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nexport class Builder {\n  constructor() {\n    this.currentDecl = null;\n    this.currentRuleName = null;\n  }\n\n  newGrammar(name) {\n    return new GrammarDecl(name);\n  }\n\n  grammar(metaInfo, name, superGrammar, defaultStartRule, rules) {\n    const gDecl = new GrammarDecl(name);\n    if (superGrammar) {\n      // `superGrammar` may be a recipe (i.e. an Array), or an actual grammar instance.\n      gDecl.withSuperGrammar(\n        superGrammar instanceof Grammar ? superGrammar : this.fromRecipe(superGrammar)\n      );\n    }\n    if (defaultStartRule) {\n      gDecl.withDefaultStartRule(defaultStartRule);\n    }\n    if (metaInfo && metaInfo.source) {\n      gDecl.withSource(metaInfo.source);\n    }\n\n    this.currentDecl = gDecl;\n    Object.keys(rules).forEach(ruleName => {\n      this.currentRuleName = ruleName;\n      const ruleRecipe = rules[ruleName];\n\n      const action = ruleRecipe[0]; // define/extend/override\n      const metaInfo = ruleRecipe[1];\n      const description = ruleRecipe[2];\n      const formals = ruleRecipe[3];\n      const body = this.fromRecipe(ruleRecipe[4]);\n\n      let source;\n      if (gDecl.source && metaInfo && metaInfo.sourceInterval) {\n        source = gDecl.source.subInterval(\n          metaInfo.sourceInterval[0],\n          metaInfo.sourceInterval[1] - metaInfo.sourceInterval[0]\n        );\n      }\n      gDecl[action](ruleName, formals, body, description, source);\n    });\n    this.currentRuleName = this.currentDecl = null;\n    return gDecl.build();\n  }\n\n  terminal(x) {\n    return new pexprs.Terminal(x);\n  }\n\n  range(from, to) {\n    return new pexprs.Range(from, to);\n  }\n\n  param(index) {\n    return new pexprs.Param(index);\n  }\n\n  alt(...termArgs) {\n    let terms = [];\n    for (let arg of termArgs) {\n      if (!(arg instanceof pexprs.PExpr)) {\n        arg = this.fromRecipe(arg);\n      }\n      if (arg instanceof pexprs.Alt) {\n        terms = terms.concat(arg.terms);\n      } else {\n        terms.push(arg);\n      }\n    }\n    return terms.length === 1 ? terms[0] : new pexprs.Alt(terms);\n  }\n\n  seq(...factorArgs) {\n    let factors = [];\n    for (let arg of factorArgs) {\n      if (!(arg instanceof pexprs.PExpr)) {\n        arg = this.fromRecipe(arg);\n      }\n      if (arg instanceof pexprs.Seq) {\n        factors = factors.concat(arg.factors);\n      } else {\n        factors.push(arg);\n      }\n    }\n    return factors.length === 1 ? factors[0] : new pexprs.Seq(factors);\n  }\n\n  star(expr) {\n    if (!(expr instanceof pexprs.PExpr)) {\n      expr = this.fromRecipe(expr);\n    }\n    return new pexprs.Star(expr);\n  }\n\n  plus(expr) {\n    if (!(expr instanceof pexprs.PExpr)) {\n      expr = this.fromRecipe(expr);\n    }\n    return new pexprs.Plus(expr);\n  }\n\n  opt(expr) {\n    if (!(expr instanceof pexprs.PExpr)) {\n      expr = this.fromRecipe(expr);\n    }\n    return new pexprs.Opt(expr);\n  }\n\n  not(expr) {\n    if (!(expr instanceof pexprs.PExpr)) {\n      expr = this.fromRecipe(expr);\n    }\n    return new pexprs.Not(expr);\n  }\n\n  lookahead(expr) {\n    if (!(expr instanceof pexprs.PExpr)) {\n      expr = this.fromRecipe(expr);\n    }\n    return new pexprs.Lookahead(expr);\n  }\n\n  lex(expr) {\n    if (!(expr instanceof pexprs.PExpr)) {\n      expr = this.fromRecipe(expr);\n    }\n    return new pexprs.Lex(expr);\n  }\n\n  app(ruleName, optParams) {\n    if (optParams && optParams.length > 0) {\n      optParams = optParams.map(function (param) {\n        return param instanceof pexprs.PExpr ? param : this.fromRecipe(param);\n      }, this);\n    }\n    return new pexprs.Apply(ruleName, optParams);\n  }\n\n  // Note that unlike other methods in this class, this method cannot be used as a\n  // convenience constructor. It only works with recipes, because it relies on\n  // `this.currentDecl` and `this.currentRuleName` being set.\n  splice(beforeTerms, afterTerms) {\n    return new pexprs.Splice(\n      this.currentDecl.superGrammar,\n      this.currentRuleName,\n      beforeTerms.map(term => this.fromRecipe(term)),\n      afterTerms.map(term => this.fromRecipe(term))\n    );\n  }\n\n  fromRecipe(recipe) {\n    // the meta-info of 'grammar' is processed in Builder.grammar\n    const args = recipe[0] === 'grammar' ? recipe.slice(1) : recipe.slice(2);\n    const result = this[recipe[0]](...args);\n\n    const metaInfo = recipe[1];\n    if (metaInfo) {\n      if (metaInfo.sourceInterval && this.currentDecl) {\n        result.withSource(this.currentDecl.sourceInterval(...metaInfo.sourceInterval));\n      }\n    }\n    return result;\n  }\n}\n", "import {Builder} from './Builder.js';\n\nexport function makeRecipe(recipe) {\n  if (typeof recipe === 'function') {\n    return recipe.call(new Builder());\n  } else {\n    if (typeof recipe === 'string') {\n      // stringified JSON recipe\n      recipe = JSON.parse(recipe);\n    }\n    return new Builder().fromRecipe(recipe);\n  }\n}\n", "import {makeRecipe} from '../src/makeRecipe.js';\nexport default makeRecipe([\"grammar\",{\"source\":\"BuiltInRules {\\n\\n  alnum  (an alpha-numeric character)\\n    = letter\\n    | digit\\n\\n  letter  (a letter)\\n    = lower\\n    | upper\\n    | unicodeLtmo\\n\\n  digit  (a digit)\\n    = \\\"0\\\"..\\\"9\\\"\\n\\n  hexDigit  (a hexadecimal digit)\\n    = digit\\n    | \\\"a\\\"..\\\"f\\\"\\n    | \\\"A\\\"..\\\"F\\\"\\n\\n  ListOf<elem, sep>\\n    = NonemptyListOf<elem, sep>\\n    | EmptyListOf<elem, sep>\\n\\n  NonemptyListOf<elem, sep>\\n    = elem (sep elem)*\\n\\n  EmptyListOf<elem, sep>\\n    = /* nothing */\\n\\n  listOf<elem, sep>\\n    = nonemptyListOf<elem, sep>\\n    | emptyListOf<elem, sep>\\n\\n  nonemptyListOf<elem, sep>\\n    = elem (sep elem)*\\n\\n  emptyListOf<elem, sep>\\n    = /* nothing */\\n\\n  // Allows a syntactic rule application within a lexical context.\\n  applySyntactic<app> = app\\n}\"},\"BuiltInRules\",null,null,{\"alnum\":[\"define\",{\"sourceInterval\":[18,78]},\"an alpha-numeric character\",[],[\"alt\",{\"sourceInterval\":[60,78]},[\"app\",{\"sourceInterval\":[60,66]},\"letter\",[]],[\"app\",{\"sourceInterval\":[73,78]},\"digit\",[]]]],\"letter\":[\"define\",{\"sourceInterval\":[82,142]},\"a letter\",[],[\"alt\",{\"sourceInterval\":[107,142]},[\"app\",{\"sourceInterval\":[107,112]},\"lower\",[]],[\"app\",{\"sourceInterval\":[119,124]},\"upper\",[]],[\"app\",{\"sourceInterval\":[131,142]},\"unicodeLtmo\",[]]]],\"digit\":[\"define\",{\"sourceInterval\":[146,177]},\"a digit\",[],[\"range\",{\"sourceInterval\":[169,177]},\"0\",\"9\"]],\"hexDigit\":[\"define\",{\"sourceInterval\":[181,254]},\"a hexadecimal digit\",[],[\"alt\",{\"sourceInterval\":[219,254]},[\"app\",{\"sourceInterval\":[219,224]},\"digit\",[]],[\"range\",{\"sourceInterval\":[231,239]},\"a\",\"f\"],[\"range\",{\"sourceInterval\":[246,254]},\"A\",\"F\"]]],\"ListOf\":[\"define\",{\"sourceInterval\":[258,336]},null,[\"elem\",\"sep\"],[\"alt\",{\"sourceInterval\":[282,336]},[\"app\",{\"sourceInterval\":[282,307]},\"NonemptyListOf\",[[\"param\",{\"sourceInterval\":[297,301]},0],[\"param\",{\"sourceInterval\":[303,306]},1]]],[\"app\",{\"sourceInterval\":[314,336]},\"EmptyListOf\",[[\"param\",{\"sourceInterval\":[326,330]},0],[\"param\",{\"sourceInterval\":[332,335]},1]]]]],\"NonemptyListOf\":[\"define\",{\"sourceInterval\":[340,388]},null,[\"elem\",\"sep\"],[\"seq\",{\"sourceInterval\":[372,388]},[\"param\",{\"sourceInterval\":[372,376]},0],[\"star\",{\"sourceInterval\":[377,388]},[\"seq\",{\"sourceInterval\":[378,386]},[\"param\",{\"sourceInterval\":[378,381]},1],[\"param\",{\"sourceInterval\":[382,386]},0]]]]],\"EmptyListOf\":[\"define\",{\"sourceInterval\":[392,434]},null,[\"elem\",\"sep\"],[\"seq\",{\"sourceInterval\":[438,438]}]],\"listOf\":[\"define\",{\"sourceInterval\":[438,516]},null,[\"elem\",\"sep\"],[\"alt\",{\"sourceInterval\":[462,516]},[\"app\",{\"sourceInterval\":[462,487]},\"nonemptyListOf\",[[\"param\",{\"sourceInterval\":[477,481]},0],[\"param\",{\"sourceInterval\":[483,486]},1]]],[\"app\",{\"sourceInterval\":[494,516]},\"emptyListOf\",[[\"param\",{\"sourceInterval\":[506,510]},0],[\"param\",{\"sourceInterval\":[512,515]},1]]]]],\"nonemptyListOf\":[\"define\",{\"sourceInterval\":[520,568]},null,[\"elem\",\"sep\"],[\"seq\",{\"sourceInterval\":[552,568]},[\"param\",{\"sourceInterval\":[552,556]},0],[\"star\",{\"sourceInterval\":[557,568]},[\"seq\",{\"sourceInterval\":[558,566]},[\"param\",{\"sourceInterval\":[558,561]},1],[\"param\",{\"sourceInterval\":[562,566]},0]]]]],\"emptyListOf\":[\"define\",{\"sourceInterval\":[572,682]},null,[\"elem\",\"sep\"],[\"seq\",{\"sourceInterval\":[685,685]}]],\"applySyntactic\":[\"define\",{\"sourceInterval\":[685,710]},null,[\"app\"],[\"param\",{\"sourceInterval\":[707,710]},0]]}]);\n", "import BuiltInRules from '../dist/built-in-rules.js';\nimport {Grammar} from './Grammar.js';\nimport {announceBuiltInRules} from './util.js';\n\nGrammar.BuiltInRules = BuiltInRules;\nannounceBuiltInRules(Grammar.BuiltInRules);\n\n// During the bootstrap process, we instantiate some grammars that require\n// the built-in rules to be loaded first (e.g., ohm-grammar.ohm). By\n// exporting `makeRecipe` here, the recipes for those grammars can encode\n// that dependency by importing it from this module.\nexport {makeRecipe} from './makeRecipe.js';\n", "import {makeRecipe} from '../src/main-kernel.js';\nexport default makeRecipe([\"grammar\",{\"source\":\"Ohm {\\n\\n  Grammars\\n    = Grammar*\\n\\n  Grammar\\n    = ident SuperGrammar? \\\"{\\\" Rule* \\\"}\\\"\\n\\n  SuperGrammar\\n    = \\\"<:\\\" ident\\n\\n  Rule\\n    = ident Formals? ruleDescr? \\\"=\\\"  RuleBody  -- define\\n    | ident Formals?            \\\":=\\\" OverrideRuleBody  -- override\\n    | ident Formals?            \\\"+=\\\" RuleBody  -- extend\\n\\n  RuleBody\\n    = \\\"|\\\"? NonemptyListOf<TopLevelTerm, \\\"|\\\">\\n\\n  TopLevelTerm\\n    = Seq caseName  -- inline\\n    | Seq\\n\\n  OverrideRuleBody\\n    = \\\"|\\\"? NonemptyListOf<OverrideTopLevelTerm, \\\"|\\\">\\n\\n  OverrideTopLevelTerm\\n    = \\\"...\\\"  -- superSplice\\n    | TopLevelTerm\\n\\n  Formals\\n    = \\\"<\\\" ListOf<ident, \\\",\\\"> \\\">\\\"\\n\\n  Params\\n    = \\\"<\\\" ListOf<Seq, \\\",\\\"> \\\">\\\"\\n\\n  Alt\\n    = NonemptyListOf<Seq, \\\"|\\\">\\n\\n  Seq\\n    = Iter*\\n\\n  Iter\\n    = Pred \\\"*\\\"  -- star\\n    | Pred \\\"+\\\"  -- plus\\n    | Pred \\\"?\\\"  -- opt\\n    | Pred\\n\\n  Pred\\n    = \\\"~\\\" Lex  -- not\\n    | \\\"&\\\" Lex  -- lookahead\\n    | Lex\\n\\n  Lex\\n    = \\\"#\\\" Base  -- lex\\n    | Base\\n\\n  Base\\n    = ident Params? ~(ruleDescr? \\\"=\\\" | \\\":=\\\" | \\\"+=\\\")  -- application\\n    | oneCharTerminal \\\"..\\\" oneCharTerminal           -- range\\n    | terminal                                       -- terminal\\n    | \\\"(\\\" Alt \\\")\\\"                                    -- paren\\n\\n  ruleDescr  (a rule description)\\n    = \\\"(\\\" ruleDescrText \\\")\\\"\\n\\n  ruleDescrText\\n    = (~\\\")\\\" any)*\\n\\n  caseName\\n    = \\\"--\\\" (~\\\"\\\\n\\\" space)* name (~\\\"\\\\n\\\" space)* (\\\"\\\\n\\\" | &\\\"}\\\")\\n\\n  name  (a name)\\n    = nameFirst nameRest*\\n\\n  nameFirst\\n    = \\\"_\\\"\\n    | letter\\n\\n  nameRest\\n    = \\\"_\\\"\\n    | alnum\\n\\n  ident  (an identifier)\\n    = name\\n\\n  terminal\\n    = \\\"\\\\\\\"\\\" terminalChar* \\\"\\\\\\\"\\\"\\n\\n  oneCharTerminal\\n    = \\\"\\\\\\\"\\\" terminalChar \\\"\\\\\\\"\\\"\\n\\n  terminalChar\\n    = escapeChar\\n      | ~\\\"\\\\\\\\\\\" ~\\\"\\\\\\\"\\\" ~\\\"\\\\n\\\" \\\"\\\\u{0}\\\"..\\\"\\\\u{10FFFF}\\\"\\n\\n  escapeChar  (an escape sequence)\\n    = \\\"\\\\\\\\\\\\\\\\\\\"                                     -- backslash\\n    | \\\"\\\\\\\\\\\\\\\"\\\"                                     -- doubleQuote\\n    | \\\"\\\\\\\\\\\\'\\\"                                     -- singleQuote\\n    | \\\"\\\\\\\\b\\\"                                      -- backspace\\n    | \\\"\\\\\\\\n\\\"                                      -- lineFeed\\n    | \\\"\\\\\\\\r\\\"                                      -- carriageReturn\\n    | \\\"\\\\\\\\t\\\"                                      -- tab\\n    | \\\"\\\\\\\\u{\\\" hexDigit hexDigit? hexDigit?\\n             hexDigit? hexDigit? hexDigit? \\\"}\\\"   -- unicodeCodePoint\\n    | \\\"\\\\\\\\u\\\" hexDigit hexDigit hexDigit hexDigit  -- unicodeEscape\\n    | \\\"\\\\\\\\x\\\" hexDigit hexDigit                    -- hexEscape\\n\\n  space\\n   += comment\\n\\n  comment\\n    = \\\"//\\\" (~\\\"\\\\n\\\" any)* &(\\\"\\\\n\\\" | end)  -- singleLine\\n    | \\\"/*\\\" (~\\\"*/\\\" any)* \\\"*/\\\"  -- multiLine\\n\\n  tokens = token*\\n\\n  token = caseName | comment | ident | operator | punctuation | terminal | any\\n\\n  operator = \\\"<:\\\" | \\\"=\\\" | \\\":=\\\" | \\\"+=\\\" | \\\"*\\\" | \\\"+\\\" | \\\"?\\\" | \\\"~\\\" | \\\"&\\\"\\n\\n  punctuation = \\\"<\\\" | \\\">\\\" | \\\",\\\" | \\\"--\\\"\\n}\"},\"Ohm\",null,\"Grammars\",{\"Grammars\":[\"define\",{\"sourceInterval\":[9,32]},null,[],[\"star\",{\"sourceInterval\":[24,32]},[\"app\",{\"sourceInterval\":[24,31]},\"Grammar\",[]]]],\"Grammar\":[\"define\",{\"sourceInterval\":[36,83]},null,[],[\"seq\",{\"sourceInterval\":[50,83]},[\"app\",{\"sourceInterval\":[50,55]},\"ident\",[]],[\"opt\",{\"sourceInterval\":[56,69]},[\"app\",{\"sourceInterval\":[56,68]},\"SuperGrammar\",[]]],[\"terminal\",{\"sourceInterval\":[70,73]},\"{\"],[\"star\",{\"sourceInterval\":[74,79]},[\"app\",{\"sourceInterval\":[74,78]},\"Rule\",[]]],[\"terminal\",{\"sourceInterval\":[80,83]},\"}\"]]],\"SuperGrammar\":[\"define\",{\"sourceInterval\":[87,116]},null,[],[\"seq\",{\"sourceInterval\":[106,116]},[\"terminal\",{\"sourceInterval\":[106,110]},\"<:\"],[\"app\",{\"sourceInterval\":[111,116]},\"ident\",[]]]],\"Rule_define\":[\"define\",{\"sourceInterval\":[131,181]},null,[],[\"seq\",{\"sourceInterval\":[131,170]},[\"app\",{\"sourceInterval\":[131,136]},\"ident\",[]],[\"opt\",{\"sourceInterval\":[137,145]},[\"app\",{\"sourceInterval\":[137,144]},\"Formals\",[]]],[\"opt\",{\"sourceInterval\":[146,156]},[\"app\",{\"sourceInterval\":[146,155]},\"ruleDescr\",[]]],[\"terminal\",{\"sourceInterval\":[157,160]},\"=\"],[\"app\",{\"sourceInterval\":[162,170]},\"RuleBody\",[]]]],\"Rule_override\":[\"define\",{\"sourceInterval\":[188,248]},null,[],[\"seq\",{\"sourceInterval\":[188,235]},[\"app\",{\"sourceInterval\":[188,193]},\"ident\",[]],[\"opt\",{\"sourceInterval\":[194,202]},[\"app\",{\"sourceInterval\":[194,201]},\"Formals\",[]]],[\"terminal\",{\"sourceInterval\":[214,218]},\":=\"],[\"app\",{\"sourceInterval\":[219,235]},\"OverrideRuleBody\",[]]]],\"Rule_extend\":[\"define\",{\"sourceInterval\":[255,305]},null,[],[\"seq\",{\"sourceInterval\":[255,294]},[\"app\",{\"sourceInterval\":[255,260]},\"ident\",[]],[\"opt\",{\"sourceInterval\":[261,269]},[\"app\",{\"sourceInterval\":[261,268]},\"Formals\",[]]],[\"terminal\",{\"sourceInterval\":[281,285]},\"+=\"],[\"app\",{\"sourceInterval\":[286,294]},\"RuleBody\",[]]]],\"Rule\":[\"define\",{\"sourceInterval\":[120,305]},null,[],[\"alt\",{\"sourceInterval\":[131,305]},[\"app\",{\"sourceInterval\":[131,170]},\"Rule_define\",[]],[\"app\",{\"sourceInterval\":[188,235]},\"Rule_override\",[]],[\"app\",{\"sourceInterval\":[255,294]},\"Rule_extend\",[]]]],\"RuleBody\":[\"define\",{\"sourceInterval\":[309,362]},null,[],[\"seq\",{\"sourceInterval\":[324,362]},[\"opt\",{\"sourceInterval\":[324,328]},[\"terminal\",{\"sourceInterval\":[324,327]},\"|\"]],[\"app\",{\"sourceInterval\":[329,362]},\"NonemptyListOf\",[[\"app\",{\"sourceInterval\":[344,356]},\"TopLevelTerm\",[]],[\"terminal\",{\"sourceInterval\":[358,361]},\"|\"]]]]],\"TopLevelTerm_inline\":[\"define\",{\"sourceInterval\":[385,408]},null,[],[\"seq\",{\"sourceInterval\":[385,397]},[\"app\",{\"sourceInterval\":[385,388]},\"Seq\",[]],[\"app\",{\"sourceInterval\":[389,397]},\"caseName\",[]]]],\"TopLevelTerm\":[\"define\",{\"sourceInterval\":[366,418]},null,[],[\"alt\",{\"sourceInterval\":[385,418]},[\"app\",{\"sourceInterval\":[385,397]},\"TopLevelTerm_inline\",[]],[\"app\",{\"sourceInterval\":[415,418]},\"Seq\",[]]]],\"OverrideRuleBody\":[\"define\",{\"sourceInterval\":[422,491]},null,[],[\"seq\",{\"sourceInterval\":[445,491]},[\"opt\",{\"sourceInterval\":[445,449]},[\"terminal\",{\"sourceInterval\":[445,448]},\"|\"]],[\"app\",{\"sourceInterval\":[450,491]},\"NonemptyListOf\",[[\"app\",{\"sourceInterval\":[465,485]},\"OverrideTopLevelTerm\",[]],[\"terminal\",{\"sourceInterval\":[487,490]},\"|\"]]]]],\"OverrideTopLevelTerm_superSplice\":[\"define\",{\"sourceInterval\":[522,543]},null,[],[\"terminal\",{\"sourceInterval\":[522,527]},\"...\"]],\"OverrideTopLevelTerm\":[\"define\",{\"sourceInterval\":[495,562]},null,[],[\"alt\",{\"sourceInterval\":[522,562]},[\"app\",{\"sourceInterval\":[522,527]},\"OverrideTopLevelTerm_superSplice\",[]],[\"app\",{\"sourceInterval\":[550,562]},\"TopLevelTerm\",[]]]],\"Formals\":[\"define\",{\"sourceInterval\":[566,606]},null,[],[\"seq\",{\"sourceInterval\":[580,606]},[\"terminal\",{\"sourceInterval\":[580,583]},\"<\"],[\"app\",{\"sourceInterval\":[584,602]},\"ListOf\",[[\"app\",{\"sourceInterval\":[591,596]},\"ident\",[]],[\"terminal\",{\"sourceInterval\":[598,601]},\",\"]]],[\"terminal\",{\"sourceInterval\":[603,606]},\">\"]]],\"Params\":[\"define\",{\"sourceInterval\":[610,647]},null,[],[\"seq\",{\"sourceInterval\":[623,647]},[\"terminal\",{\"sourceInterval\":[623,626]},\"<\"],[\"app\",{\"sourceInterval\":[627,643]},\"ListOf\",[[\"app\",{\"sourceInterval\":[634,637]},\"Seq\",[]],[\"terminal\",{\"sourceInterval\":[639,642]},\",\"]]],[\"terminal\",{\"sourceInterval\":[644,647]},\">\"]]],\"Alt\":[\"define\",{\"sourceInterval\":[651,685]},null,[],[\"app\",{\"sourceInterval\":[661,685]},\"NonemptyListOf\",[[\"app\",{\"sourceInterval\":[676,679]},\"Seq\",[]],[\"terminal\",{\"sourceInterval\":[681,684]},\"|\"]]]],\"Seq\":[\"define\",{\"sourceInterval\":[689,704]},null,[],[\"star\",{\"sourceInterval\":[699,704]},[\"app\",{\"sourceInterval\":[699,703]},\"Iter\",[]]]],\"Iter_star\":[\"define\",{\"sourceInterval\":[719,736]},null,[],[\"seq\",{\"sourceInterval\":[719,727]},[\"app\",{\"sourceInterval\":[719,723]},\"Pred\",[]],[\"terminal\",{\"sourceInterval\":[724,727]},\"*\"]]],\"Iter_plus\":[\"define\",{\"sourceInterval\":[743,760]},null,[],[\"seq\",{\"sourceInterval\":[743,751]},[\"app\",{\"sourceInterval\":[743,747]},\"Pred\",[]],[\"terminal\",{\"sourceInterval\":[748,751]},\"+\"]]],\"Iter_opt\":[\"define\",{\"sourceInterval\":[767,783]},null,[],[\"seq\",{\"sourceInterval\":[767,775]},[\"app\",{\"sourceInterval\":[767,771]},\"Pred\",[]],[\"terminal\",{\"sourceInterval\":[772,775]},\"?\"]]],\"Iter\":[\"define\",{\"sourceInterval\":[708,794]},null,[],[\"alt\",{\"sourceInterval\":[719,794]},[\"app\",{\"sourceInterval\":[719,727]},\"Iter_star\",[]],[\"app\",{\"sourceInterval\":[743,751]},\"Iter_plus\",[]],[\"app\",{\"sourceInterval\":[767,775]},\"Iter_opt\",[]],[\"app\",{\"sourceInterval\":[790,794]},\"Pred\",[]]]],\"Pred_not\":[\"define\",{\"sourceInterval\":[809,824]},null,[],[\"seq\",{\"sourceInterval\":[809,816]},[\"terminal\",{\"sourceInterval\":[809,812]},\"~\"],[\"app\",{\"sourceInterval\":[813,816]},\"Lex\",[]]]],\"Pred_lookahead\":[\"define\",{\"sourceInterval\":[831,852]},null,[],[\"seq\",{\"sourceInterval\":[831,838]},[\"terminal\",{\"sourceInterval\":[831,834]},\"&\"],[\"app\",{\"sourceInterval\":[835,838]},\"Lex\",[]]]],\"Pred\":[\"define\",{\"sourceInterval\":[798,862]},null,[],[\"alt\",{\"sourceInterval\":[809,862]},[\"app\",{\"sourceInterval\":[809,816]},\"Pred_not\",[]],[\"app\",{\"sourceInterval\":[831,838]},\"Pred_lookahead\",[]],[\"app\",{\"sourceInterval\":[859,862]},\"Lex\",[]]]],\"Lex_lex\":[\"define\",{\"sourceInterval\":[876,892]},null,[],[\"seq\",{\"sourceInterval\":[876,884]},[\"terminal\",{\"sourceInterval\":[876,879]},\"#\"],[\"app\",{\"sourceInterval\":[880,884]},\"Base\",[]]]],\"Lex\":[\"define\",{\"sourceInterval\":[866,903]},null,[],[\"alt\",{\"sourceInterval\":[876,903]},[\"app\",{\"sourceInterval\":[876,884]},\"Lex_lex\",[]],[\"app\",{\"sourceInterval\":[899,903]},\"Base\",[]]]],\"Base_application\":[\"define\",{\"sourceInterval\":[918,979]},null,[],[\"seq\",{\"sourceInterval\":[918,963]},[\"app\",{\"sourceInterval\":[918,923]},\"ident\",[]],[\"opt\",{\"sourceInterval\":[924,931]},[\"app\",{\"sourceInterval\":[924,930]},\"Params\",[]]],[\"not\",{\"sourceInterval\":[932,963]},[\"alt\",{\"sourceInterval\":[934,962]},[\"seq\",{\"sourceInterval\":[934,948]},[\"opt\",{\"sourceInterval\":[934,944]},[\"app\",{\"sourceInterval\":[934,943]},\"ruleDescr\",[]]],[\"terminal\",{\"sourceInterval\":[945,948]},\"=\"]],[\"terminal\",{\"sourceInterval\":[951,955]},\":=\"],[\"terminal\",{\"sourceInterval\":[958,962]},\"+=\"]]]]],\"Base_range\":[\"define\",{\"sourceInterval\":[986,1041]},null,[],[\"seq\",{\"sourceInterval\":[986,1022]},[\"app\",{\"sourceInterval\":[986,1001]},\"oneCharTerminal\",[]],[\"terminal\",{\"sourceInterval\":[1002,1006]},\"..\"],[\"app\",{\"sourceInterval\":[1007,1022]},\"oneCharTerminal\",[]]]],\"Base_terminal\":[\"define\",{\"sourceInterval\":[1048,1106]},null,[],[\"app\",{\"sourceInterval\":[1048,1056]},\"terminal\",[]]],\"Base_paren\":[\"define\",{\"sourceInterval\":[1113,1168]},null,[],[\"seq\",{\"sourceInterval\":[1113,1124]},[\"terminal\",{\"sourceInterval\":[1113,1116]},\"(\"],[\"app\",{\"sourceInterval\":[1117,1120]},\"Alt\",[]],[\"terminal\",{\"sourceInterval\":[1121,1124]},\")\"]]],\"Base\":[\"define\",{\"sourceInterval\":[907,1168]},null,[],[\"alt\",{\"sourceInterval\":[918,1168]},[\"app\",{\"sourceInterval\":[918,963]},\"Base_application\",[]],[\"app\",{\"sourceInterval\":[986,1022]},\"Base_range\",[]],[\"app\",{\"sourceInterval\":[1048,1056]},\"Base_terminal\",[]],[\"app\",{\"sourceInterval\":[1113,1124]},\"Base_paren\",[]]]],\"ruleDescr\":[\"define\",{\"sourceInterval\":[1172,1231]},\"a rule description\",[],[\"seq\",{\"sourceInterval\":[1210,1231]},[\"terminal\",{\"sourceInterval\":[1210,1213]},\"(\"],[\"app\",{\"sourceInterval\":[1214,1227]},\"ruleDescrText\",[]],[\"terminal\",{\"sourceInterval\":[1228,1231]},\")\"]]],\"ruleDescrText\":[\"define\",{\"sourceInterval\":[1235,1266]},null,[],[\"star\",{\"sourceInterval\":[1255,1266]},[\"seq\",{\"sourceInterval\":[1256,1264]},[\"not\",{\"sourceInterval\":[1256,1260]},[\"terminal\",{\"sourceInterval\":[1257,1260]},\")\"]],[\"app\",{\"sourceInterval\":[1261,1264]},\"any\",[]]]]],\"caseName\":[\"define\",{\"sourceInterval\":[1270,1338]},null,[],[\"seq\",{\"sourceInterval\":[1285,1338]},[\"terminal\",{\"sourceInterval\":[1285,1289]},\"--\"],[\"star\",{\"sourceInterval\":[1290,1304]},[\"seq\",{\"sourceInterval\":[1291,1302]},[\"not\",{\"sourceInterval\":[1291,1296]},[\"terminal\",{\"sourceInterval\":[1292,1296]},\"\\n\"]],[\"app\",{\"sourceInterval\":[1297,1302]},\"space\",[]]]],[\"app\",{\"sourceInterval\":[1305,1309]},\"name\",[]],[\"star\",{\"sourceInterval\":[1310,1324]},[\"seq\",{\"sourceInterval\":[1311,1322]},[\"not\",{\"sourceInterval\":[1311,1316]},[\"terminal\",{\"sourceInterval\":[1312,1316]},\"\\n\"]],[\"app\",{\"sourceInterval\":[1317,1322]},\"space\",[]]]],[\"alt\",{\"sourceInterval\":[1326,1337]},[\"terminal\",{\"sourceInterval\":[1326,1330]},\"\\n\"],[\"lookahead\",{\"sourceInterval\":[1333,1337]},[\"terminal\",{\"sourceInterval\":[1334,1337]},\"}\"]]]]],\"name\":[\"define\",{\"sourceInterval\":[1342,1382]},\"a name\",[],[\"seq\",{\"sourceInterval\":[1363,1382]},[\"app\",{\"sourceInterval\":[1363,1372]},\"nameFirst\",[]],[\"star\",{\"sourceInterval\":[1373,1382]},[\"app\",{\"sourceInterval\":[1373,1381]},\"nameRest\",[]]]]],\"nameFirst\":[\"define\",{\"sourceInterval\":[1386,1418]},null,[],[\"alt\",{\"sourceInterval\":[1402,1418]},[\"terminal\",{\"sourceInterval\":[1402,1405]},\"_\"],[\"app\",{\"sourceInterval\":[1412,1418]},\"letter\",[]]]],\"nameRest\":[\"define\",{\"sourceInterval\":[1422,1452]},null,[],[\"alt\",{\"sourceInterval\":[1437,1452]},[\"terminal\",{\"sourceInterval\":[1437,1440]},\"_\"],[\"app\",{\"sourceInterval\":[1447,1452]},\"alnum\",[]]]],\"ident\":[\"define\",{\"sourceInterval\":[1456,1489]},\"an identifier\",[],[\"app\",{\"sourceInterval\":[1485,1489]},\"name\",[]]],\"terminal\":[\"define\",{\"sourceInterval\":[1493,1531]},null,[],[\"seq\",{\"sourceInterval\":[1508,1531]},[\"terminal\",{\"sourceInterval\":[1508,1512]},\"\\\"\"],[\"star\",{\"sourceInterval\":[1513,1526]},[\"app\",{\"sourceInterval\":[1513,1525]},\"terminalChar\",[]]],[\"terminal\",{\"sourceInterval\":[1527,1531]},\"\\\"\"]]],\"oneCharTerminal\":[\"define\",{\"sourceInterval\":[1535,1579]},null,[],[\"seq\",{\"sourceInterval\":[1557,1579]},[\"terminal\",{\"sourceInterval\":[1557,1561]},\"\\\"\"],[\"app\",{\"sourceInterval\":[1562,1574]},\"terminalChar\",[]],[\"terminal\",{\"sourceInterval\":[1575,1579]},\"\\\"\"]]],\"terminalChar\":[\"define\",{\"sourceInterval\":[1583,1660]},null,[],[\"alt\",{\"sourceInterval\":[1602,1660]},[\"app\",{\"sourceInterval\":[1602,1612]},\"escapeChar\",[]],[\"seq\",{\"sourceInterval\":[1621,1660]},[\"not\",{\"sourceInterval\":[1621,1626]},[\"terminal\",{\"sourceInterval\":[1622,1626]},\"\\\\\"]],[\"not\",{\"sourceInterval\":[1627,1632]},[\"terminal\",{\"sourceInterval\":[1628,1632]},\"\\\"\"]],[\"not\",{\"sourceInterval\":[1633,1638]},[\"terminal\",{\"sourceInterval\":[1634,1638]},\"\\n\"]],[\"range\",{\"sourceInterval\":[1639,1660]},\"\\u0000\",\"\uDBFF\uDFFF\"]]]],\"escapeChar_backslash\":[\"define\",{\"sourceInterval\":[1703,1758]},null,[],[\"terminal\",{\"sourceInterval\":[1703,1709]},\"\\\\\\\\\"]],\"escapeChar_doubleQuote\":[\"define\",{\"sourceInterval\":[1765,1822]},null,[],[\"terminal\",{\"sourceInterval\":[1765,1771]},\"\\\\\\\"\"]],\"escapeChar_singleQuote\":[\"define\",{\"sourceInterval\":[1829,1886]},null,[],[\"terminal\",{\"sourceInterval\":[1829,1835]},\"\\\\'\"]],\"escapeChar_backspace\":[\"define\",{\"sourceInterval\":[1893,1948]},null,[],[\"terminal\",{\"sourceInterval\":[1893,1898]},\"\\\\b\"]],\"escapeChar_lineFeed\":[\"define\",{\"sourceInterval\":[1955,2009]},null,[],[\"terminal\",{\"sourceInterval\":[1955,1960]},\"\\\\n\"]],\"escapeChar_carriageReturn\":[\"define\",{\"sourceInterval\":[2016,2076]},null,[],[\"terminal\",{\"sourceInterval\":[2016,2021]},\"\\\\r\"]],\"escapeChar_tab\":[\"define\",{\"sourceInterval\":[2083,2132]},null,[],[\"terminal\",{\"sourceInterval\":[2083,2088]},\"\\\\t\"]],\"escapeChar_unicodeCodePoint\":[\"define\",{\"sourceInterval\":[2139,2243]},null,[],[\"seq\",{\"sourceInterval\":[2139,2221]},[\"terminal\",{\"sourceInterval\":[2139,2145]},\"\\\\u{\"],[\"app\",{\"sourceInterval\":[2146,2154]},\"hexDigit\",[]],[\"opt\",{\"sourceInterval\":[2155,2164]},[\"app\",{\"sourceInterval\":[2155,2163]},\"hexDigit\",[]]],[\"opt\",{\"sourceInterval\":[2165,2174]},[\"app\",{\"sourceInterval\":[2165,2173]},\"hexDigit\",[]]],[\"opt\",{\"sourceInterval\":[2188,2197]},[\"app\",{\"sourceInterval\":[2188,2196]},\"hexDigit\",[]]],[\"opt\",{\"sourceInterval\":[2198,2207]},[\"app\",{\"sourceInterval\":[2198,2206]},\"hexDigit\",[]]],[\"opt\",{\"sourceInterval\":[2208,2217]},[\"app\",{\"sourceInterval\":[2208,2216]},\"hexDigit\",[]]],[\"terminal\",{\"sourceInterval\":[2218,2221]},\"}\"]]],\"escapeChar_unicodeEscape\":[\"define\",{\"sourceInterval\":[2250,2309]},null,[],[\"seq\",{\"sourceInterval\":[2250,2291]},[\"terminal\",{\"sourceInterval\":[2250,2255]},\"\\\\u\"],[\"app\",{\"sourceInterval\":[2256,2264]},\"hexDigit\",[]],[\"app\",{\"sourceInterval\":[2265,2273]},\"hexDigit\",[]],[\"app\",{\"sourceInterval\":[2274,2282]},\"hexDigit\",[]],[\"app\",{\"sourceInterval\":[2283,2291]},\"hexDigit\",[]]]],\"escapeChar_hexEscape\":[\"define\",{\"sourceInterval\":[2316,2371]},null,[],[\"seq\",{\"sourceInterval\":[2316,2339]},[\"terminal\",{\"sourceInterval\":[2316,2321]},\"\\\\x\"],[\"app\",{\"sourceInterval\":[2322,2330]},\"hexDigit\",[]],[\"app\",{\"sourceInterval\":[2331,2339]},\"hexDigit\",[]]]],\"escapeChar\":[\"define\",{\"sourceInterval\":[1664,2371]},\"an escape sequence\",[],[\"alt\",{\"sourceInterval\":[1703,2371]},[\"app\",{\"sourceInterval\":[1703,1709]},\"escapeChar_backslash\",[]],[\"app\",{\"sourceInterval\":[1765,1771]},\"escapeChar_doubleQuote\",[]],[\"app\",{\"sourceInterval\":[1829,1835]},\"escapeChar_singleQuote\",[]],[\"app\",{\"sourceInterval\":[1893,1898]},\"escapeChar_backspace\",[]],[\"app\",{\"sourceInterval\":[1955,1960]},\"escapeChar_lineFeed\",[]],[\"app\",{\"sourceInterval\":[2016,2021]},\"escapeChar_carriageReturn\",[]],[\"app\",{\"sourceInterval\":[2083,2088]},\"escapeChar_tab\",[]],[\"app\",{\"sourceInterval\":[2139,2221]},\"escapeChar_unicodeCodePoint\",[]],[\"app\",{\"sourceInterval\":[2250,2291]},\"escapeChar_unicodeEscape\",[]],[\"app\",{\"sourceInterval\":[2316,2339]},\"escapeChar_hexEscape\",[]]]],\"space\":[\"extend\",{\"sourceInterval\":[2375,2394]},null,[],[\"app\",{\"sourceInterval\":[2387,2394]},\"comment\",[]]],\"comment_singleLine\":[\"define\",{\"sourceInterval\":[2412,2458]},null,[],[\"seq\",{\"sourceInterval\":[2412,2443]},[\"terminal\",{\"sourceInterval\":[2412,2416]},\"//\"],[\"star\",{\"sourceInterval\":[2417,2429]},[\"seq\",{\"sourceInterval\":[2418,2427]},[\"not\",{\"sourceInterval\":[2418,2423]},[\"terminal\",{\"sourceInterval\":[2419,2423]},\"\\n\"]],[\"app\",{\"sourceInterval\":[2424,2427]},\"any\",[]]]],[\"lookahead\",{\"sourceInterval\":[2430,2443]},[\"alt\",{\"sourceInterval\":[2432,2442]},[\"terminal\",{\"sourceInterval\":[2432,2436]},\"\\n\"],[\"app\",{\"sourceInterval\":[2439,2442]},\"end\",[]]]]]],\"comment_multiLine\":[\"define\",{\"sourceInterval\":[2465,2501]},null,[],[\"seq\",{\"sourceInterval\":[2465,2487]},[\"terminal\",{\"sourceInterval\":[2465,2469]},\"/*\"],[\"star\",{\"sourceInterval\":[2470,2482]},[\"seq\",{\"sourceInterval\":[2471,2480]},[\"not\",{\"sourceInterval\":[2471,2476]},[\"terminal\",{\"sourceInterval\":[2472,2476]},\"*/\"]],[\"app\",{\"sourceInterval\":[2477,2480]},\"any\",[]]]],[\"terminal\",{\"sourceInterval\":[2483,2487]},\"*/\"]]],\"comment\":[\"define\",{\"sourceInterval\":[2398,2501]},null,[],[\"alt\",{\"sourceInterval\":[2412,2501]},[\"app\",{\"sourceInterval\":[2412,2443]},\"comment_singleLine\",[]],[\"app\",{\"sourceInterval\":[2465,2487]},\"comment_multiLine\",[]]]],\"tokens\":[\"define\",{\"sourceInterval\":[2505,2520]},null,[],[\"star\",{\"sourceInterval\":[2514,2520]},[\"app\",{\"sourceInterval\":[2514,2519]},\"token\",[]]]],\"token\":[\"define\",{\"sourceInterval\":[2524,2600]},null,[],[\"alt\",{\"sourceInterval\":[2532,2600]},[\"app\",{\"sourceInterval\":[2532,2540]},\"caseName\",[]],[\"app\",{\"sourceInterval\":[2543,2550]},\"comment\",[]],[\"app\",{\"sourceInterval\":[2553,2558]},\"ident\",[]],[\"app\",{\"sourceInterval\":[2561,2569]},\"operator\",[]],[\"app\",{\"sourceInterval\":[2572,2583]},\"punctuation\",[]],[\"app\",{\"sourceInterval\":[2586,2594]},\"terminal\",[]],[\"app\",{\"sourceInterval\":[2597,2600]},\"any\",[]]]],\"operator\":[\"define\",{\"sourceInterval\":[2604,2669]},null,[],[\"alt\",{\"sourceInterval\":[2615,2669]},[\"terminal\",{\"sourceInterval\":[2615,2619]},\"<:\"],[\"terminal\",{\"sourceInterval\":[2622,2625]},\"=\"],[\"terminal\",{\"sourceInterval\":[2628,2632]},\":=\"],[\"terminal\",{\"sourceInterval\":[2635,2639]},\"+=\"],[\"terminal\",{\"sourceInterval\":[2642,2645]},\"*\"],[\"terminal\",{\"sourceInterval\":[2648,2651]},\"+\"],[\"terminal\",{\"sourceInterval\":[2654,2657]},\"?\"],[\"terminal\",{\"sourceInterval\":[2660,2663]},\"~\"],[\"terminal\",{\"sourceInterval\":[2666,2669]},\"&\"]]],\"punctuation\":[\"define\",{\"sourceInterval\":[2673,2709]},null,[],[\"alt\",{\"sourceInterval\":[2687,2709]},[\"terminal\",{\"sourceInterval\":[2687,2690]},\"<\"],[\"terminal\",{\"sourceInterval\":[2693,2696]},\">\"],[\"terminal\",{\"sourceInterval\":[2699,2702]},\",\"],[\"terminal\",{\"sourceInterval\":[2705,2709]},\"--\"]]]}]);\n", "import ohmGrammar from '../dist/ohm-grammar.js';\nimport {Builder} from './Builder.js';\nimport * as common from './common.js';\nimport * as errors from './errors.js';\nimport {Grammar} from './Grammar.js';\nimport * as pexprs from './pexprs.js';\n\nconst superSplicePlaceholder = Object.create(pexprs.PExpr.prototype);\n\nfunction namespaceHas(ns, name) {\n  // Look for an enumerable property, anywhere in the prototype chain.\n  for (const prop in ns) {\n    if (prop === name) return true;\n  }\n  return false;\n}\n\n// Returns a Grammar instance (i.e., an object with a `match` method) for\n// `tree`, which is the concrete syntax tree of a user-written grammar.\n// The grammar will be assigned into `namespace` under the name of the grammar\n// as specified in the source.\nexport function buildGrammar(match, namespace, optOhmGrammarForTesting) {\n  const builder = new Builder();\n  let decl;\n  let currentRuleName;\n  let currentRuleFormals;\n  let overriding = false;\n  const metaGrammar = optOhmGrammarForTesting || ohmGrammar;\n\n  // A visitor that produces a Grammar instance from the CST.\n  const helpers = metaGrammar.createSemantics().addOperation('visit', {\n    Grammars(grammarIter) {\n      return grammarIter.children.map(c => c.visit());\n    },\n    Grammar(id, s, _open, rules, _close) {\n      const grammarName = id.visit();\n      decl = builder.newGrammar(grammarName);\n      s.child(0) && s.child(0).visit();\n      rules.children.map(c => c.visit());\n      const g = decl.build();\n      g.source = this.source.trimmed();\n      if (namespaceHas(namespace, grammarName)) {\n        throw errors.duplicateGrammarDeclaration(g, namespace);\n      }\n      namespace[grammarName] = g;\n      return g;\n    },\n\n    SuperGrammar(_, n) {\n      const superGrammarName = n.visit();\n      if (superGrammarName === 'null') {\n        decl.withSuperGrammar(null);\n      } else {\n        if (!namespace || !namespaceHas(namespace, superGrammarName)) {\n          throw errors.undeclaredGrammar(superGrammarName, namespace, n.source);\n        }\n        decl.withSuperGrammar(namespace[superGrammarName]);\n      }\n    },\n\n    Rule_define(n, fs, d, _, b) {\n      currentRuleName = n.visit();\n      currentRuleFormals = fs.children.map(c => c.visit())[0] || [];\n      // If there is no default start rule yet, set it now. This must be done before visiting\n      // the body, because it might contain an inline rule definition.\n      if (!decl.defaultStartRule && decl.ensureSuperGrammar() !== Grammar.ProtoBuiltInRules) {\n        decl.withDefaultStartRule(currentRuleName);\n      }\n      const body = b.visit();\n      const description = d.children.map(c => c.visit())[0];\n      const source = this.source.trimmed();\n      return decl.define(currentRuleName, currentRuleFormals, body, description, source);\n    },\n    Rule_override(n, fs, _, b) {\n      currentRuleName = n.visit();\n      currentRuleFormals = fs.children.map(c => c.visit())[0] || [];\n\n      const source = this.source.trimmed();\n      decl.ensureSuperGrammarRuleForOverriding(currentRuleName, source);\n\n      overriding = true;\n      const body = b.visit();\n      overriding = false;\n      return decl.override(currentRuleName, currentRuleFormals, body, null, source);\n    },\n    Rule_extend(n, fs, _, b) {\n      currentRuleName = n.visit();\n      currentRuleFormals = fs.children.map(c => c.visit())[0] || [];\n      const body = b.visit();\n      const source = this.source.trimmed();\n      return decl.extend(currentRuleName, currentRuleFormals, body, null, source);\n    },\n    RuleBody(_, terms) {\n      return builder.alt(...terms.visit()).withSource(this.source);\n    },\n    OverrideRuleBody(_, terms) {\n      const args = terms.visit();\n\n      // Check if the super-splice operator (`...`) appears in the terms.\n      const expansionPos = args.indexOf(superSplicePlaceholder);\n      if (expansionPos >= 0) {\n        const beforeTerms = args.slice(0, expansionPos);\n        const afterTerms = args.slice(expansionPos + 1);\n\n        // Ensure it appears no more than once.\n        afterTerms.forEach(t => {\n          if (t === superSplicePlaceholder) throw errors.multipleSuperSplices(t);\n        });\n\n        return new pexprs.Splice(\n          decl.superGrammar,\n          currentRuleName,\n          beforeTerms,\n          afterTerms\n        ).withSource(this.source);\n      } else {\n        return builder.alt(...args).withSource(this.source);\n      }\n    },\n    Formals(opointy, fs, cpointy) {\n      return fs.visit();\n    },\n\n    Params(opointy, ps, cpointy) {\n      return ps.visit();\n    },\n\n    Alt(seqs) {\n      return builder.alt(...seqs.visit()).withSource(this.source);\n    },\n\n    TopLevelTerm_inline(b, n) {\n      const inlineRuleName = currentRuleName + '_' + n.visit();\n      const body = b.visit();\n      const source = this.source.trimmed();\n      const isNewRuleDeclaration = !(\n        decl.superGrammar && decl.superGrammar.rules[inlineRuleName]\n      );\n      if (overriding && !isNewRuleDeclaration) {\n        decl.override(inlineRuleName, currentRuleFormals, body, null, source);\n      } else {\n        decl.define(inlineRuleName, currentRuleFormals, body, null, source);\n      }\n      const params = currentRuleFormals.map(formal => builder.app(formal));\n      return builder.app(inlineRuleName, params).withSource(body.source);\n    },\n    OverrideTopLevelTerm_superSplice(_) {\n      return superSplicePlaceholder;\n    },\n\n    Seq(expr) {\n      return builder.seq(...expr.children.map(c => c.visit())).withSource(this.source);\n    },\n\n    Iter_star(x, _) {\n      return builder.star(x.visit()).withSource(this.source);\n    },\n    Iter_plus(x, _) {\n      return builder.plus(x.visit()).withSource(this.source);\n    },\n    Iter_opt(x, _) {\n      return builder.opt(x.visit()).withSource(this.source);\n    },\n\n    Pred_not(_, x) {\n      return builder.not(x.visit()).withSource(this.source);\n    },\n    Pred_lookahead(_, x) {\n      return builder.lookahead(x.visit()).withSource(this.source);\n    },\n\n    Lex_lex(_, x) {\n      return builder.lex(x.visit()).withSource(this.source);\n    },\n\n    Base_application(rule, ps) {\n      const params = ps.children.map(c => c.visit())[0] || [];\n      return builder.app(rule.visit(), params).withSource(this.source);\n    },\n    Base_range(from, _, to) {\n      return builder.range(from.visit(), to.visit()).withSource(this.source);\n    },\n    Base_terminal(expr) {\n      return builder.terminal(expr.visit()).withSource(this.source);\n    },\n    Base_paren(open, x, close) {\n      return x.visit();\n    },\n\n    ruleDescr(open, t, close) {\n      return t.visit();\n    },\n    ruleDescrText(_) {\n      return this.sourceString.trim();\n    },\n\n    caseName(_, space1, n, space2, end) {\n      return n.visit();\n    },\n\n    name(first, rest) {\n      return this.sourceString;\n    },\n    nameFirst(expr) {},\n    nameRest(expr) {},\n\n    terminal(open, cs, close) {\n      return cs.children.map(c => c.visit()).join('');\n    },\n\n    oneCharTerminal(open, c, close) {\n      return c.visit();\n    },\n\n    escapeChar(c) {\n      try {\n        return common.unescapeCodePoint(this.sourceString);\n      } catch (err) {\n        if (err instanceof RangeError && err.message.startsWith('Invalid code point ')) {\n          throw errors.invalidCodePoint(c);\n        }\n        throw err; // Rethrow\n      }\n    },\n\n    NonemptyListOf(x, _, xs) {\n      return [x.visit()].concat(xs.children.map(c => c.visit()));\n    },\n    EmptyListOf() {\n      return [];\n    },\n\n    _terminal() {\n      return this.sourceString;\n    },\n  });\n  return helpers(match).visit();\n}\n", "import {makeRecipe} from '../src/main-kernel.js';\nexport default makeRecipe([\"grammar\",{\"source\":\"OperationsAndAttributes {\\n\\n  AttributeSignature =\\n    name\\n\\n  OperationSignature =\\n    name Formals?\\n\\n  Formals\\n    = \\\"(\\\" ListOf<name, \\\",\\\"> \\\")\\\"\\n\\n  name  (a name)\\n    = nameFirst nameRest*\\n\\n  nameFirst\\n    = \\\"_\\\"\\n    | letter\\n\\n  nameRest\\n    = \\\"_\\\"\\n    | alnum\\n\\n}\"},\"OperationsAndAttributes\",null,\"AttributeSignature\",{\"AttributeSignature\":[\"define\",{\"sourceInterval\":[29,58]},null,[],[\"app\",{\"sourceInterval\":[54,58]},\"name\",[]]],\"OperationSignature\":[\"define\",{\"sourceInterval\":[62,100]},null,[],[\"seq\",{\"sourceInterval\":[87,100]},[\"app\",{\"sourceInterval\":[87,91]},\"name\",[]],[\"opt\",{\"sourceInterval\":[92,100]},[\"app\",{\"sourceInterval\":[92,99]},\"Formals\",[]]]]],\"Formals\":[\"define\",{\"sourceInterval\":[104,143]},null,[],[\"seq\",{\"sourceInterval\":[118,143]},[\"terminal\",{\"sourceInterval\":[118,121]},\"(\"],[\"app\",{\"sourceInterval\":[122,139]},\"ListOf\",[[\"app\",{\"sourceInterval\":[129,133]},\"name\",[]],[\"terminal\",{\"sourceInterval\":[135,138]},\",\"]]],[\"terminal\",{\"sourceInterval\":[140,143]},\")\"]]],\"name\":[\"define\",{\"sourceInterval\":[147,187]},\"a name\",[],[\"seq\",{\"sourceInterval\":[168,187]},[\"app\",{\"sourceInterval\":[168,177]},\"nameFirst\",[]],[\"star\",{\"sourceInterval\":[178,187]},[\"app\",{\"sourceInterval\":[178,186]},\"nameRest\",[]]]]],\"nameFirst\":[\"define\",{\"sourceInterval\":[191,223]},null,[],[\"alt\",{\"sourceInterval\":[207,223]},[\"terminal\",{\"sourceInterval\":[207,210]},\"_\"],[\"app\",{\"sourceInterval\":[217,223]},\"letter\",[]]]],\"nameRest\":[\"define\",{\"sourceInterval\":[227,257]},null,[],[\"alt\",{\"sourceInterval\":[242,257]},[\"terminal\",{\"sourceInterval\":[242,245]},\"_\"],[\"app\",{\"sourceInterval\":[252,257]},\"alnum\",[]]]]}]);\n", "import operationsAndAttributesGrammar from '../dist/operations-and-attributes.js';\nimport {Grammar} from './Grammar.js';\nimport {Semantics} from './Semantics.js';\n\ninitBuiltInSemantics(Grammar.BuiltInRules);\ninitPrototypeParser(operationsAndAttributesGrammar); // requires BuiltInSemantics\n\nfunction initBuiltInSemantics(builtInRules) {\n  const actions = {\n    empty() {\n      return this.iteration();\n    },\n    nonEmpty(first, _, rest) {\n      return this.iteration([first].concat(rest.children));\n    },\n    self(..._children) {\n      return this;\n    },\n  };\n\n  Semantics.BuiltInSemantics = Semantics.createSemantics(builtInRules, null).addOperation(\n    'asIteration',\n    {\n      emptyListOf: actions.empty,\n      nonemptyListOf: actions.nonEmpty,\n      EmptyListOf: actions.empty,\n      NonemptyListOf: actions.nonEmpty,\n      _iter: actions.self,\n    }\n  );\n}\n\nfunction initPrototypeParser(grammar) {\n  Semantics.prototypeGrammarSemantics = grammar.createSemantics().addOperation('parse', {\n    AttributeSignature(name) {\n      return {\n        name: name.parse(),\n        formals: [],\n      };\n    },\n    OperationSignature(name, optFormals) {\n      return {\n        name: name.parse(),\n        formals: optFormals.children.map(c => c.parse())[0] || [],\n      };\n    },\n    Formals(oparen, fs, cparen) {\n      return fs.asIteration().children.map(c => c.parse());\n    },\n    name(first, rest) {\n      return this.sourceString;\n    },\n  });\n  Semantics.prototypeGrammar = grammar;\n}\n", "export function findIndentation(input) {\n  let pos = 0;\n  const stack = [0];\n  const topOfStack = () => stack[stack.length - 1];\n\n  const result = {};\n\n  const regex = /( *).*(?:$|\\r?\\n|\\r)/g;\n  let match;\n  while ((match = regex.exec(input)) != null) {\n    const [line, indent] = match;\n\n    // The last match will always have length 0. In every other case, some\n    // characters will be matched (possibly only the end of line chars).\n    if (line.length === 0) break;\n\n    const indentSize = indent.length;\n    const prevSize = topOfStack();\n\n    const indentPos = pos + indentSize;\n\n    if (indentSize > prevSize) {\n      // Indent -- always only 1.\n      stack.push(indentSize);\n      result[indentPos] = 1;\n    } else if (indentSize < prevSize) {\n      // Dedent -- can be multiple levels.\n      const prevLength = stack.length;\n      while (topOfStack() !== indentSize) {\n        stack.pop();\n      }\n      result[indentPos] = -1 * (prevLength - stack.length);\n    }\n    pos += line.length;\n  }\n  // Ensure that there is a matching DEDENT for every remaining INDENT.\n  if (stack.length > 1) {\n    result[pos] = 1 - stack.length;\n  }\n  return result;\n}\n", "import BuiltInRules from '../dist/built-in-rules.js';\nimport {Builder} from '../src/Builder.js';\nimport {Failure} from '../src/Failure.js';\nimport {TerminalNode} from '../src/nodes.js';\nimport * as pexprs from '../src/pexprs.js';\nimport {findIndentation} from './findIndentation.js';\nimport {InputStream} from './InputStream.js';\n\nconst INDENT_DESCRIPTION = 'an indented block';\nconst DEDENT_DESCRIPTION = 'a dedent';\n\n// A sentinel value that is out of range for both charCodeAt() and codePointAt().\nconst INVALID_CODE_POINT = 0x10ffff + 1;\n\nclass InputStreamWithIndentation extends InputStream {\n  constructor(state) {\n    super(state.input);\n    this.state = state;\n  }\n\n  _indentationAt(pos) {\n    return this.state.userData[pos] || 0;\n  }\n\n  atEnd() {\n    return super.atEnd() && this._indentationAt(this.pos) === 0;\n  }\n\n  next() {\n    if (this._indentationAt(this.pos) !== 0) {\n      this.examinedLength = Math.max(this.examinedLength, this.pos);\n      return undefined;\n    }\n    return super.next();\n  }\n\n  nextCharCode() {\n    if (this._indentationAt(this.pos) !== 0) {\n      this.examinedLength = Math.max(this.examinedLength, this.pos);\n      return INVALID_CODE_POINT;\n    }\n    return super.nextCharCode();\n  }\n\n  nextCodePoint() {\n    if (this._indentationAt(this.pos) !== 0) {\n      this.examinedLength = Math.max(this.examinedLength, this.pos);\n      return INVALID_CODE_POINT;\n    }\n    return super.nextCodePoint();\n  }\n}\n\nclass Indentation extends pexprs.PExpr {\n  constructor(isIndent = true) {\n    super();\n    this.isIndent = isIndent;\n  }\n\n  allowsSkippingPrecedingSpace() {\n    return true;\n  }\n\n  eval(state) {\n    const {inputStream} = state;\n    const pseudoTokens = state.userData;\n    state.doNotMemoize = true;\n\n    const origPos = inputStream.pos;\n\n    const sign = this.isIndent ? 1 : -1;\n    const count = (pseudoTokens[origPos] || 0) * sign;\n    if (count > 0) {\n      // Update the count to consume the pseudotoken.\n      state.userData = Object.create(pseudoTokens);\n      state.userData[origPos] -= sign;\n\n      state.pushBinding(new TerminalNode(0), origPos);\n      return true;\n    } else {\n      state.processFailure(origPos, this);\n      return false;\n    }\n  }\n\n  getArity() {\n    return 1;\n  }\n\n  _assertAllApplicationsAreValid(ruleName, grammar) {}\n\n  _isNullable(grammar, memo) {\n    return false;\n  }\n\n  assertChoicesHaveUniformArity(ruleName) {}\n\n  assertIteratedExprsAreNotNullable(grammar) {}\n\n  introduceParams(formals) {\n    return this;\n  }\n\n  substituteParams(actuals) {\n    return this;\n  }\n\n  toString() {\n    return this.isIndent ? 'indent' : 'dedent';\n  }\n\n  toDisplayString() {\n    return this.toString();\n  }\n\n  toFailure(grammar) {\n    const description = this.isIndent ? INDENT_DESCRIPTION : DEDENT_DESCRIPTION;\n    return new Failure(this, description, 'description');\n  }\n}\n\n// Create a new definition for `any` that can consume indent & dedent.\nconst applyIndent = new pexprs.Apply('indent');\nconst applyDedent = new pexprs.Apply('dedent');\nconst newAnyBody = new pexprs.Splice(BuiltInRules, 'any', [applyIndent, applyDedent], []);\n\nexport const IndentationSensitive = new Builder()\n  .newGrammar('IndentationSensitive')\n  .withSuperGrammar(BuiltInRules)\n  .define('indent', [], new Indentation(true), INDENT_DESCRIPTION, undefined, true)\n  .define('dedent', [], new Indentation(false), DEDENT_DESCRIPTION, undefined, true)\n  .extend('any', [], newAnyBody, 'any character', undefined)\n  .build();\n\nObject.assign(IndentationSensitive, {\n  _matchStateInitializer(state) {\n    state.userData = findIndentation(state.input);\n    state.inputStream = new InputStreamWithIndentation(state);\n  },\n  supportsIncrementalParsing: false,\n});\n", "import ohmGrammar from '../dist/ohm-grammar.js';\nimport {buildGrammar} from './buildGrammar.js';\nimport * as common from './common.js';\nimport * as errors from './errors.js';\nimport {Grammar} from './Grammar.js';\nimport * as pexprs from './pexprs.js';\nimport * as util from './util.js';\n\n// Late initialization for stuff that is bootstrapped.\n\nimport './semanticsDeferredInit.js'; // TODO: Clean this up.\nGrammar.initApplicationParser(ohmGrammar, buildGrammar);\n\nconst isBuffer = obj =>\n  !!obj.constructor &&\n  typeof obj.constructor.isBuffer === 'function' &&\n  obj.constructor.isBuffer(obj);\n\nfunction compileAndLoad(source, namespace) {\n  const m = ohmGrammar.match(source, 'Grammars');\n  if (m.failed()) {\n    throw errors.grammarSyntaxError(m);\n  }\n  return buildGrammar(m, namespace);\n}\n\nexport function grammar(source, optNamespace) {\n  const ns = grammars(source, optNamespace);\n\n  // Ensure that the source contained no more than one grammar definition.\n  const grammarNames = Object.keys(ns);\n  if (grammarNames.length === 0) {\n    throw new Error('Missing grammar definition');\n  } else if (grammarNames.length > 1) {\n    const secondGrammar = ns[grammarNames[1]];\n    const interval = secondGrammar.source;\n    throw new Error(\n      util.getLineAndColumnMessage(interval.sourceString, interval.startIdx) +\n        'Found more than one grammar definition -- use ohm.grammars() instead.'\n    );\n  }\n  return ns[grammarNames[0]]; // Return the one and only grammar.\n}\n\nexport function grammars(source, optNamespace) {\n  const ns = Object.create(optNamespace || {});\n  if (typeof source !== 'string') {\n    // For convenience, detect Node.js Buffer objects and automatically call toString().\n    if (isBuffer(source)) {\n      source = source.toString();\n    } else {\n      throw new TypeError(\n        'Expected string as first argument, got ' + common.unexpectedObjToString(source)\n      );\n    }\n  }\n  compileAndLoad(source, ns);\n  return ns;\n}\n\n// This is used by ohm-editor to instantiate grammars after incremental\n// parsing, which is not otherwise supported in the public API.\nexport {buildGrammar as _buildGrammar};\n\nexport * from './main-kernel.js';\nexport {IndentationSensitive as ExperimentalIndentationSensitive} from './IndentationSensitive.js';\nexport {ohmGrammar};\nexport {pexprs};\nexport {version} from './version.js';\n", "// Auto-generated from platformer.ohm \u2014 do not edit directly.\n// Run: npx tsx scripts/generate-grammar-source.ts\n\nexport const grammarSource = \"PlatformerDSL {\\n  // \u2500\u2500\u2500 Top-Level \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\\n\\n  Game = \\\"game\\\" string \\\"{\\\" GameBlock+ \\\"}\\\"\\n\\n  GameBlock = ConfigBlock\\n            | AssetsBlock\\n            | PlayerBlock\\n            | EnemyBlock\\n            | CollectibleBlock\\n            | LevelBlock\\n            | HudBlock\\n            | RulesBlock\\n            | SoundsBlock\\n\\n  // \u2500\u2500\u2500 Config \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\\n\\n  ConfigBlock = \\\"config\\\" \\\"{\\\" ConfigProp (\\\",\\\" ConfigProp)* \\\",\\\"? \\\"}\\\"\\n\\n  ConfigProp = \\\"width\\\" \\\":\\\" number        -- width\\n             | \\\"height\\\" \\\":\\\" number       -- height\\n             | \\\"gravity\\\" \\\":\\\" number      -- gravity\\n             | \\\"background\\\" \\\":\\\" color    -- background\\n\\n  // \u2500\u2500\u2500 Assets \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\\n\\n  AssetsBlock = \\\"assets\\\" \\\"{\\\" AssetDef+ \\\"}\\\"\\n\\n  AssetDef = \\\"spritesheet\\\" ident string SpritesheetConfig  -- spritesheet\\n           | \\\"image\\\" ident string                          -- image\\n           | \\\"tilemap\\\" ident string                        -- tilemap\\n           | \\\"audio\\\" ident string                          -- audio\\n\\n  SpritesheetConfig = \\\"{\\\" \\\"frameWidth\\\" \\\":\\\" number \\\",\\\" \\\"frameHeight\\\" \\\":\\\" number \\\",\\\"? \\\"}\\\"\\n\\n  // \u2500\u2500\u2500 Player \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\\n\\n  PlayerBlock = \\\"player\\\" \\\"{\\\" PlayerProp (\\\",\\\"? PlayerProp)* \\\",\\\"? \\\"}\\\"\\n\\n  PlayerProp = \\\"sprite\\\" \\\":\\\" ident                     -- sprite\\n             | \\\"speed\\\" \\\":\\\" number                     -- speed\\n             | \\\"jumpForce\\\" \\\":\\\" number                 -- jumpForce\\n             | \\\"lives\\\" \\\":\\\" number                     -- lives\\n             | \\\"controls\\\" \\\":\\\" controlScheme           -- controls\\n             | AnimationBlock                         -- animation\\n\\n  controlScheme = \\\"arrows\\\" | \\\"wasd\\\" | \\\"both\\\"\\n\\n  // \u2500\u2500\u2500 Enemies \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\\n\\n  EnemyBlock = \\\"enemy\\\" ident \\\"{\\\" EnemyProp (\\\",\\\"? EnemyProp)* \\\",\\\"? \\\"}\\\"\\n\\n  EnemyProp = \\\"sprite\\\" \\\":\\\" ident              -- sprite\\n            | \\\"movement\\\" \\\":\\\" MovementDef      -- movement\\n            | \\\"damage\\\" \\\":\\\" number             -- damage\\n            | \\\"stompable\\\" \\\":\\\" boolean         -- stompable\\n            | AnimationBlock                  -- animation\\n\\n  MovementDef = \\\"patrol\\\" \\\"{\\\" MovementParam (\\\",\\\" MovementParam)* \\\",\\\"? \\\"}\\\"  -- patrol\\n              | \\\"chase\\\" \\\"{\\\" MovementParam (\\\",\\\" MovementParam)* \\\",\\\"? \\\"}\\\"   -- chase\\n              | \\\"fly\\\" \\\"{\\\" MovementParam (\\\",\\\" MovementParam)* \\\",\\\"? \\\"}\\\"     -- fly\\n              | \\\"static\\\"                                                   -- static\\n\\n  MovementParam = \\\"speed\\\" \\\":\\\" number       -- speed\\n                | \\\"distance\\\" \\\":\\\" number    -- distance\\n                | \\\"range\\\" \\\":\\\" number       -- range\\n                | \\\"amplitude\\\" \\\":\\\" number   -- amplitude\\n                | \\\"frequency\\\" \\\":\\\" number   -- frequency\\n\\n  // \u2500\u2500\u2500 Collectibles \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\\n\\n  CollectibleBlock = \\\"collectible\\\" ident \\\"{\\\" CollectibleProp (\\\",\\\"? CollectibleProp)* \\\",\\\"? \\\"}\\\"\\n\\n  CollectibleProp = \\\"sprite\\\" \\\":\\\" ident              -- sprite\\n                  | \\\"score\\\" \\\":\\\" number              -- score\\n                  | \\\"effect\\\" \\\":\\\" collectibleEffect  -- effect\\n                  | AnimationBlock                  -- animation\\n\\n  collectibleEffect = \\\"extraLife\\\" | \\\"speedBoost\\\" | \\\"invincible\\\" | \\\"none\\\"\\n\\n  // \u2500\u2500\u2500 Levels \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\\n\\n  LevelBlock = \\\"level\\\" string \\\"{\\\" LevelProp+ \\\"}\\\"\\n\\n  LevelProp = \\\"tilemap\\\" \\\":\\\" ident                                   -- tilemap\\n            | \\\"layers\\\" \\\":\\\" \\\"{\\\" LayerMapping (\\\",\\\" LayerMapping)* \\\",\\\"? \\\"}\\\"  -- layers\\n            | \\\"spawn\\\" \\\":\\\" \\\"{\\\" \\\"x\\\" \\\":\\\" number \\\",\\\" \\\"y\\\" \\\":\\\" number \\\"}\\\"      -- spawn\\n            | \\\"enemies\\\" \\\":\\\" \\\"[\\\" ListOf<EntityPlacement, \\\",\\\"> \\\"]\\\"         -- enemies\\n            | \\\"coins\\\" \\\":\\\" \\\"[\\\" ListOf<EntityPlacement, \\\",\\\"> \\\"]\\\"           -- coins\\n            | \\\"platforms\\\" \\\":\\\" \\\"[\\\" ListOf<PlatformPlacement, \\\",\\\"> \\\"]\\\"     -- platforms\\n            | \\\"exit\\\" \\\":\\\" \\\"{\\\" \\\"x\\\" \\\":\\\" number \\\",\\\" \\\"y\\\" \\\":\\\" number \\\"}\\\"       -- exit\\n\\n  LayerMapping = ident \\\":\\\" string\\n\\n  EntityPlacement = ident \\\"at\\\" \\\"(\\\" number \\\",\\\" number \\\")\\\"\\n\\n  PlatformPlacement = ident \\\"at\\\" \\\"(\\\" number \\\",\\\" number \\\",\\\" number \\\",\\\" number \\\")\\\"\\n\\n  // \u2500\u2500\u2500 HUD \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\\n\\n  HudBlock = \\\"hud\\\" \\\"{\\\" HudElement+ \\\"}\\\"\\n\\n  HudElement = hudType \\\"{\\\" HudProp (\\\",\\\" HudProp)* \\\",\\\"? \\\"}\\\"\\n\\n  hudType = \\\"score\\\" | \\\"lives\\\" | \\\"timer\\\"\\n\\n  HudProp = \\\"position\\\" \\\":\\\" hudPosition    -- position\\n          | \\\"fontSize\\\" \\\":\\\" number         -- fontSize\\n          | \\\"color\\\" \\\":\\\" color             -- color\\n          | \\\"max\\\" \\\":\\\" number              -- max\\n\\n  hudPosition = \\\"top-left\\\" | \\\"top-right\\\" | \\\"top-center\\\"\\n              | \\\"bottom-left\\\" | \\\"bottom-right\\\" | \\\"bottom-center\\\"\\n\\n  // \u2500\u2500\u2500 Rules \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\\n\\n  RulesBlock = \\\"rules\\\" \\\"{\\\" RuleProp (\\\",\\\" RuleProp)* \\\",\\\"? \\\"}\\\"\\n\\n  RuleProp = \\\"win\\\" \\\":\\\" WinCondition        -- win\\n           | \\\"lose\\\" \\\":\\\" LoseCondition      -- lose\\n           | \\\"nextLevel\\\" \\\":\\\" string        -- nextLevel\\n\\n  WinCondition = \\\"reachExit\\\"                          -- reachExit\\n               | \\\"collectAll\\\" ident                   -- collectAll\\n               | \\\"defeatAll\\\"                          -- defeatAll\\n               | \\\"survive\\\" number                     -- survive\\n\\n  LoseCondition = \\\"noLives\\\"        -- noLives\\n                | \\\"timerExpires\\\"    -- timerExpires\\n                | \\\"fallOff\\\"        -- fallOff\\n\\n  // \u2500\u2500\u2500 Sounds \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\\n\\n  SoundsBlock = \\\"sounds\\\" \\\"{\\\" SoundProp (\\\",\\\"? SoundProp)* \\\",\\\"? \\\"}\\\"\\n\\n  SoundProp = \\\"jump\\\" \\\":\\\" ident      -- jump\\n            | \\\"collect\\\" \\\":\\\" ident   -- collect\\n            | \\\"hurt\\\" \\\":\\\" ident      -- hurt\\n            | \\\"win\\\" \\\":\\\" ident       -- win\\n            | \\\"lose\\\" \\\":\\\" ident      -- lose\\n            | \\\"bgm\\\" \\\":\\\" ident       -- bgm\\n\\n  // \u2500\u2500\u2500 Animations \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\\n\\n  AnimationBlock = \\\"animation\\\" ident \\\"{\\\" AnimProp (\\\",\\\" AnimProp)* \\\",\\\"? \\\"}\\\"\\n\\n  AnimProp = \\\"frames\\\" \\\":\\\" \\\"[\\\" ListOf<number, \\\",\\\"> \\\"]\\\"  -- frames\\n           | \\\"fps\\\" \\\":\\\" number                          -- fps\\n           | \\\"loop\\\" \\\":\\\" boolean                        -- loop\\n\\n  // \u2500\u2500\u2500 Lexical Rules \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\\n\\n  ident = ~reserved letter (alnum | \\\"_\\\")*\\n\\n  reserved = (\\\"game\\\" | \\\"config\\\" | \\\"assets\\\" | \\\"player\\\" | \\\"enemy\\\"\\n            | \\\"collectible\\\" | \\\"level\\\" | \\\"hud\\\" | \\\"rules\\\" | \\\"sounds\\\"\\n            | \\\"animation\\\" | \\\"true\\\" | \\\"false\\\" | \\\"at\\\"\\n            | \\\"spritesheet\\\" | \\\"image\\\" | \\\"tilemap\\\" | \\\"audio\\\"\\n            | \\\"patrol\\\" | \\\"chase\\\" | \\\"fly\\\" | \\\"static\\\"\\n            | \\\"reachExit\\\" | \\\"collectAll\\\" | \\\"defeatAll\\\" | \\\"survive\\\"\\n            | \\\"noLives\\\" | \\\"timerExpires\\\" | \\\"fallOff\\\"\\n            | \\\"extraLife\\\" | \\\"speedBoost\\\" | \\\"invincible\\\" | \\\"none\\\"\\n            | \\\"arrows\\\" | \\\"wasd\\\" | \\\"both\\\"\\n            | \\\"score\\\" | \\\"lives\\\" | \\\"timer\\\") ~(alnum | \\\"_\\\")\\n\\n  string = \\\"\\\\\\\"\\\" stringChar* \\\"\\\\\\\"\\\"\\n  stringChar = escapeChar | normalChar\\n  escapeChar = \\\"\\\\\\\\\\\" any\\n  normalChar = ~(\\\"\\\\\\\"\\\" | \\\"\\\\\\\\\\\") any\\n\\n  number = \\\"-\\\"? digit+ (\\\".\\\" digit+)?\\n\\n  boolean = \\\"true\\\" | \\\"false\\\"\\n\\n  color = \\\"#\\\" hexDigit hexDigit hexDigit hexDigit hexDigit hexDigit\\n\\n  // \u2500\u2500\u2500 Whitespace & Comments \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\\n\\n  space += comment\\n\\n  comment = \\\"//\\\" (~\\\"\\\\n\\\" any)* &(\\\"\\\\n\\\" | end)   -- singleLine\\n          | \\\"/*\\\" (~\\\"*/\\\" any)* \\\"*/\\\"             -- multiLine\\n}\\n\";\n", "import * as ohm from 'ohm-js';\nimport { grammarSource } from './grammarSource.js';\n\nexport const grammar = ohm.grammar(grammarSource);\n", "export class DSLError extends Error {\n  constructor(\n    message: string,\n    public readonly phase: 'parse' | 'semantic' | 'validate' | 'generate',\n    public readonly details?: string\n  ) {\n    super(`[${phase}] ${message}`);\n    this.name = 'DSLError';\n  }\n}\n\nexport class ParseError extends DSLError {\n  constructor(message: string, details?: string) {\n    super(message, 'parse', details);\n    this.name = 'ParseError';\n  }\n}\n\nexport class ValidationError extends DSLError {\n  constructor(message: string, details?: string) {\n    super(message, 'validate', details);\n    this.name = 'ValidationError';\n  }\n}\n\nexport class GeneratorError extends DSLError {\n  constructor(message: string, details?: string) {\n    super(message, 'generate', details);\n    this.name = 'GeneratorError';\n  }\n}\n", "import { grammar } from '../grammar/index.js';\nimport { ParseError } from '../utils/errors.js';\nimport type { ParseResult } from './types.js';\n\nexport function parse(source: string): ParseResult {\n  const match = grammar.match(source);\n  if (match.failed()) {\n    return {\n      match,\n      succeeded: false,\n      message: match.message,\n    };\n  }\n  return { match, succeeded: true };\n}\n\nexport function parseOrThrow(source: string) {\n  const result = parse(source);\n  if (!result.succeeded) {\n    throw new ParseError('Failed to parse DSL source', result.message);\n  }\n  return result.match;\n}\n", "/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { grammar } from '../grammar/index.js';\nimport type {\n  GameAST,\n  GameConfig,\n  AssetDef,\n  PlayerDef,\n  EnemyDef,\n  CollectibleDef,\n  LevelDef,\n  HudDef,\n  HudElementDef,\n  RulesDef,\n  SoundsDef,\n  AnimationDef,\n  MovementPattern,\n  WinCondition,\n  LoseCondition,\n  EntityPlacement,\n  PlatformDef,\n  ControlScheme,\n  CollectibleEffect,\n  HudPosition,\n  SpritesheetConfig,\n} from '../ast/types.js';\n\n// Ohm semantic action nodes are dynamically typed.\n// We use `any` for node parameters since `.toAST()` is added at runtime.\ntype N = any;\n\nconst semantics = grammar.createSemantics();\n\n// \u2500\u2500\u2500 Helper: collect properties from a list of nodes \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\ntype PropBag = Record<string, unknown>;\n\nfunction collectProps(nodes: N[]): PropBag {\n  const bag: PropBag = {};\n  for (const node of nodes) {\n    const result = node.toAST() as PropBag;\n    for (const [key, value] of Object.entries(result)) {\n      if (Array.isArray(value) && Array.isArray(bag[key])) {\n        bag[key] = [...(bag[key] as unknown[]), ...value];\n      } else {\n        bag[key] = value;\n      }\n    }\n  }\n  return bag;\n}\n\n// \u2500\u2500\u2500 Semantic Actions \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nsemantics.addOperation<unknown>('toAST', {\n  // \u2500\u2500\u2500 Top Level \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  Game(_game: N, title: N, _lb: N, blocks: N, _rb: N) {\n    const gameTitle = title.toAST() as string;\n    let config: Partial<GameConfig> = {};\n    const assets: AssetDef[] = [];\n    let player: Partial<PlayerDef> | undefined;\n    const enemies: EnemyDef[] = [];\n    const collectibles: CollectibleDef[] = [];\n    const levels: LevelDef[] = [];\n    let hud: HudDef | undefined;\n    let rules: RulesDef | undefined;\n    let sounds: SoundsDef | undefined;\n\n    for (const block of blocks.children) {\n      const result = block.toAST() as { __block: string; value: unknown };\n      switch (result.__block) {\n        case 'config':\n          config = result.value as GameConfig;\n          break;\n        case 'assets':\n          assets.push(...(result.value as AssetDef[]));\n          break;\n        case 'player':\n          player = result.value as PlayerDef;\n          break;\n        case 'enemy':\n          enemies.push(result.value as EnemyDef);\n          break;\n        case 'collectible':\n          collectibles.push(result.value as CollectibleDef);\n          break;\n        case 'level':\n          levels.push(result.value as LevelDef);\n          break;\n        case 'hud':\n          hud = result.value as HudDef;\n          break;\n        case 'rules':\n          rules = result.value as RulesDef;\n          break;\n        case 'sounds':\n          sounds = result.value as SoundsDef;\n          break;\n      }\n    }\n\n    return { title: gameTitle, config, assets, player, enemies, collectibles, levels, hud, rules, sounds };\n  },\n\n  GameBlock(block: N) {\n    return block.toAST();\n  },\n\n  // \u2500\u2500\u2500 Config \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  ConfigBlock(_config: N, _lb: N, first: N, _commas: N, rest: N, _trailing: N, _rb: N) {\n    const props = collectProps([first, ...rest.children]);\n    return { __block: 'config', value: props };\n  },\n\n  ConfigProp_width(_key: N, _colon: N, val: N) {\n    return { width: val.toAST() };\n  },\n  ConfigProp_height(_key: N, _colon: N, val: N) {\n    return { height: val.toAST() };\n  },\n  ConfigProp_gravity(_key: N, _colon: N, val: N) {\n    return { gravity: val.toAST() };\n  },\n  ConfigProp_background(_key: N, _colon: N, val: N) {\n    return { background: val.toAST() };\n  },\n\n  // \u2500\u2500\u2500 Assets \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  AssetsBlock(_assets: N, _lb: N, defs: N, _rb: N) {\n    const assetList = defs.children.map((d: N) => d.toAST() as AssetDef);\n    return { __block: 'assets', value: assetList };\n  },\n\n  AssetDef_spritesheet(_kw: N, key: N, path: N, config: N) {\n    return {\n      type: 'spritesheet' as const,\n      key: key.toAST() as string,\n      path: path.toAST() as string,\n      config: config.toAST() as SpritesheetConfig,\n    };\n  },\n  AssetDef_image(_kw: N, key: N, path: N) {\n    return {\n      type: 'image' as const,\n      key: key.toAST() as string,\n      path: path.toAST() as string,\n    };\n  },\n  AssetDef_tilemap(_kw: N, key: N, path: N) {\n    return {\n      type: 'tilemap' as const,\n      key: key.toAST() as string,\n      path: path.toAST() as string,\n    };\n  },\n  AssetDef_audio(_kw: N, key: N, path: N) {\n    return {\n      type: 'audio' as const,\n      key: key.toAST() as string,\n      path: path.toAST() as string,\n    };\n  },\n\n  SpritesheetConfig(_lb: N, _fwKey: N, _c1: N, fw: N, _comma: N, _fhKey: N, _c2: N, fh: N, _trailing: N, _rb: N) {\n    return {\n      frameWidth: fw.toAST() as number,\n      frameHeight: fh.toAST() as number,\n    };\n  },\n\n  // \u2500\u2500\u2500 Player \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  PlayerBlock(_player: N, _lb: N, first: N, _commas: N, rest: N, _trailing: N, _rb: N) {\n    const props = collectProps([first, ...rest.children]);\n    const animations = (props.animations || []) as AnimationDef[];\n    delete props.animations;\n    return { __block: 'player', value: { ...props, animations } };\n  },\n\n  PlayerProp_sprite(_key: N, _colon: N, val: N) { return { sprite: val.toAST() }; },\n  PlayerProp_speed(_key: N, _colon: N, val: N) { return { speed: val.toAST() }; },\n  PlayerProp_jumpForce(_key: N, _colon: N, val: N) { return { jumpForce: val.toAST() }; },\n  PlayerProp_lives(_key: N, _colon: N, val: N) { return { lives: val.toAST() }; },\n  PlayerProp_controls(_key: N, _colon: N, val: N) { return { controls: val.toAST() }; },\n  PlayerProp_animation(animBlock: N) {\n    return { animations: [animBlock.toAST() as AnimationDef] };\n  },\n\n  // \u2500\u2500\u2500 Enemies \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  EnemyBlock(_enemy: N, name: N, _lb: N, first: N, _commas: N, rest: N, _trailing: N, _rb: N) {\n    const props = collectProps([first, ...rest.children]);\n    const animations = (props.animations || []) as AnimationDef[];\n    delete props.animations;\n    return { __block: 'enemy', value: { name: name.toAST(), ...props, animations } };\n  },\n\n  EnemyProp_sprite(_key: N, _colon: N, val: N) { return { sprite: val.toAST() }; },\n  EnemyProp_movement(_key: N, _colon: N, val: N) { return { movement: val.toAST() }; },\n  EnemyProp_damage(_key: N, _colon: N, val: N) { return { damage: val.toAST() }; },\n  EnemyProp_stompable(_key: N, _colon: N, val: N) { return { stompable: val.toAST() }; },\n  EnemyProp_animation(animBlock: N) {\n    return { animations: [animBlock.toAST() as AnimationDef] };\n  },\n\n  MovementDef_patrol(_kw: N, _lb: N, first: N, _commas: N, rest: N, _trailing: N, _rb: N) {\n    return { kind: 'patrol', ...collectProps([first, ...rest.children]) } as MovementPattern;\n  },\n  MovementDef_chase(_kw: N, _lb: N, first: N, _commas: N, rest: N, _trailing: N, _rb: N) {\n    return { kind: 'chase', ...collectProps([first, ...rest.children]) } as MovementPattern;\n  },\n  MovementDef_fly(_kw: N, _lb: N, first: N, _commas: N, rest: N, _trailing: N, _rb: N) {\n    return { kind: 'fly', ...collectProps([first, ...rest.children]) } as MovementPattern;\n  },\n  MovementDef_static(_kw: N) {\n    return { kind: 'static' } as MovementPattern;\n  },\n\n  MovementParam_speed(_key: N, _colon: N, val: N) { return { speed: val.toAST() }; },\n  MovementParam_distance(_key: N, _colon: N, val: N) { return { distance: val.toAST() }; },\n  MovementParam_range(_key: N, _colon: N, val: N) { return { range: val.toAST() }; },\n  MovementParam_amplitude(_key: N, _colon: N, val: N) { return { amplitude: val.toAST() }; },\n  MovementParam_frequency(_key: N, _colon: N, val: N) { return { frequency: val.toAST() }; },\n\n  // \u2500\u2500\u2500 Collectibles \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  CollectibleBlock(_coll: N, name: N, _lb: N, first: N, _commas: N, rest: N, _trailing: N, _rb: N) {\n    const props = collectProps([first, ...rest.children]);\n    const animations = (props.animations || []) as AnimationDef[];\n    delete props.animations;\n    return { __block: 'collectible', value: { name: name.toAST(), effect: 'none', ...props, animations } };\n  },\n\n  CollectibleProp_sprite(_key: N, _colon: N, val: N) { return { sprite: val.toAST() }; },\n  CollectibleProp_score(_key: N, _colon: N, val: N) { return { score: val.toAST() }; },\n  CollectibleProp_effect(_key: N, _colon: N, val: N) { return { effect: val.toAST() }; },\n  CollectibleProp_animation(animBlock: N) {\n    return { animations: [animBlock.toAST() as AnimationDef] };\n  },\n\n  // \u2500\u2500\u2500 Levels \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  LevelBlock(_level: N, name: N, _lb: N, props: N, _rb: N) {\n    const bag = collectProps(props.children);\n    return {\n      __block: 'level',\n      value: {\n        name: name.toAST() as string,\n        enemies: [] as EntityPlacement[],\n        collectibles: [] as EntityPlacement[],\n        platforms: [] as any[],\n        ...bag,\n      },\n    };\n  },\n\n  LevelProp_tilemap(_key: N, _colon: N, val: N) { return { tilemap: val.toAST() }; },\n  LevelProp_layers(_key: N, _colon: N, _lb: N, first: N, _commas: N, rest: N, _trailing: N, _rb: N) {\n    const layers: Record<string, string> = {};\n    const firstMapping = first.toAST() as [string, string];\n    layers[firstMapping[0]] = firstMapping[1];\n    for (const child of rest.children) {\n      const mapping = (child as N).toAST() as [string, string];\n      layers[mapping[0]] = mapping[1];\n    }\n    return { layers };\n  },\n  LevelProp_spawn(_key: N, _colon: N, _lb: N, _xk: N, _xc: N, x: N, _comma: N, _yk: N, _yc: N, y: N, _rb: N) {\n    return { spawn: { x: x.toAST() as number, y: y.toAST() as number } };\n  },\n  LevelProp_enemies(_key: N, _colon: N, _lb: N, list: N, _rb: N) {\n    return { enemies: list.toAST() };\n  },\n  LevelProp_coins(_key: N, _colon: N, _lb: N, list: N, _rb: N) {\n    return { collectibles: list.toAST() };\n  },\n  LevelProp_platforms(_key: N, _colon: N, _lb: N, list: N, _rb: N) {\n    return { platforms: list.toAST() };\n  },\n  LevelProp_exit(_key: N, _colon: N, _lb: N, _xk: N, _xc: N, x: N, _comma: N, _yk: N, _yc: N, y: N, _rb: N) {\n    return { exit: { x: x.toAST() as number, y: y.toAST() as number } };\n  },\n\n  LayerMapping(key: N, _colon: N, val: N) {\n    return [key.toAST(), val.toAST()];\n  },\n\n  EntityPlacement(entity: N, _at: N, _lp: N, x: N, _comma: N, y: N, _rp: N) {\n    return { entity: entity.toAST(), x: x.toAST(), y: y.toAST() } as EntityPlacement;\n  },\n\n  PlatformPlacement(asset: N, _at: N, _lp: N, x: N, _c1: N, y: N, _c2: N, w: N, _c3: N, h: N, _rp: N) {\n    return { asset: asset.toAST(), x: x.toAST(), y: y.toAST(), width: w.toAST(), height: h.toAST() } as PlatformDef;\n  },\n\n  // \u2500\u2500\u2500 HUD \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  HudBlock(_hud: N, _lb: N, elements: N, _rb: N) {\n    return {\n      __block: 'hud',\n      value: { elements: elements.children.map((e: N) => e.toAST()) } as HudDef,\n    };\n  },\n\n  HudElement(type: N, _lb: N, first: N, _commas: N, rest: N, _trailing: N, _rb: N) {\n    const props = collectProps([first, ...rest.children]);\n    return { type: type.toAST() as string, ...props } as HudElementDef;\n  },\n\n  hudType(_node: N) {\n    return this.sourceString;\n  },\n\n  HudProp_position(_key: N, _colon: N, val: N) { return { position: val.toAST() }; },\n  HudProp_fontSize(_key: N, _colon: N, val: N) { return { fontSize: val.toAST() }; },\n  HudProp_color(_key: N, _colon: N, val: N) { return { color: val.toAST() }; },\n  HudProp_max(_key: N, _colon: N, val: N) { return { max: val.toAST() }; },\n\n  hudPosition(_node: N) {\n    return this.sourceString as HudPosition;\n  },\n\n  // \u2500\u2500\u2500 Rules \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  RulesBlock(_rules: N, _lb: N, first: N, _commas: N, rest: N, _trailing: N, _rb: N) {\n    const props = collectProps([first, ...rest.children]);\n    return { __block: 'rules', value: props };\n  },\n\n  RuleProp_win(_key: N, _colon: N, cond: N) { return { win: cond.toAST() }; },\n  RuleProp_lose(_key: N, _colon: N, cond: N) { return { lose: cond.toAST() }; },\n  RuleProp_nextLevel(_key: N, _colon: N, val: N) { return { nextLevel: val.toAST() }; },\n\n  WinCondition_reachExit(_kw: N) { return { kind: 'reachExit' } as WinCondition; },\n  WinCondition_collectAll(_kw: N, entity: N) { return { kind: 'collectAll', entity: entity.toAST() } as WinCondition; },\n  WinCondition_defeatAll(_kw: N) { return { kind: 'defeatAll' } as WinCondition; },\n  WinCondition_survive(_kw: N, seconds: N) { return { kind: 'survive', seconds: seconds.toAST() } as WinCondition; },\n\n  LoseCondition_noLives(_kw: N) { return { kind: 'noLives' } as LoseCondition; },\n  LoseCondition_timerExpires(_kw: N) { return { kind: 'timerExpires' } as LoseCondition; },\n  LoseCondition_fallOff(_kw: N) { return { kind: 'fallOff' } as LoseCondition; },\n\n  // \u2500\u2500\u2500 Sounds \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  SoundsBlock(_sounds: N, _lb: N, first: N, _commas: N, rest: N, _trailing: N, _rb: N) {\n    const props = collectProps([first, ...rest.children]);\n    return { __block: 'sounds', value: props };\n  },\n\n  SoundProp_jump(_key: N, _colon: N, val: N) { return { jump: val.toAST() }; },\n  SoundProp_collect(_key: N, _colon: N, val: N) { return { collect: val.toAST() }; },\n  SoundProp_hurt(_key: N, _colon: N, val: N) { return { hurt: val.toAST() }; },\n  SoundProp_win(_key: N, _colon: N, val: N) { return { win: val.toAST() }; },\n  SoundProp_lose(_key: N, _colon: N, val: N) { return { lose: val.toAST() }; },\n  SoundProp_bgm(_key: N, _colon: N, val: N) { return { bgm: val.toAST() }; },\n\n  // \u2500\u2500\u2500 Animations \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  AnimationBlock(_anim: N, name: N, _lb: N, first: N, _commas: N, rest: N, _trailing: N, _rb: N) {\n    const props = collectProps([first, ...rest.children]);\n    return { name: name.toAST() as string, loop: false, ...props } as AnimationDef;\n  },\n\n  AnimProp_frames(_key: N, _colon: N, _lb: N, list: N, _rb: N) { return { frames: list.toAST() }; },\n  AnimProp_fps(_key: N, _colon: N, val: N) { return { fps: val.toAST() }; },\n  AnimProp_loop(_key: N, _colon: N, val: N) { return { loop: val.toAST() }; },\n\n  // \u2500\u2500\u2500 Lexical \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  ident(this: N, _first: N, _rest: N) {\n    return this.sourceString;\n  },\n\n  string(_lq: N, chars: N, _rq: N) {\n    return chars.sourceString;\n  },\n\n  stringChar(node: N) { return node.sourceString; },\n  escapeChar(_bs: N, ch: N) { return ch.sourceString; },\n  normalChar(ch: N) { return ch.sourceString; },\n\n  number(this: N, _neg: N, _int: N, _dot: N, _frac: N) {\n    return parseFloat(this.sourceString);\n  },\n\n  boolean(val: N) {\n    return val.sourceString === 'true';\n  },\n\n  color(this: N, _hash: N, _h1: N, _h2: N, _h3: N, _h4: N, _h5: N, _h6: N) {\n    return this.sourceString;\n  },\n\n  controlScheme(_node: N) {\n    return this.sourceString as ControlScheme;\n  },\n\n  collectibleEffect(_node: N) {\n    return this.sourceString as CollectibleEffect;\n  },\n\n  // \u2500\u2500\u2500 ListOf (Ohm built-in) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  NonemptyListOf(first: N, _sep: N, rest: N) {\n    return [first.toAST(), ...rest.children.map((c: N) => c.toAST())];\n  },\n\n  EmptyListOf() {\n    return [];\n  },\n\n  // \u2500\u2500\u2500 Iteration \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  _iter(...children: N[]) {\n    return children.map((c: N) => c.toAST());\n  },\n\n  _terminal(this: N) {\n    return this.sourceString;\n  },\n});\n\nexport { semantics };\n\nexport function toAST(matchResult: ReturnType<typeof grammar.match>): Partial<GameAST> {\n  return (semantics(matchResult) as any).toAST() as Partial<GameAST>;\n}\n", "import type { GameAST } from './types.js';\nimport { ValidationError } from '../utils/errors.js';\n\nexport interface ValidationResult {\n  readonly valid: boolean;\n  readonly errors: readonly string[];\n}\n\n/** Validate a complete GameAST for reference integrity and consistency. */\nexport function validate(ast: Partial<GameAST>): ValidationResult {\n  const errors: string[] = [];\n\n  // Must have a title\n  if (!ast.title) {\n    errors.push('Game must have a title');\n  }\n\n  // Must have at least one level\n  if (!ast.levels || ast.levels.length === 0) {\n    errors.push('Game must define at least one level');\n  }\n\n  // Must have a player\n  if (!ast.player) {\n    errors.push('Game must define a player block');\n  }\n\n  // Build asset key set\n  const assetKeys = new Set((ast.assets ?? []).map((a) => a.key));\n\n  // Check player sprite reference\n  if (ast.player?.sprite && assetKeys.size > 0 && !assetKeys.has(ast.player.sprite)) {\n    errors.push(`Player references undefined asset: \"${ast.player.sprite}\"`);\n  }\n\n  // Build enemy/collectible name sets\n  const enemyNames = new Set((ast.enemies ?? []).map((e) => e.name));\n  const collectibleNames = new Set((ast.collectibles ?? []).map((c) => c.name));\n\n  // Check enemy sprite references\n  for (const enemy of ast.enemies ?? []) {\n    if (assetKeys.size > 0 && !assetKeys.has(enemy.sprite)) {\n      errors.push(`Enemy \"${enemy.name}\" references undefined asset: \"${enemy.sprite}\"`);\n    }\n  }\n\n  // Check collectible sprite references\n  for (const coll of ast.collectibles ?? []) {\n    if (assetKeys.size > 0 && !assetKeys.has(coll.sprite)) {\n      errors.push(`Collectible \"${coll.name}\" references undefined asset: \"${coll.sprite}\"`);\n    }\n  }\n\n  // Check level name uniqueness\n  const levelNames = new Set<string>();\n  for (const level of ast.levels ?? []) {\n    if (levelNames.has(level.name)) {\n      errors.push(`Duplicate level name: \"${level.name}\"`);\n    }\n    levelNames.add(level.name);\n\n    // Check tilemap reference\n    if (level.tilemap && assetKeys.size > 0 && !assetKeys.has(level.tilemap)) {\n      errors.push(`Level \"${level.name}\" references undefined tilemap: \"${level.tilemap}\"`);\n    }\n\n    // Check enemy placement references\n    for (const ep of level.enemies ?? []) {\n      if (!enemyNames.has(ep.entity)) {\n        errors.push(\n          `Level \"${level.name}\" places undefined enemy: \"${ep.entity}\"`\n        );\n      }\n    }\n\n    // Check collectible placement references\n    for (const cp of level.collectibles ?? []) {\n      if (!collectibleNames.has(cp.entity)) {\n        errors.push(\n          `Level \"${level.name}\" places undefined collectible: \"${cp.entity}\"`\n        );\n      }\n    }\n\n    // Tilemap + layers consistency\n    if (level.tilemap && (!level.layers || Object.keys(level.layers).length === 0)) {\n      errors.push(\n        `Level \"${level.name}\" has a tilemap but no layers defined`\n      );\n    }\n  }\n\n  // Check rules nextLevel reference\n  if (ast.rules?.nextLevel && !levelNames.has(ast.rules.nextLevel)) {\n    errors.push(`Rules reference undefined next level: \"${ast.rules.nextLevel}\"`);\n  }\n\n  // Check collectAll win condition entity reference\n  if (ast.rules?.win?.kind === 'collectAll') {\n    if (!collectibleNames.has(ast.rules.win.entity)) {\n      errors.push(\n        `Win condition \"collectAll\" references undefined collectible: \"${ast.rules.win.entity}\"`\n      );\n    }\n  }\n\n  // Check sound references\n  if (ast.sounds) {\n    for (const [key, value] of Object.entries(ast.sounds)) {\n      if (value && assetKeys.size > 0 && !assetKeys.has(value)) {\n        errors.push(`Sound \"${key}\" references undefined asset: \"${value}\"`);\n      }\n    }\n  }\n\n  return { valid: errors.length === 0, errors };\n}\n\n/** Validate and throw on first error. */\nexport function validateOrThrow(ast: Partial<GameAST>): void {\n  const result = validate(ast);\n  if (!result.valid) {\n    throw new ValidationError(\n      result.errors[0],\n      result.errors.join('\\n')\n    );\n  }\n}\n", "import type { GameConfig, PlayerDef } from '../ast/types.js';\n\nexport const DEFAULT_CONFIG: Required<Omit<GameConfig, 'background'>> & { background: string } = {\n  width: 800,\n  height: 600,\n  gravity: 500,\n  background: '#87CEEB',\n};\n\nexport const DEFAULT_PLAYER: Pick<PlayerDef, 'speed' | 'jumpForce' | 'lives' | 'controls'> = {\n  speed: 160,\n  jumpForce: 330,\n  lives: 3,\n  controls: 'arrows',\n};\n", "import type { GameAST, GameConfig, PlayerDef, EnemyDef, CollectibleDef } from './types.js';\nimport { DEFAULT_CONFIG, DEFAULT_PLAYER } from '../utils/defaults.js';\n\n/** Fill in default values for any omitted properties. */\nexport function applyDefaults(ast: Partial<GameAST>): GameAST {\n  return {\n    title: ast.title ?? 'Untitled Game',\n    config: fillConfigDefaults(ast.config),\n    assets: ast.assets ?? [],\n    player: fillPlayerDefaults(ast.player),\n    enemies: (ast.enemies ?? []).map(fillEnemyDefaults),\n    collectibles: (ast.collectibles ?? []).map(fillCollectibleDefaults),\n    levels: ast.levels ?? [],\n    hud: ast.hud,\n    rules: ast.rules ?? { win: { kind: 'reachExit' }, lose: { kind: 'noLives' } },\n    sounds: ast.sounds,\n  };\n}\n\nfunction fillConfigDefaults(config?: Partial<GameConfig>): GameConfig {\n  return {\n    width: config?.width ?? DEFAULT_CONFIG.width,\n    height: config?.height ?? DEFAULT_CONFIG.height,\n    gravity: config?.gravity ?? DEFAULT_CONFIG.gravity,\n    background: config?.background ?? DEFAULT_CONFIG.background,\n  };\n}\n\nfunction fillPlayerDefaults(player?: Partial<PlayerDef>): PlayerDef {\n  return {\n    sprite: player?.sprite ?? 'player',\n    speed: player?.speed ?? DEFAULT_PLAYER.speed,\n    jumpForce: player?.jumpForce ?? DEFAULT_PLAYER.jumpForce,\n    lives: player?.lives ?? DEFAULT_PLAYER.lives,\n    controls: player?.controls ?? DEFAULT_PLAYER.controls,\n    animations: player?.animations ?? [],\n  };\n}\n\nfunction fillEnemyDefaults(enemy: Partial<EnemyDef>): EnemyDef {\n  return {\n    name: enemy.name ?? 'enemy',\n    sprite: enemy.sprite ?? 'enemy',\n    movement: enemy.movement ?? { kind: 'static' },\n    damage: enemy.damage ?? 1,\n    stompable: enemy.stompable ?? false,\n    animations: enemy.animations ?? [],\n  };\n}\n\nfunction fillCollectibleDefaults(coll: Partial<CollectibleDef>): CollectibleDef {\n  return {\n    name: coll.name ?? 'item',\n    sprite: coll.sprite ?? 'item',\n    score: coll.score ?? 10,\n    effect: coll.effect ?? 'none',\n    animations: coll.animations ?? [],\n  };\n}\n", "/**\n * Fluent builder for generating indented code strings.\n * Builder pattern: each method returns `this` for chaining.\n */\nexport class CodeBuilder {\n  private lines: string[] = [];\n  private indentLevel = 0;\n  private indentStr = '  ';\n\n  indent(): this {\n    this.indentLevel++;\n    return this;\n  }\n\n  dedent(): this {\n    this.indentLevel = Math.max(0, this.indentLevel - 1);\n    return this;\n  }\n\n  line(text = ''): this {\n    if (text === '') {\n      this.lines.push('');\n    } else {\n      this.lines.push(this.indentStr.repeat(this.indentLevel) + text);\n    }\n    return this;\n  }\n\n  block(header: string, body: (b: CodeBuilder) => void): this {\n    this.line(`${header} {`);\n    this.indent();\n    body(this);\n    this.dedent();\n    this.line('}');\n    return this;\n  }\n\n  raw(code: string): this {\n    for (const line of code.split('\\n')) {\n      this.lines.push(line);\n    }\n    return this;\n  }\n\n  append(other: CodeBuilder): this {\n    for (const line of other.lines) {\n      this.lines.push(this.indentStr.repeat(this.indentLevel) + line);\n    }\n    return this;\n  }\n\n  toString(): string {\n    return this.lines.join('\\n');\n  }\n}\n", "import type { AssetDef } from '../ast/types.js';\n\n/** Resolve asset paths, potentially prefixing a base path. */\nexport function resolveAssetPath(asset: AssetDef, basePath = ''): string {\n  if (asset.path.startsWith('http://') || asset.path.startsWith('https://')) {\n    return asset.path;\n  }\n  return basePath ? `${basePath}/${asset.path}` : asset.path;\n}\n", "import { CodeBuilder } from '../codeBuilder.js';\nimport type { GameAST, AnimationDef } from '../../ast/types.js';\nimport { resolveAssetPath } from '../assetResolver.js';\n\n/** Generate the BootScene class that preloads all assets and creates animations. */\nexport function generatePreloadScene(ast: GameAST): string {\n  const b = new CodeBuilder();\n\n  b.block('class BootScene extends Phaser.Scene', (b) => {\n    b.block('constructor()', (b) => {\n      b.line(\"super({ key: 'BootScene' });\");\n    });\n    b.line();\n    b.block('preload()', (b) => {\n      for (const asset of ast.assets) {\n        const path = resolveAssetPath(asset);\n        switch (asset.type) {\n          case 'image':\n            b.line(`this.load.image('${asset.key}', '${path}');`);\n            break;\n          case 'spritesheet':\n            b.line(\n              `this.load.spritesheet('${asset.key}', '${path}', { frameWidth: ${asset.config!.frameWidth}, frameHeight: ${asset.config!.frameHeight} });`\n            );\n            break;\n          case 'tilemap':\n            b.line(`this.load.tilemapTiledJSON('${asset.key}', '${path}');`);\n            break;\n          case 'audio':\n            b.line(`this.load.audio('${asset.key}', '${path}');`);\n            break;\n        }\n      }\n    });\n    b.line();\n    b.block('create()', (b) => {\n      // Create all animations\n      const allAnims = collectAnimations(ast);\n      for (const { ownerKey, anim } of allAnims) {\n        b.line(`this.anims.create({`);\n        b.indent();\n        b.line(`key: '${ownerKey}_${anim.name}',`);\n        b.line(\n          `frames: this.anims.generateFrameNumbers('${ownerKey}', { frames: [${anim.frames.join(', ')}] }),`\n        );\n        b.line(`frameRate: ${anim.fps},`);\n        b.line(`repeat: ${anim.loop ? -1 : 0},`);\n        b.dedent();\n        b.line('});');\n      }\n      b.line();\n      // Start first level\n      if (ast.levels.length > 0) {\n        const firstSceneKey = sceneKey(ast.levels[0].name);\n        b.line(`this.scene.start('${firstSceneKey}');`);\n      }\n    });\n  });\n\n  return b.toString();\n}\n\nfunction sceneKey(name: string): string {\n  return 'Level_' + name.replace(/[^a-zA-Z0-9]/g, '_');\n}\n\ninterface AnimOwner {\n  ownerKey: string;\n  anim: AnimationDef;\n}\n\nfunction collectAnimations(ast: GameAST): AnimOwner[] {\n  const result: AnimOwner[] = [];\n\n  for (const anim of ast.player.animations) {\n    result.push({ ownerKey: ast.player.sprite, anim });\n  }\n  for (const enemy of ast.enemies) {\n    for (const anim of enemy.animations) {\n      result.push({ ownerKey: enemy.sprite, anim });\n    }\n  }\n  for (const coll of ast.collectibles) {\n    for (const anim of coll.animations) {\n      result.push({ ownerKey: coll.sprite, anim });\n    }\n  }\n\n  return result;\n}\n", "import { CodeBuilder } from '../codeBuilder.js';\nimport type { PlayerDef } from '../../ast/types.js';\n\n/** Generate player creation code inside a scene's create() method. */\nexport function generatePlayerCreate(player: PlayerDef, spawn: { x: number; y: number }): string {\n  const b = new CodeBuilder();\n\n  b.line(`this.player = this.physics.add.sprite(${spawn.x}, ${spawn.y}, '${player.sprite}');`);\n  b.line('this.player.setCollideWorldBounds(true);');\n  b.line(`this.player.setBounce(0.1);`);\n\n  return b.toString();\n}\n\n/** Generate player control/update code inside a scene's update() method. */\nexport function generatePlayerUpdate(player: PlayerDef): string {\n  const b = new CodeBuilder();\n\n  // Input references\n  const useArrows = player.controls === 'arrows' || player.controls === 'both';\n  const useWasd = player.controls === 'wasd' || player.controls === 'both';\n\n  if (useArrows) {\n    b.line('const cursors = this.cursors;');\n  }\n  if (useWasd) {\n    b.line('const wasd = this.wasd;');\n  }\n\n  b.line();\n  b.line(`const speed = ${player.speed};`);\n  b.line('this.player.setVelocityX(0);');\n  b.line();\n\n  // Horizontal movement\n  const leftConditions: string[] = [];\n  const rightConditions: string[] = [];\n  if (useArrows) {\n    leftConditions.push('cursors.left.isDown');\n    rightConditions.push('cursors.right.isDown');\n  }\n  if (useWasd) {\n    leftConditions.push('wasd.left.isDown');\n    rightConditions.push('wasd.right.isDown');\n  }\n\n  b.block(`if (${leftConditions.join(' || ')})`, (b) => {\n    b.line('this.player.setVelocityX(-speed);');\n    b.line(\"this.player.setFlipX(true);\");\n    if (player.animations.find((a) => a.name === 'walk')) {\n      b.line(`if (this.player.body.onFloor()) this.player.anims.play('${player.sprite}_walk', true);`);\n    }\n  });\n  b.block(`else if (${rightConditions.join(' || ')})`, (b) => {\n    b.line('this.player.setVelocityX(speed);');\n    b.line(\"this.player.setFlipX(false);\");\n    if (player.animations.find((a) => a.name === 'walk')) {\n      b.line(`if (this.player.body.onFloor()) this.player.anims.play('${player.sprite}_walk', true);`);\n    }\n  });\n  b.block('else', (b) => {\n    b.line(\"this.player.anims.stop();\");\n  });\n\n  b.line();\n\n  // Jump\n  const jumpConditions: string[] = [];\n  if (useArrows) jumpConditions.push('cursors.up.isDown');\n  if (useWasd) jumpConditions.push('wasd.up.isDown');\n\n  b.block(`if ((${jumpConditions.join(' || ')}) && this.player.body.onFloor())`, (b) => {\n    b.line(`this.player.setVelocityY(-${player.jumpForce});`);\n    if (player.animations.find((a) => a.name === 'jump')) {\n      b.line(`this.player.anims.play('${player.sprite}_jump', true);`);\n    }\n    b.line(\"if (this.jumpSound) this.jumpSound.play();\");\n  });\n\n  return b.toString();\n}\n\n/** Generate input setup code. */\nexport function generatePlayerInputSetup(player: PlayerDef): string {\n  const b = new CodeBuilder();\n\n  if (player.controls === 'arrows' || player.controls === 'both') {\n    b.line('this.cursors = this.input.keyboard.createCursorKeys();');\n  }\n  if (player.controls === 'wasd' || player.controls === 'both') {\n    b.line(\"this.wasd = {\");\n    b.indent();\n    b.line(\"up: this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.W),\");\n    b.line(\"down: this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S),\");\n    b.line(\"left: this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.A),\");\n    b.line(\"right: this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.D),\");\n    b.dedent();\n    b.line(\"};\");\n  }\n\n  return b.toString();\n}\n", "import { CodeBuilder } from '../codeBuilder.js';\nimport type { EnemyDef, EntityPlacement } from '../../ast/types.js';\n\n/** Generate enemy creation code for a level. */\nexport function generateEnemyCreate(\n  enemies: readonly EnemyDef[],\n  placements: readonly EntityPlacement[]\n): string {\n  const b = new CodeBuilder();\n\n  if (placements.length === 0) return '';\n\n  b.line(\"this.enemies = this.physics.add.group({ allowGravity: true });\");\n  b.line();\n\n  for (const placement of placements) {\n    const def = enemies.find((e) => e.name === placement.entity);\n    if (!def) continue;\n\n    b.line(`{`);\n    b.indent();\n    b.line(`const enemy = this.enemies.create(${placement.x}, ${placement.y}, '${def.sprite}');`);\n    b.line(`enemy.setBounce(0);`);\n    b.line(`enemy.setCollideWorldBounds(true);`);\n    b.line(`enemy.enemyDef = ${JSON.stringify({ name: def.name, movement: def.movement, damage: def.damage, stompable: def.stompable })};`);\n\n    // Initial movement\n    switch (def.movement.kind) {\n      case 'patrol':\n        b.line(`enemy.setVelocityX(${def.movement.speed});`);\n        b.line(`enemy.patrolOriginX = ${placement.x};`);\n        b.line(`enemy.patrolDistance = ${def.movement.distance};`);\n        b.line(`enemy.patrolSpeed = ${def.movement.speed};`);\n        break;\n      case 'chase':\n        b.line(`enemy.chaseSpeed = ${def.movement.speed};`);\n        b.line(`enemy.chaseRange = ${def.movement.range};`);\n        break;\n      case 'fly':\n        b.line(`enemy.body.allowGravity = false;`);\n        b.line(`enemy.flyOriginY = ${placement.y};`);\n        b.line(`enemy.flySpeed = ${def.movement.speed};`);\n        b.line(`enemy.flyAmplitude = ${def.movement.amplitude};`);\n        b.line(`enemy.flyFrequency = ${def.movement.frequency};`);\n        b.line(`enemy.setVelocityX(${def.movement.speed});`);\n        break;\n      case 'static':\n        b.line(`enemy.body.allowGravity = false;`);\n        b.line(`enemy.body.immovable = true;`);\n        break;\n    }\n\n    b.dedent();\n    b.line(`}`);\n  }\n\n  return b.toString();\n}\n\n/** Generate enemy AI update code. */\nexport function generateEnemyUpdate(enemies: readonly EnemyDef[]): string {\n  const b = new CodeBuilder();\n\n  const hasPatrol = enemies.some((e) => e.movement.kind === 'patrol');\n  const hasChase = enemies.some((e) => e.movement.kind === 'chase');\n  const hasFly = enemies.some((e) => e.movement.kind === 'fly');\n\n  if (!hasPatrol && !hasChase && !hasFly) return '';\n\n  b.block('if (this.enemies)', (b) => {\n    b.block('this.enemies.getChildren().forEach((enemy) =>', (b) => {\n      b.line('const def = enemy.enemyDef;');\n      b.line('if (!def || !enemy.active) return;');\n      b.line();\n\n      if (hasPatrol) {\n        b.block(\"if (def.movement.kind === 'patrol')\", (b) => {\n          b.line('const dist = Math.abs(enemy.x - enemy.patrolOriginX);');\n          b.block('if (dist >= enemy.patrolDistance)', (b) => {\n            b.line('enemy.setVelocityX(-enemy.body.velocity.x);');\n            b.line('enemy.setFlipX(enemy.body.velocity.x < 0);');\n          });\n        });\n      }\n\n      if (hasChase) {\n        b.block(\"if (def.movement.kind === 'chase')\", (b) => {\n          b.line('const dist = Phaser.Math.Distance.Between(enemy.x, enemy.y, this.player.x, this.player.y);');\n          b.block('if (dist < enemy.chaseRange)', (b) => {\n            b.line('const angle = Phaser.Math.Angle.Between(enemy.x, enemy.y, this.player.x, this.player.y);');\n            b.line('enemy.setVelocityX(Math.cos(angle) * enemy.chaseSpeed);');\n            b.line('enemy.setFlipX(enemy.body.velocity.x < 0);');\n          });\n          b.block('else', (b) => {\n            b.line('enemy.setVelocityX(0);');\n          });\n        });\n      }\n\n      if (hasFly) {\n        b.block(\"if (def.movement.kind === 'fly')\", (b) => {\n          b.line('const time = this.time.now / 1000;');\n          b.line('enemy.y = enemy.flyOriginY + Math.sin(time * enemy.flyFrequency) * enemy.flyAmplitude;');\n          b.line('// Reverse direction at world bounds');\n          b.block('if (enemy.x <= 10 || enemy.x >= this.physics.world.bounds.width - 10)', (b) => {\n            b.line('enemy.setVelocityX(-enemy.body.velocity.x);');\n          });\n        });\n      }\n    });\n    b.line(');');\n  });\n\n  return b.toString();\n}\n\n/** Generate stomp + damage overlap handlers. */\nexport function generateEnemyCollision(): string {\n  const b = new CodeBuilder();\n\n  b.line('this.physics.add.overlap(this.player, this.enemies, (player, enemy) => {');\n  b.indent();\n  b.line('const def = enemy.enemyDef;');\n  b.line('if (!def) return;');\n  b.line();\n  b.line('// Stomp check: player falling and above enemy');\n  b.line('if (def.stompable && player.body.velocity.y > 0 && player.y < enemy.y - 10) {');\n  b.indent();\n  b.line('enemy.destroy();');\n  b.line('player.setVelocityY(-200); // bounce');\n  b.line('this.score += 50;');\n  b.dedent();\n  b.line('} else {');\n  b.indent();\n  b.line('this.handlePlayerDamage(def.damage);');\n  b.dedent();\n  b.line('}');\n  b.dedent();\n  b.line('});');\n\n  return b.toString();\n}\n", "import { CodeBuilder } from '../codeBuilder.js';\nimport type { CollectibleDef, EntityPlacement } from '../../ast/types.js';\n\n/** Generate collectible creation code. */\nexport function generateCollectibleCreate(\n  collectibles: readonly CollectibleDef[],\n  placements: readonly EntityPlacement[]\n): string {\n  const b = new CodeBuilder();\n\n  if (placements.length === 0) return '';\n\n  b.line(\"this.collectibles = this.physics.add.group({ allowGravity: false });\");\n  b.line();\n\n  for (const placement of placements) {\n    const def = collectibles.find((c) => c.name === placement.entity);\n    if (!def) continue;\n\n    b.line(`{`);\n    b.indent();\n    b.line(`const item = this.collectibles.create(${placement.x}, ${placement.y}, '${def.sprite}');`);\n    b.line(`item.collectDef = ${JSON.stringify({ name: def.name, score: def.score, effect: def.effect })};`);\n\n    // Play animation if defined\n    if (def.animations.length > 0) {\n      b.line(`item.anims.play('${def.sprite}_${def.animations[0].name}');`);\n    }\n\n    b.dedent();\n    b.line(`}`);\n  }\n\n  return b.toString();\n}\n\n/** Generate collectible overlap handler. */\nexport function generateCollectibleCollision(): string {\n  const b = new CodeBuilder();\n\n  b.line('this.physics.add.overlap(this.player, this.collectibles, (player, item) => {');\n  b.indent();\n  b.line('const def = item.collectDef;');\n  b.line('if (!def) return;');\n  b.line();\n  b.line('item.destroy();');\n  b.line('this.score += def.score;');\n  b.line(\"if (this.collectSound) this.collectSound.play();\");\n  b.line();\n  b.block(\"if (def.effect === 'extraLife')\", (b) => {\n    b.line('this.lives = Math.min(this.lives + 1, this.maxLives);');\n  });\n  b.block(\"else if (def.effect === 'speedBoost')\", (b) => {\n    b.line('this.player.speedMultiplier = 1.5;');\n    b.line('this.time.delayedCall(5000, () => { this.player.speedMultiplier = 1; });');\n  });\n  b.block(\"else if (def.effect === 'invincible')\", (b) => {\n    b.line('this.player.invincible = true;');\n    b.line('this.player.setAlpha(0.5);');\n    b.line('this.time.delayedCall(5000, () => { this.player.invincible = false; this.player.setAlpha(1); });');\n  });\n  b.line();\n  b.line('// Check collectAll win condition');\n  b.line('if (this.winCondition === \"collectAll\" && this.collectibles.countActive() === 0) {');\n  b.indent();\n  b.line('this.handleWin();');\n  b.dedent();\n  b.line('}');\n  b.dedent();\n  b.line('});');\n\n  return b.toString();\n}\n", "import { CodeBuilder } from '../codeBuilder.js';\nimport type { LevelDef, AssetDef } from '../../ast/types.js';\n\n/** Generate tilemap creation and collision setup code. */\nexport function generateTilemapCreate(level: LevelDef, assets: readonly AssetDef[]): string {\n  const b = new CodeBuilder();\n\n  if (!level.tilemap || !level.layers) return '';\n\n  // Find the tileset image asset \u2014 use first image asset as tileset\n  const tilesetAsset = assets.find((a) => a.type === 'image' && a.key.includes('tile'));\n  const tilesetKey = tilesetAsset?.key ?? assets.find((a) => a.type === 'image')?.key ?? 'tiles';\n\n  b.line(`const map = this.make.tilemap({ key: '${level.tilemap}' });`);\n  b.line(`const tileset = map.addTilesetImage('tileset', '${tilesetKey}');`);\n  b.line();\n\n  for (const [layerName, tiledName] of Object.entries(level.layers)) {\n    b.line(`this.${layerName}Layer = map.createLayer('${tiledName}', tileset, 0, 0);`);\n    b.line(`if (this.${layerName}Layer) {`);\n    b.indent();\n    b.line(`this.${layerName}Layer.setCollisionByExclusion([-1]);`);\n    b.line(`this.physics.add.collider(this.player, this.${layerName}Layer);`);\n    if (b) {\n      // Add enemy collider with this layer too\n      b.line(`if (this.enemies) this.physics.add.collider(this.enemies, this.${layerName}Layer);`);\n    }\n    b.dedent();\n    b.line('}');\n  }\n\n  return b.toString();\n}\n", "import { CodeBuilder } from '../codeBuilder.js';\nimport type { GameAST, LevelDef } from '../../ast/types.js';\nimport { generatePlayerCreate, generatePlayerUpdate, generatePlayerInputSetup } from './playerTemplate.js';\nimport { generateEnemyCreate, generateEnemyUpdate, generateEnemyCollision } from './enemyTemplate.js';\nimport { generateCollectibleCreate, generateCollectibleCollision } from './collectibleTemplate.js';\nimport { generateTilemapCreate } from './tilemapTemplate.js';\n\n/** Generate a Phaser.Scene class for a single level. */\nexport function generateLevelScene(ast: GameAST, level: LevelDef, levelIndex: number): string {\n  const b = new CodeBuilder();\n  const sceneKeyStr = sceneKey(level.name);\n  const nextSceneKey = ast.rules?.nextLevel\n    ? sceneKey(ast.rules.nextLevel)\n    : levelIndex < ast.levels.length - 1\n      ? sceneKey(ast.levels[levelIndex + 1].name)\n      : null;\n\n  b.block(`class ${sceneKeyStr} extends Phaser.Scene`, (b) => {\n    // Constructor\n    b.block('constructor()', (b) => {\n      b.line(`super({ key: '${sceneKeyStr}' });`);\n    });\n    b.line();\n\n    // Create\n    b.block('create()', (b) => {\n      // State\n      b.line('this.score = this.registry.get(\"score\") || 0;');\n      b.line(`this.lives = this.registry.get(\"lives\") || ${ast.player.lives};`);\n      b.line(`this.maxLives = ${ast.player.lives};`);\n      b.line(`this.winCondition = \"${ast.rules?.win?.kind || 'reachExit'}\";`);\n      b.line('this.isGameOver = false;');\n      b.line();\n\n      // Background\n      b.line(`this.cameras.main.setBackgroundColor('${ast.config.background}');`);\n      b.line();\n\n      // Input setup\n      b.raw(generatePlayerInputSetup(ast.player));\n      b.line();\n\n      // Player\n      b.raw(generatePlayerCreate(ast.player, level.spawn));\n      b.line();\n\n      // Tilemap or inline platforms\n      if (level.tilemap && level.layers) {\n        b.raw(generateTilemapCreate(level, ast.assets));\n      }\n\n      if (level.platforms.length > 0) {\n        b.line(\"this.platforms = this.physics.add.staticGroup();\");\n        for (const plat of level.platforms) {\n          b.line(`this.platforms.create(${plat.x + plat.width / 2}, ${plat.y + plat.height / 2}, '${plat.asset}').setDisplaySize(${plat.width}, ${plat.height}).refreshBody();`);\n        }\n        b.line('this.physics.add.collider(this.player, this.platforms);');\n        b.line();\n      }\n\n      // Enemies\n      const enemyCode = generateEnemyCreate(ast.enemies, level.enemies);\n      if (enemyCode) {\n        b.raw(enemyCode);\n        b.line('this.physics.add.collider(this.enemies, this.platforms || []);');\n        b.line();\n        b.raw(generateEnemyCollision());\n        b.line();\n      }\n\n      // Collectibles\n      const collectCode = generateCollectibleCreate(ast.collectibles, level.collectibles);\n      if (collectCode) {\n        b.raw(collectCode);\n        b.line();\n        b.raw(generateCollectibleCollision());\n        b.line();\n      }\n\n      // Exit zone\n      if (level.exit) {\n        b.line(`this.exitZone = this.add.zone(${level.exit.x}, ${level.exit.y}, 40, 40);`);\n        b.line('this.physics.add.existing(this.exitZone);');\n        b.line('this.exitZone.body.setAllowGravity(false);');\n        b.line('this.physics.add.overlap(this.player, this.exitZone, () => {');\n        b.indent();\n        b.line('if (this.winCondition === \"reachExit\") this.handleWin();');\n        b.dedent();\n        b.line('});');\n        b.line();\n      }\n\n      // Sounds\n      if (ast.sounds?.jump) {\n        b.line(`this.jumpSound = this.sound.add('${ast.sounds.jump}');`);\n      }\n      if (ast.sounds?.collect) {\n        b.line(`this.collectSound = this.sound.add('${ast.sounds.collect}');`);\n      }\n      if (ast.sounds?.hurt) {\n        b.line(`this.hurtSound = this.sound.add('${ast.sounds.hurt}');`);\n      }\n      if (ast.sounds?.bgm) {\n        b.line(`this.bgm = this.sound.add('${ast.sounds.bgm}', { loop: true });`);\n        b.line('this.bgm.play();');\n      }\n\n      // Start HUD scene\n      if (ast.hud) {\n        b.line(\"this.scene.launch('HudScene');\");\n      }\n\n      // Fall-off detection\n      if (ast.rules?.lose?.kind === 'fallOff') {\n        b.line('this.physics.world.setBoundsCollision(true, true, true, false);');\n        b.line('this.player.setCollideWorldBounds(false);');\n      }\n\n      // Timer for survive condition\n      if (ast.rules?.win?.kind === 'survive') {\n        b.line(`this.surviveTime = ${(ast.rules.win as { seconds: number }).seconds};`);\n        b.line('this.elapsedTime = 0;');\n      }\n    });\n    b.line();\n\n    // Update\n    b.block('update(time, delta)', (b) => {\n      b.line('if (this.isGameOver) return;');\n      b.line();\n      b.raw(generatePlayerUpdate(ast.player));\n      b.line();\n      b.raw(generateEnemyUpdate(ast.enemies));\n      b.line();\n\n      // Fall-off check\n      if (ast.rules?.lose?.kind === 'fallOff') {\n        b.block(`if (this.player.y > ${ast.config.height + 100})`, (b) => {\n          b.line('this.handlePlayerDamage(1);');\n        });\n      }\n\n      // Survive timer\n      if (ast.rules?.win?.kind === 'survive') {\n        b.line('this.elapsedTime += delta / 1000;');\n        b.line(\"this.game.events.emit('updateTimer', this.surviveTime - this.elapsedTime);\");\n        b.block('if (this.elapsedTime >= this.surviveTime)', (b) => {\n          b.line('this.handleWin();');\n        });\n      }\n\n      // HUD updates\n      b.line(\"this.game.events.emit('updateScore', this.score);\");\n      b.line(\"this.game.events.emit('updateLives', this.lives);\");\n    });\n    b.line();\n\n    // Damage handler\n    b.block('handlePlayerDamage(amount)', (b) => {\n      b.line('if (this.player.invincible) return;');\n      b.line('this.lives -= amount;');\n      b.line(\"if (this.hurtSound) this.hurtSound.play();\");\n      b.line();\n      b.line('// Brief invincibility');\n      b.line('this.player.invincible = true;');\n      b.line('this.player.setAlpha(0.5);');\n      b.line('this.time.delayedCall(1000, () => {');\n      b.indent();\n      b.line('if (this.player) { this.player.invincible = false; this.player.setAlpha(1); }');\n      b.dedent();\n      b.line('});');\n      b.line();\n      b.block('if (this.lives <= 0)', (b) => {\n        b.line('this.handleGameOver();');\n      });\n    });\n    b.line();\n\n    // Win handler\n    b.block('handleWin()', (b) => {\n      b.line('if (this.isGameOver) return;');\n      b.line('this.isGameOver = true;');\n      b.line(\"if (this.bgm) this.bgm.stop();\");\n      b.line('this.registry.set(\"score\", this.score);');\n      b.line('this.registry.set(\"lives\", this.lives);');\n      if (nextSceneKey) {\n        b.line(`this.scene.start('${nextSceneKey}');`);\n      } else {\n        b.line(\"this.add.text(this.cameras.main.centerX, this.cameras.main.centerY, 'YOU WIN!', { fontSize: '48px', color: '#00ff00' }).setOrigin(0.5);\");\n        b.line('this.physics.pause();');\n      }\n    });\n    b.line();\n\n    // Game over handler\n    b.block('handleGameOver()', (b) => {\n      b.line('if (this.isGameOver) return;');\n      b.line('this.isGameOver = true;');\n      b.line(\"if (this.bgm) this.bgm.stop();\");\n      b.line('this.physics.pause();');\n      b.line('this.player.setTint(0xff0000);');\n      b.line(\"this.add.text(this.cameras.main.centerX, this.cameras.main.centerY, 'GAME OVER', { fontSize: '48px', color: '#ff0000' }).setOrigin(0.5);\");\n      b.line(\"this.add.text(this.cameras.main.centerX, this.cameras.main.centerY + 60, 'Click to restart', { fontSize: '20px', color: '#ffffff' }).setOrigin(0.5);\");\n      b.line(\"this.input.on('pointerdown', () => {\");\n      b.indent();\n      b.line('this.registry.set(\"score\", 0);');\n      b.line(`this.registry.set(\"lives\", ${ast.player.lives});`);\n      b.line(`this.scene.start('${sceneKey(ast.levels[0].name)}');`);\n      b.dedent();\n      b.line(\"});\");\n    });\n  });\n\n  return b.toString();\n}\n\nfunction sceneKey(name: string): string {\n  return 'Level_' + name.replace(/[^a-zA-Z0-9]/g, '_');\n}\n", "import { CodeBuilder } from '../codeBuilder.js';\nimport type { HudDef, HudElementDef } from '../../ast/types.js';\nimport { hexToInt } from '../../utils/strings.js';\n\n/** Generate the HUD overlay scene. */\nexport function generateHudScene(hud: HudDef | undefined, maxLives: number): string {\n  const b = new CodeBuilder();\n\n  b.block('class HudScene extends Phaser.Scene', (b) => {\n    b.block('constructor()', (b) => {\n      b.line(\"super({ key: 'HudScene', active: false });\");\n    });\n    b.line();\n    b.block('create()', (b) => {\n      b.line('this.scoreText = null;');\n      b.line('this.livesText = null;');\n      b.line('this.timerText = null;');\n      b.line();\n\n      if (hud) {\n        for (const el of hud.elements) {\n          generateHudElement(b, el, maxLives);\n        }\n      }\n\n      b.line();\n      b.line('// Listen for HUD update events');\n      b.line(\"this.scene.get('BootScene'); // reference\");\n      b.line(\"this.game.events.on('updateScore', (score) => {\");\n      b.indent();\n      b.line(\"if (this.scoreText) this.scoreText.setText('Score: ' + score);\");\n      b.dedent();\n      b.line(\"});\");\n      b.line(\"this.game.events.on('updateLives', (lives) => {\");\n      b.indent();\n      b.line(\"if (this.livesText) this.livesText.setText('Lives: ' + lives);\");\n      b.dedent();\n      b.line(\"});\");\n      b.line(\"this.game.events.on('updateTimer', (time) => {\");\n      b.indent();\n      b.line(\"if (this.timerText) this.timerText.setText('Time: ' + Math.ceil(time));\");\n      b.dedent();\n      b.line(\"});\");\n    });\n  });\n\n  return b.toString();\n}\n\nfunction generateHudElement(b: CodeBuilder, el: HudElementDef, maxLives: number): void {\n  const { x, y } = positionToXY(el.position);\n  const fontSize = el.fontSize ?? 20;\n  const color = el.color ?? '#FFFFFF';\n\n  switch (el.type) {\n    case 'score':\n      b.line(\n        `this.scoreText = this.add.text(${x}, ${y}, 'Score: 0', { fontSize: '${fontSize}px', color: '${color}' });`\n      );\n      break;\n    case 'lives':\n      b.line(\n        `this.livesText = this.add.text(${x}, ${y}, 'Lives: ${maxLives}', { fontSize: '${fontSize}px', color: '${color}' });`\n      );\n      break;\n    case 'timer':\n      b.line(\n        `this.timerText = this.add.text(${x}, ${y}, 'Time: 0', { fontSize: '${fontSize}px', color: '${color}' });`\n      );\n      break;\n  }\n}\n\nfunction positionToXY(position: string): { x: number; y: number } {\n  switch (position) {\n    case 'top-left':\n      return { x: 16, y: 16 };\n    case 'top-right':\n      return { x: 700, y: 16 };\n    case 'top-center':\n      return { x: 350, y: 16 };\n    case 'bottom-left':\n      return { x: 16, y: 560 };\n    case 'bottom-right':\n      return { x: 700, y: 560 };\n    case 'bottom-center':\n      return { x: 350, y: 560 };\n    default:\n      return { x: 16, y: 16 };\n  }\n}\n", "import { CodeBuilder } from '../codeBuilder.js';\nimport type { GameAST, CompileOptions } from '../../ast/types.js';\nimport { generatePreloadScene } from './preloadTemplate.js';\nimport { generateLevelScene } from './sceneTemplate.js';\nimport { generateHudScene } from './hudTemplate.js';\n\nconst DEFAULT_CDN = 'https://cdn.jsdelivr.net/npm/phaser@3.80.1/dist/phaser.min.js';\n\n/** Generate a complete standalone HTML file with an embedded Phaser game. */\nexport function generateStandaloneHTML(ast: GameAST, options?: CompileOptions): string {\n  const phaserCdn = options?.phaserCdn ?? DEFAULT_CDN;\n\n  const b = new CodeBuilder();\n\n  b.line('<!DOCTYPE html>');\n  b.line('<html lang=\"en\">');\n  b.line('<head>');\n  b.indent();\n  b.line('<meta charset=\"UTF-8\">');\n  b.line('<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">');\n  b.line(`<title>${escapeHtml(ast.title)}</title>`);\n  b.line('<style>');\n  b.indent();\n  b.line('* { margin: 0; padding: 0; }');\n  b.line('body { background: #000; display: flex; justify-content: center; align-items: center; min-height: 100vh; }');\n  b.dedent();\n  b.line('</style>');\n  b.line(`<script src=\"${phaserCdn}\"><\\/script>`);\n  b.dedent();\n  b.line('</head>');\n  b.line('<body>');\n  b.line('<script>');\n\n  // Generate all scene classes\n  b.raw(generatePreloadScene(ast));\n  b.line();\n\n  for (let i = 0; i < ast.levels.length; i++) {\n    b.raw(generateLevelScene(ast, ast.levels[i], i));\n    b.line();\n  }\n\n  if (ast.hud) {\n    b.raw(generateHudScene(ast.hud, ast.player.lives));\n    b.line();\n  }\n\n  // Generate Phaser.Game config\n  const sceneList = ['BootScene'];\n  for (const level of ast.levels) {\n    sceneList.push(sceneKey(level.name));\n  }\n  if (ast.hud) {\n    sceneList.push('HudScene');\n  }\n\n  b.line('const config = {');\n  b.indent();\n  b.line('type: Phaser.AUTO,');\n  b.line(`width: ${ast.config.width},`);\n  b.line(`height: ${ast.config.height},`);\n  b.line('physics: {');\n  b.indent();\n  b.line(\"default: 'arcade',\");\n  b.line('arcade: {');\n  b.indent();\n  b.line(`gravity: { y: ${ast.config.gravity} },`);\n  b.line('debug: false,');\n  b.dedent();\n  b.line('},');\n  b.dedent();\n  b.line('},');\n  b.line(`scene: [${sceneList.join(', ')}],`);\n  b.dedent();\n  b.line('};');\n  b.line();\n  b.line('const game = new Phaser.Game(config);');\n\n  b.line('<\\/script>');\n  b.line('</body>');\n  b.line('</html>');\n\n  return b.toString();\n}\n\nfunction sceneKey(name: string): string {\n  return 'Level_' + name.replace(/[^a-zA-Z0-9]/g, '_');\n}\n\nfunction escapeHtml(s: string): string {\n  return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n}\n", "import type { GameAST, CompileOptions, CompileResult } from '../ast/types.js';\nimport { generateStandaloneHTML } from './templates/gameTemplate.js';\n\n/** Generate Phaser.js game code from a validated AST. */\nexport function generate(ast: GameAST, options?: CompileOptions): CompileResult {\n  const mode = options?.mode ?? 'standalone-html';\n\n  switch (mode) {\n    case 'standalone-html':\n      return {\n        html: generateStandaloneHTML(ast, options),\n        errors: [],\n      };\n    case 'module':\n    case 'embed':\n      // For now, all modes produce standalone HTML\n      return {\n        html: generateStandaloneHTML(ast, options),\n        errors: [],\n      };\n  }\n}\n", "import type { GameAST, CompileOptions, CompileResult } from './ast/types.js';\nimport { parseOrThrow } from './parser/index.js';\nimport { toAST } from './semantic/index.js';\nimport { validate } from './ast/validators.js';\nimport { applyDefaults } from './ast/transforms.js';\nimport { generate as generatorGenerate } from './generator/index.js';\n\n/**\n * Compile DSL source into a standalone Phaser.js game.\n * Facade function that orchestrates parse \u2192 AST \u2192 validate \u2192 generate.\n */\nexport function compile(source: string, options?: CompileOptions): CompileResult {\n  const ast = parseToAST(source);\n  return generate(ast, options);\n}\n\n/**\n * Parse DSL source into a typed AST (with defaults applied and validation).\n */\nexport function parseToAST(source: string): GameAST {\n  const matchResult = parseOrThrow(source);\n  const rawAST = toAST(matchResult);\n  const ast = applyDefaults(rawAST);\n\n  const validation = validate(ast);\n  if (!validation.valid) {\n    // Attach warnings but don't throw \u2014 let generator handle them\n    (ast as { _warnings?: readonly string[] })._warnings = validation.errors;\n  }\n\n  return ast;\n}\n\n/**\n * Generate Phaser.js code from a validated AST.\n */\nexport function generate(ast: GameAST, options?: CompileOptions): CompileResult {\n  return generatorGenerate(ast, options);\n}\n"],
  "mappings": "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",
  "names": ["common_exports", "__export", "StringBuffer", "abstract", "assert", "checkNotNull", "clone", "copyWithoutDuplicates", "defineLazyProperty", "getDuplicates", "isLexical", "isSyntactic", "padLeft", "repeat", "repeatFn", "repeatStr", "unescapeCodePoint", "unexpectedObjToString", "escapeStringFor", "c", "optMethodName", "methodName", "cond", "message", "obj", "propName", "getterFn", "memo", "fn", "n", "arr", "str", "x", "array", "duplicates", "idx", "noDuplicates", "entry", "ruleName", "firstChar", "len", "optChar", "ch", "escapeUnicode", "s", "baseToString", "typeName", "toRegExp", "val", "UnicodeCategories", "cat", "UnicodeBinaryProperties", "prop", "PExpr", "_PExpr", "interval", "any", "end", "Terminal", "obj", "Range", "from", "to", "Param", "index", "Alt", "terms", "Extend", "superGrammar", "name", "body", "origBody", "Splice", "ruleName", "beforeTerms", "afterTerms", "Seq", "factors", "Iter", "expr", "Star", "Plus", "Opt", "Not", "Lookahead", "Lex", "Apply", "args", "isSyntactic", "UnicodeChar", "categoryOrProp", "UnicodeCategories", "UnicodeBinaryProperties", "createError", "message", "optInterval", "e", "intervalSourcesDontMatch", "grammarSyntaxError", "matchFailure", "undeclaredGrammar", "grammarName", "namespace", "interval", "duplicateGrammarDeclaration", "grammar", "grammarDoesNotSupportIncrementalParsing", "undeclaredRule", "ruleName", "cannotOverrideUndeclaredRule", "optSource", "cannotExtendUndeclaredRule", "duplicateRuleDeclaration", "declGrammarName", "wrongNumberOfParameters", "expected", "actual", "source", "wrongNumberOfArguments", "expr", "duplicateParameterNames", "duplicates", "invalidParameter", "syntacticVsLexicalNote", "applicationOfSyntacticRuleFromLexicalContext", "applyExpr", "applySyntacticWithLexicalRuleApplication", "unnecessaryExperimentalApplySyntactic", "incorrectArgumentType", "expectedType", "multipleSuperSplices", "invalidCodePoint", "applyWrapper", "node", "assert", "digitIntervals", "d", "fullInterval", "kleeneExprHasNullableOperand", "kleeneExpr", "applicationStack", "actuals", "stackTrace", "app", "Apply", "inconsistentArity", "multipleErrors", "errors", "messages", "e", "createError", "missingSemanticAction", "ctorName", "name", "type", "stack", "stackTrace", "info", "ans", "moreInfo", "message", "throwErrors", "padNumbersToEqualLength", "arr", "maxLen", "str", "s", "padLeft", "strcpy", "dest", "src", "offset", "origDestLen", "start", "end", "lineAndColumnToMessage", "ranges", "lineAndCol", "repeatStr", "common_exports", "sb", "StringBuffer", "lineNumbers", "appendLine", "num", "content", "prefix", "lineLen", "indicationLine", "i", "startIdx", "endIdx", "assert", "lineStartOffset", "gutterWidth", "builtInRulesCallbacks", "awaitBuiltInRules", "cb", "announceBuiltInRules", "grammar", "getLineAndColumn", "lineNum", "colNum", "currOffset", "nextLine", "prevLine", "prevLineStartOffset", "c", "lineEndOffset", "nextLineEndOffset", "line", "getLineAndColumnMessage", "uniqueId", "idCounter", "Interval", "_Interval", "sourceString", "startIdx", "endIdx", "intervals", "getLineAndColumn", "range", "getLineAndColumnMessage", "that", "intervalSourcesDontMatch", "assert", "contents", "offset", "len", "newStartIdx", "firstInterval", "interval", "MAX_CHAR_CODE", "MAX_CODE_POINT", "InputStream", "source", "ans", "nextChar", "cp", "s", "optIgnoreCase", "idx", "actual", "expected", "startIdx", "endIdx", "optEndIdx", "Interval", "MatchResult", "matcher", "input", "startExpr", "cst", "cstOffset", "rightmostFailurePosition", "optRecordedFailures", "defineLazyProperty", "detail", "getLineAndColumnMessage", "errorInfo", "getLineAndColumn", "matchResultWithFailures", "sb", "StringBuffer", "failures", "failure", "idx", "pos", "Interval", "PosInfo", "application", "headApplication", "memoRec", "applicationMemoKeyStack", "indexOfFirstInvolvedRule", "involvedApplicationMemoKeys", "applicationMemoKey", "idx", "memoKey", "pos", "invalidatedIdx", "memo", "k", "BALLOT_X", "CHECK_MARK", "DOT_OPERATOR", "RIGHTWARDS_DOUBLE_ARROW", "SYMBOL_FOR_HORIZONTAL_TABULATION", "SYMBOL_FOR_LINE_FEED", "SYMBOL_FOR_CARRIAGE_RETURN", "Flags", "spaces", "n", "repeat", "getInputExcerpt", "input", "pos", "len", "excerpt", "asEscapedString", "obj", "Trace", "_Trace", "pos1", "pos2", "expr", "succeeded", "bindings", "optChildren", "Interval", "ans", "ruleBodyTrace", "value", "visitorObjOrFn", "optThisArg", "visitor", "_walk", "node", "parent", "depth", "recurse", "child", "c", "sb", "StringBuffer", "contents", "name", "mask", "val", "PExpr", "abstract", "any", "end", "Apply", "Terminal", "Range", "UnicodeChar", "Alt", "Iter", "Lex", "Lookahead", "Not", "Param", "Seq", "BuiltInRules", "awaitBuiltInRules", "g", "lexifyCount", "PExpr", "ruleName", "grammar", "abstract", "any", "end", "Terminal", "Range", "Param", "UnicodeChar", "Lex", "Alt", "idx", "Seq", "Iter", "Not", "Lookahead", "Apply", "skipSyntacticCheck", "ruleInfo", "isContextSyntactic", "isSyntactic", "undeclaredRule", "applicationOfSyntacticRuleFromLexicalContext", "actual", "expected", "wrongNumberOfArguments", "isBuiltInApplySyntactic", "incorrectArgumentType", "arg", "applySyntacticWithLexicalRuleApplication", "unnecessaryExperimentalApplySyntactic", "invalidParameter", "PExpr", "abstract", "any", "end", "Terminal", "Range", "Param", "Lex", "UnicodeChar", "ruleName", "Alt", "arity", "idx", "term", "otherArity", "inconsistentArity", "Extend", "actualArity", "expectedArity", "Seq", "Iter", "Not", "Lookahead", "Apply", "PExpr", "abstract", "any", "end", "Terminal", "Range", "Param", "UnicodeChar", "grammar", "Alt", "idx", "Seq", "Iter", "kleeneExprHasNullableOperand", "Opt", "Not", "Lookahead", "Lex", "Apply", "arg", "Node", "matchLength", "idx", "arg", "child", "childIdx", "TerminalNode", "NonterminalNode", "ruleName", "children", "childOffsets", "isLexical", "isSyntactic", "IterationNode", "isOptional", "PExpr", "abstract", "any", "state", "inputStream", "origPos", "cp", "TerminalNode", "end", "Terminal", "Range", "Param", "Lex", "ans", "Alt", "idx", "Seq", "factor", "Iter", "arity", "cols", "colOffsets", "numMatches", "prevPos", "kleeneExprHasNullableOperand", "row", "rowOffsets", "offset", "matchLength", "lastCol", "lastColOffsets", "endOffset", "isOptional", "Opt", "IterationNode", "Not", "Lookahead", "Apply", "caller", "actuals", "app", "posInfo", "memoKey", "memoRec", "currentLeftRecursion", "origPosInfo", "ruleInfo", "body", "description", "origInputStreamExaminedLength", "value", "currentLR", "isHeadOfLeftRecursion", "succeeded", "entry", "assert", "expr", "bindings", "offsets", "NonterminalNode", "lrMemoRec", "newValue", "seedTrace", "Trace", "UnicodeChar", "MAX_CODE_POINT", "ch", "PExpr", "abstract", "any", "end", "Terminal", "Range", "Param", "Apply", "UnicodeChar", "Alt", "Seq", "arity", "idx", "Iter", "Not", "Lookahead", "Lex", "getMetaInfo", "expr", "grammarInterval", "metaInfo", "adjusted", "PExpr", "abstract", "any", "formals", "end", "Terminal", "Range", "Param", "Alt", "term", "Extend", "Splice", "beforeTerms", "afterTerms", "Seq", "factor", "Star", "Plus", "Opt", "Not", "Lookahead", "Lex", "Apply", "arg", "UnicodeChar", "PExpr", "abstract", "any", "end", "Terminal", "Range", "Param", "UnicodeChar", "formals", "Alt", "term", "idx", "terms", "Seq", "factor", "factors", "Iter", "Not", "Lookahead", "Lex", "Apply", "index", "arg", "args", "PExpr", "grammar", "abstract", "any", "Range", "Param", "Plus", "UnicodeChar", "memo", "end", "Terminal", "Alt", "term", "Seq", "factor", "Star", "Opt", "Not", "Lookahead", "Lex", "Apply", "key", "body", "inlined", "PExpr", "abstract", "any", "end", "Terminal", "Range", "UnicodeChar", "actuals", "Param", "checkNotNull", "Alt", "term", "Seq", "factor", "Iter", "Not", "Lookahead", "Lex", "Apply", "args", "arg", "isRestrictedJSIdentifier", "str", "resolveDuplicatedNames", "argumentNameList", "count", "argName", "dupArgName", "subscript", "idx", "PExpr", "abstract", "any", "firstArgIndex", "noDupCheck", "end", "Terminal", "Range", "Alt", "termArgNameLists", "term", "numArgs", "colIdx", "col", "rowIdx", "uniqueNames", "copyWithoutDuplicates", "Seq", "factor", "factorArgumentNameList", "Iter", "exprArgumentString", "Opt", "Not", "Lookahead", "Lex", "Apply", "UnicodeChar", "Param", "PExpr", "abstract", "Alt", "Seq", "any", "end", "Iter", "Not", "Lookahead", "Lex", "Terminal", "Range", "Param", "Apply", "ps", "arg", "UnicodeChar", "isValidType", "type", "Failure", "_Failure", "pexpr", "text", "that", "failure", "PExpr", "abstract", "any", "grammar", "Failure", "end", "Terminal", "Range", "Not", "description", "Lookahead", "Apply", "UnicodeChar", "Alt", "t", "Seq", "f", "Iter", "PExpr", "abstract", "any", "end", "Terminal", "Range", "Param", "Lex", "Alt", "term", "Seq", "factor", "Iter", "Not", "Lookahead", "Apply", "ps", "arg", "UnicodeChar", "CaseInsensitiveTerminal", "_CaseInsensitiveTerminal", "PExpr", "param", "state", "terminal", "assert", "Terminal", "inputStream", "origPos", "matchStr", "TerminalNode", "actuals", "grammar", "Failure", "memo", "builtInApplySyntacticBody", "awaitBuiltInRules", "builtInRules", "applySpaces", "Apply", "MatchState", "matcher", "startExpr", "optPositionToRecordFailures", "InputStream", "pos", "posInfo", "app", "optNode", "origPos", "currentApplication", "expr", "node", "newLength", "PosInfo", "failure", "shouldCloneIfNew", "key", "failures", "ans", "memoRec", "entry", "succeeded", "bindings", "actuals", "Trace", "memoRecRightmostFailurePosition", "inputStream", "origNumBindings", "origUserData", "origRecordedFailures", "memoPos", "origTrace", "traceEntry", "rightmostFailures", "cst", "MatchResult", "matchResult", "rootTrace", "Matcher", "grammar", "str", "startIdx", "endIdx", "prevInput", "memoTable", "restOfMemoTable", "idx", "posInfo", "pos", "optStartApplicationStr", "options", "startExpr", "opts", "grammarDoesNotSupportIncrementalParsing", "state", "MatchState", "applicationStr", "startApp", "Seq", "end", "globalActionStack", "hasOwnProperty", "x", "prop", "Wrapper", "node", "sourceInterval", "baseInterval", "assert", "attributeName", "child", "idx", "childWrapper", "childNode", "offset", "source", "base", "optChildWrappers", "childWrappers", "childNodes", "c", "iter", "IterationNode", "wrapper", "Semantics", "_Semantics", "grammar", "superSemantics", "self", "uniqueId", "name", "semanticsOnly", "hasSuperSemantics", "s", "str", "superSemanticsGrammar", "relatedGrammar", "type", "semanticOperations", "actionDict", "formals", "builtInDefault", "signature", "method", "srcArray", "actionName", "typePlural", "parsedNameAndFormalArgs", "parseSignature", "newDefaultAction", "doIt", "realActionDict", "entry", "Operation", "Attribute", "args", "thisThing", "argsObj", "val", "formal", "oldArgs", "ans", "inheritedFormals", "inheritedActionDict", "newActionDict", "optBaseInterval", "children", "missingSemanticAction", "optSuperSemantics", "proxy", "matchResult", "MatchResult", "unexpectedObjToString", "cst", "inputStream", "InputStream", "operationOrAttributeName", "action", "semantic", "semantics", "nodeWrapper", "ctorName", "actionFn", "key", "SPECIAL_ACTION_NAMES", "getSortedRuleValues", "grammar", "name", "jsonToJS", "str", "ohmGrammar", "buildGrammar", "Grammar", "_Grammar", "superGrammar", "rules", "optDefaultStartRule", "Matcher", "g", "myRules", "otherRules", "rule", "i", "input", "optStartApplication", "m", "Semantics", "superSemantics", "what", "actionDict", "problems", "k", "v", "actual", "expected", "details", "prettyProblems", "problem", "error", "actionName", "superGrammarExpr", "metaInfo", "startRule", "ruleName", "ruleInfo", "body", "isDefinition", "operation", "Extend", "adjusted", "description", "bodyRecipe", "superGrammarOutput", "recipeElements", "sb", "StringBuffer", "first", "arity", "repeat", "app", "Apply", "cst", "undeclaredRule", "formals", "source", "wrongNumberOfParameters", "state", "any", "end", "CaseInsensitiveTerminal", "Param", "UnicodeChar", "Star", "Range", "builderFn", "GrammarDecl", "name", "startIdx", "endIdx", "Grammar", "source", "ruleInfo", "cannotOverrideUndeclaredRule", "formals", "body", "duplicateParameterNames", "getDuplicates", "expectedFormals", "expectedNumFormals", "wrongNumberOfParameters", "description", "primitive", "superGrammar", "ruleName", "InputStream", "grammar", "grammarErrors", "grammarHasInvalidApplications", "e", "throwErrors", "duplicateRuleDeclaration", "descIgnored", "fragment", "cannotExtendUndeclaredRule", "Extend", "Builder", "name", "GrammarDecl", "metaInfo", "superGrammar", "defaultStartRule", "rules", "gDecl", "Grammar", "ruleName", "ruleRecipe", "action", "description", "formals", "body", "source", "x", "Terminal", "from", "to", "Range", "index", "Param", "termArgs", "terms", "arg", "PExpr", "Alt", "factorArgs", "factors", "Seq", "expr", "Star", "Plus", "Opt", "Not", "Lookahead", "Lex", "optParams", "param", "Apply", "beforeTerms", "afterTerms", "Splice", "term", "recipe", "args", "result", "makeRecipe", "recipe", "Builder", "built_in_rules_default", "makeRecipe", "Grammar", "built_in_rules_default", "announceBuiltInRules", "ohm_grammar_default", "makeRecipe", "superSplicePlaceholder", "PExpr", "namespaceHas", "ns", "name", "prop", "buildGrammar", "match", "namespace", "optOhmGrammarForTesting", "builder", "Builder", "decl", "currentRuleName", "currentRuleFormals", "overriding", "ohm_grammar_default", "grammarIter", "c", "id", "s", "_open", "rules", "_close", "grammarName", "g", "duplicateGrammarDeclaration", "_", "n", "superGrammarName", "undeclaredGrammar", "fs", "d", "b", "Grammar", "body", "description", "source", "terms", "args", "expansionPos", "beforeTerms", "afterTerms", "t", "multipleSuperSplices", "Splice", "opointy", "cpointy", "ps", "seqs", "inlineRuleName", "isNewRuleDeclaration", "params", "formal", "expr", "x", "rule", "from", "to", "open", "close", "space1", "space2", "end", "first", "rest", "cs", "unescapeCodePoint", "err", "invalidCodePoint", "xs", "operations_and_attributes_default", "makeRecipe", "initBuiltInSemantics", "Grammar", "initPrototypeParser", "operations_and_attributes_default", "builtInRules", "actions", "first", "_", "rest", "_children", "Semantics", "grammar", "name", "optFormals", "c", "oparen", "fs", "cparen", "findIndentation", "input", "pos", "stack", "topOfStack", "result", "regex", "match", "line", "indent", "indentSize", "prevSize", "indentPos", "prevLength", "INDENT_DESCRIPTION", "DEDENT_DESCRIPTION", "INVALID_CODE_POINT", "InputStreamWithIndentation", "InputStream", "state", "pos", "Indentation", "PExpr", "isIndent", "inputStream", "pseudoTokens", "origPos", "sign", "TerminalNode", "ruleName", "grammar", "memo", "formals", "actuals", "description", "Failure", "applyIndent", "Apply", "applyDedent", "newAnyBody", "Splice", "built_in_rules_default", "IndentationSensitive", "Builder", "findIndentation", "Grammar", "ohm_grammar_default", "buildGrammar", "isBuffer", "obj", "compileAndLoad", "source", "namespace", "m", "grammarSyntaxError", "grammar", "optNamespace", "ns", "grammars", "grammarNames", "interval", "getLineAndColumnMessage", "unexpectedObjToString", "grammarSource", "grammar", "grammarSource", "DSLError", "message", "phase", "details", "ParseError", "parse", "source", "match", "grammar", "parseOrThrow", "result", "ParseError", "semantics", "grammar", "collectProps", "nodes", "bag", "node", "result", "key", "value", "_game", "title", "_lb", "blocks", "_rb", "gameTitle", "config", "assets", "player", "enemies", "collectibles", "levels", "hud", "rules", "sounds", "block", "_config", "first", "_commas", "rest", "_trailing", "_key", "_colon", "val", "_assets", "defs", "d", "_kw", "path", "_fwKey", "_c1", "fw", "_comma", "_fhKey", "_c2", "fh", "_player", "props", "animations", "animBlock", "_enemy", "name", "_coll", "_level", "layers", "firstMapping", "child", "mapping", "_xk", "_xc", "x", "_yk", "_yc", "y", "list", "entity", "_at", "_lp", "_rp", "asset", "w", "_c3", "h", "_hud", "elements", "e", "type", "_node", "_rules", "cond", "seconds", "_sounds", "_anim", "_first", "_rest", "_lq", "chars", "_rq", "_bs", "ch", "_neg", "_int", "_dot", "_frac", "_hash", "_h1", "_h2", "_h3", "_h4", "_h5", "_h6", "_sep", "c", "children", "toAST", "matchResult", "semantics", "validate", "ast", "errors", "assetKeys", "enemyNames", "e", "collectibleNames", "c", "enemy", "coll", "levelNames", "level", "ep", "cp", "key", "value", "DEFAULT_CONFIG", "DEFAULT_PLAYER", "applyDefaults", "ast", "fillConfigDefaults", "fillPlayerDefaults", "fillEnemyDefaults", "fillCollectibleDefaults", "config", "DEFAULT_CONFIG", "player", "DEFAULT_PLAYER", "enemy", "coll", "CodeBuilder", "text", "header", "body", "code", "line", "other", "resolveAssetPath", "asset", "basePath", "generatePreloadScene", "ast", "b", "CodeBuilder", "asset", "path", "resolveAssetPath", "allAnims", "collectAnimations", "ownerKey", "anim", "firstSceneKey", "sceneKey", "name", "result", "enemy", "coll", "generatePlayerCreate", "player", "spawn", "b", "CodeBuilder", "generatePlayerUpdate", "useArrows", "useWasd", "leftConditions", "rightConditions", "a", "jumpConditions", "generatePlayerInputSetup", "generateEnemyCreate", "enemies", "placements", "b", "CodeBuilder", "placement", "def", "e", "generateEnemyUpdate", "hasPatrol", "hasChase", "hasFly", "generateEnemyCollision", "generateCollectibleCreate", "collectibles", "placements", "b", "CodeBuilder", "placement", "def", "c", "generateCollectibleCollision", "generateTilemapCreate", "level", "assets", "b", "CodeBuilder", "tilesetKey", "a", "layerName", "tiledName", "generateLevelScene", "ast", "level", "levelIndex", "b", "CodeBuilder", "sceneKeyStr", "sceneKey", "nextSceneKey", "generatePlayerInputSetup", "generatePlayerCreate", "generateTilemapCreate", "plat", "enemyCode", "generateEnemyCreate", "generateEnemyCollision", "collectCode", "generateCollectibleCreate", "generateCollectibleCollision", "generatePlayerUpdate", "generateEnemyUpdate", "name", "generateHudScene", "hud", "maxLives", "b", "CodeBuilder", "el", "generateHudElement", "x", "y", "positionToXY", "fontSize", "color", "position", "DEFAULT_CDN", "generateStandaloneHTML", "ast", "options", "phaserCdn", "b", "CodeBuilder", "escapeHtml", "generatePreloadScene", "i", "generateLevelScene", "generateHudScene", "sceneList", "level", "sceneKey", "name", "s", "generate", "ast", "options", "generateStandaloneHTML", "compile", "source", "options", "ast", "parseToAST", "generate", "matchResult", "parseOrThrow", "rawAST", "toAST", "applyDefaults", "validation", "validate"]
}
